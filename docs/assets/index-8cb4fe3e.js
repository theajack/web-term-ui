(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function Ot(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Lt(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=_e(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,h=!1;return{s:function(){t=t.call(n)},n:function(){var l=t.next();return a=l.done,l},e:function(l){h=!0,o=l},f:function(){try{a||t.return==null||t.return()}finally{if(h)throw o}}}}function me(n,e,t){return(e=xe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ht(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function $(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ht(Object(t),!0).forEach(function(r){me(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ht(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function be(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function xe(n){var e=be(n,"string");return typeof e=="symbol"?e:e+""}function lt(n){"@babel/helpers - typeof";return lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(n)}function _e(n,e){if(n){if(typeof n=="string")return Ot(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ot(n,e):void 0}}var C={FontFamily:'Menlo, Monaco, "Courier New", monospace',FontSize:14,LineHeight:18,CodePadding:10,PLeft:8};function we(n){var e=document.createElement("canvas"),t=e.getContext("2d");return t.font=n,function(r){return r?t.measureText(r).width:0}}function ct(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function ke(n){if(Array.isArray(n))return ct(n)}function X(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function It(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,$e(r.key),r)}}function Q(n,e,t){return e&&It(n.prototype,e),t&&It(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Se(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Ce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ee(n){return ke(n)||Se(n)||Pe(n)||Ce()}function Te(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function $e(n){var e=Te(n,"string");return typeof e=="symbol"?e:e+""}function K(n){"@babel/helpers - typeof";return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(n)}function Pe(n,e){if(n){if(typeof n=="string")return ct(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ct(n,e):void 0}}function _t(n){return!!(n!=null&&n.__isRef)}var ht=null;function je(n){return ht=n,function(){ht=null}}function Ae(){return ht}var Oe=function(){function n(e,t){var r=this;X(this,n),this.__isComputed=!0,this._dirty=!1,this._listeners=[],this._clearSub=[],this._compute=e,this._set=t;var i=je(function(o,a){var h=function(){if(r._dirty=!0,r._listeners.length>0){var c=r._value,s=r.value;r._listeners.forEach(function(d){d(s,c)})}},l=typeof a=="string"?o.$sub(a,h):o.sub(h);r._clearSub.push(l)});this._refreshValue(),i()}return Q(n,[{key:"value",get:function(){var e;return this._dirty&&this._refreshValue(),He(this),(e=Ae())===null||e===void 0||e(this),this._value},set:function(e){if(!this._set){console.warn("Computed not have set property");return}this._set(e)}},{key:"_refreshValue",value:function(){this._value=this._compute(),this._dirty=!1}},{key:"sub",value:function(e){var t=this;return this._listeners.push(e),function(){return t.unsub(e)}}},{key:"unsub",value:function(e){var t=this._listeners.indexOf(e);return t!==-1?(this._listeners.splice(t,1),!0):!1}},{key:"destroy",value:function(){this._listeners=[],this._clearSub.forEach(function(e){return e()}),this._clearSub=[]}}])}();function Le(n,e){return Y(n)?n:new Oe(n,e)}function Y(n){return!!(n!=null&&n.__isComputed)}function Qt(n){return typeof n=="function"||Y(n)}var V={};function He(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",t;Y(n)||_t(n)?(e="value",t=function(r){return n.sub(r)}):t=function(r){return n.$sub(e,r)},Object.assign(V,{set:function(r){n[e]=r},get:function(){return n[e]},sub:t})}function Ie(n,e){if(!V)throw new Error("Bind 传入参数错误");(Y(e)||_t(e))&&(e=e.value);var t=V.get,r=V.set,i=V.sub;if(t()!==e)throw new Error("Bind 传入参数错误");var o=n.el,a="string";if(o.tagName==="INPUT"){var h=n.attr("type");h==="number"||h==="range"?a="number":(h==="radio"||h==="checkbox")&&(a="boolean")}var l=function(){if(a==="boolean")return o.checked;var u=n.value();return a==="number"?parseFloat(u):u},c=function(u){if(a==="boolean"){o.checked=u;return}n.value(u)},s=!1,d=function(){s=!0,r(l()),s=!1};c(t()),n.on("input",function(){d()}),n.on("change",function(){d()}),i(function(u){s||c(u)})}function I(n,e){if(_t(n))n.sub(function(){e(n.value)}),e(n.value);else if(Qt(n)){var t=Le(n);t.sub(function(){e(t.value)}),e(t.value)}else e(n)}var Yt=function(){function n(e){X(this,n),this.__ld_type=tt.Text,this.el=document.createTextNode(""),typeof e<"u"&&this.text(e)}return Q(n,[{key:"text",value:function(e){var t=this;return I(e,function(r){return t.el.textContent=r}),this}},{key:"mounted",value:function(e){return this.__mounted=e,this}}])}(),We=function(){function n(){X(this,n),this.__ld_type=tt.Frag,this.children=[],this.el=document.createDocumentFragment()}return Q(n,[{key:"append",value:function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return wt(r,function(o,a){e.children.push(a),e.el.appendChild(o)}),this}},{key:"mounted",value:function(e){return this.__mounted=function(t){t.children.forEach(function(r){var i;(i=r.__mounted)===null||i===void 0||i.call(r,r)}),e(t)},this}}])}(),tt=function(n){return n[n.Dom=0]="Dom",n[n.Text=1]="Text",n[n.Frag=2]="Frag",n}(tt||{});function wt(n,e){n.forEach(function(t){var r;if(Array.isArray(t)){wt(t,e);return}var i=t;Qt(i)?(i=new Yt(i),i=i.el):typeof i.__ld_type=="number"?i=i.el:t instanceof HTMLElement||(i=document.createTextNode("".concat(t))),e(i,t),(r=t.__mounted)===null||r===void 0||r.call(t,t)})}var De=/(width$)|(height$)|(top$)|(bottom$)|(left$)|(right$)|(^margin)|(^padding)|(font-?size)/i,Wt=/!important$/,Me=/^[0-9]+$/;function Be(n,e){n=ze(n);var t="";return Wt.test(e)&&(t="important",e=e.replace(Wt,"")),Me.test(e)&&De.test(n)&&(e="".concat(e,"px")),{cssKey:n,cssValue:e,important:t}}function ze(n){for(var e=n.length,t="",r=0;r<e;r++){var i=n[r],o=i.charCodeAt(0);o>=65&&o<=90?t+="-".concat(i.toLowerCase()):t+=i}return t}var Fe=["a","div","h1","h2","h3","h4","h5","h6","button","canvas","code","pre","table","th","td","tr","video","audio","ol","select","option","p","i","iframe","img","input","label","ul","li","span","textarea","form","br","tbody","object","progress","section","slot","small","strong","sub","summary","sup","template","title","var","style","meta","head","link","svg","script"];function Ne(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return kt(n,e,document)}function kt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;if(e){var r=t.querySelector(n);if(r)return new J(r);throw new Error("Element is not exist"+n)}for(var i=t.querySelectorAll(n),o=[],a=0;a<i.length;a++)o.push(new J(i[a]));return o}var L=function(){var n=function(t){return new J(t)},e={frag:{get:function(){return new We}},text:{get:function(){var t=function(r){return new Yt(r)};return t.text=t,t}}};return Fe.forEach(function(t){e[t]={get:function(){return n(t)}}}),Object.defineProperties(n,e),n}();function Ve(n,e){var t,r=e;typeof e=="string"?r=kt(e,!0):e instanceof HTMLElement&&(r=new J(e)),Array.isArray(n)?(t=r).append.apply(t,Ee(n)):r.append(n)}var J=function(){function n(e){X(this,n),this.__ld_type=tt.Dom,this.__xr_funcs={},this.el=typeof e=="string"?document.createElement(e):e}return Q(n,[{key:"_ur",value:function(e,t){var r=this;return typeof t>"u"?this.el[e]:(I(t,function(i){return r.el[e]=i}),this)}},{key:"class",value:function(e){return this._ur("className",e)}},{key:"id",value:function(e){return this._ur("id",e)}},{key:"addClass",value:function(e){return this.el.classList.add(e),this}},{key:"removeClass",value:function(e){return this.el.classList.remove(e),this}},{key:"hasClass",value:function(e){var t;return(t=this.el)===null||t===void 0?void 0:t.classList.contains(e)}},{key:"toggleClass",value:function(e,t){var r;return!!((r=this.el)!==null&&r!==void 0&&r.classList.toggle(e,t))}},{key:"remove",value:function(){var e;return(e=this.el)===null||e===void 0||e.remove(),this}},{key:"text",value:function(e){return typeof e>"u"?this.el.innerText:this._ur("innerText",e)}},{key:"mounted",value:function(e){return this.__mounted=e,this}},{key:"attr",value:function(e,t){var r=this;if(K(e)==="object"){for(var i in e)this.attr(i,e[i]);return this}return typeof t>"u"?this.el.getAttribute(e)||"":(I(t,function(o){return r.el.setAttribute(e,o)}),this)}},{key:"removeAttr",value:function(e){return this.el.removeAttribute(e),this}},{key:"func",value:function(e,t){return typeof t>"u"?this.__xr_funcs[e]:(this.__xr_funcs[e]=t,this)}},{key:"data",value:function(e,t){var r=this;if(K(e)==="object"){for(var i in e)this.data(i,e[i]);return this}if(typeof t>"u"){var o;return((o=this.el.__xr_data)===null||o===void 0?void 0:o[e])||null}return this.el.__xr_data||(this.el.__xr_data={}),I(t,function(a){return r.el.__xr_data[e]=a}),this}},{key:"style",value:function(e,t){var r=this.el.style;if(typeof t<"u")return I(t,function(o){var a=Be(e,o),h=a.important,l=a.cssValue,c=a.cssKey;r.setProperty(c,l,h)}),this;if(typeof e=="string")return r[e];for(var i in e)this.style(i,e[i]);return this}},{key:"value",value:function(e){return this._ur("value",e)}},{key:"html",value:function(e){return this._ur("innerHTML",e)}},{key:"outerHtml",value:function(e){var t=this;return typeof e>"u"?this.el.outerHTML:(I(e,function(r){t.html(r),t.el=t.el.children[0]}),this)}},{key:"child",value:function(e){var t=this.el.children[e];return t?new n(t):null}},{key:"children",value:function(){for(var e=this.el.children.length,t=[],r=0;r<e;r++)t.push(this.child(r));return t}},{key:"click",value:function(e){return this.on("click",e)}},{key:"on",value:function(e,t){if(K(e)==="object"){for(var r in e)this.on(r,e[r]);return this}var i=this.el;if(typeof t=="function")this.el.addEventListener(e,t);else{var o,a=function(h){var l;t.self&&h.target!==i||(t.stop&&h.stopPropagation(),t.prevent&&h.preventDefault(),t.once&&i.removeEventListener(e,a,t.capture),(l=t.listener)===null||l===void 0||l.call(t,h))};i.addEventListener(e,a,(o=t.capture)!==null&&o!==void 0?o:!1)}return this}},{key:"append",value:function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return wt(r,function(o){e.el.appendChild(o)}),this}},{key:"ref",value:function(e){return e(this),this}},{key:"hide",value:function(){return this.display("none")}},{key:"display",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"block";return this.style("display",e)}},{key:"show",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";return I(e,function(i){t.display(i?r:"none")}),this}},{key:"query",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return kt(e,t,this.el)}},{key:"src",value:function(e){return this._ur("src",e)}},{key:"parent",value:function(){return this.el.parentElement}},{key:"empty",value:function(){return this.html("")}},{key:"name",value:function(e){return this.attr("__xr_name",e)}},{key:"find",value:function(e){return this.query('[__xr_name="'.concat(e,'"]'),!0)}},{key:"type",value:function(e){return this.attr("type",e)}},{key:"bind",value:function(e){return Ie(this,e),this}}])}();function Re(n,e){var t=[],r="#0b8c0b",i=.4,o=we("14px Menlo, Monaco, Courier New, monospace"),a=Lt(e),h;try{for(a.s();!(h=a.n()).done;){var l=h.value,c={color:l.color||r,opacity:l.opacity||i};if(Ke(l)){var s=n.matchAll(l.match),d=Lt(s),u;try{for(d.s();!(u=d.n()).done;){var f=u.value,p=n.substring(0,f.index),v=p.split(`
`),y=v.pop();t.push($({left:o(y)+C.PLeft,top:v.length*C.LineHeight,width:o(f[0]),index:v.length},c))}}catch(E){d.e(E)}finally{d.f()}}else{var g=l.row,m=l.column,b=l.range,x=b===void 0?1:b,_=n.split(`
`);debugger;t.push($({left:o(_[g].substring(0,m))+C.PLeft,top:g*C.LineHeight,index:g,width:o(_[g].substring(m,m+x))},c))}}}catch(E){a.e(E)}finally{a.f()}return t}function Ke(n){return typeof n.match<"u"}function Ue(n){return n.map(function(e){return L.div.class("highlight-bar").style({position:"absolute",backgroundColor:te(e),left:"0",top:"".concat(C.CodePadding+e.top,"px"),height:"".concat(C.LineHeight,"px"),width:"100%"}).append(L.span.style({position:"absolute",backgroundColor:e.color,left:"".concat(e.left,"px"),width:"".concat(e.width,"px"),height:"100%"}))})}function te(n){var e=n.color,t=n.opacity;if(e[0]==="#"){var r=function(o){var a=Math.round(o*1.6*10).toString(16);return a.length===2?"F":a},i=r(t);return e.length===4?"".concat(e).concat(i):"".concat(e).concat(i).concat(i)}else if(e.startsWith("rgba"))return e.replace(/,([0-9]*)\)/,",".concat(t,")"));return e.replace(/,([0-9]*)\)/,function(o,a){return",".concat(a,",").concat(t,")")})}var at="#9cdcfe";Ve(L.style.text(`
.xhl-punc {
    color: #ddd;
}
.xhl-bkt {
    color: #ffe11c;
}
.xhl-k1 {
    color: #569cd6;
}
.xhl-k2 {
    color: #c586c0;
}
.xhl-k3 {
    color: #3ac9b0;
}
.xhl-num {
    color: #b5cea8;
}
.xhl-f {
    color: #dcdcaa;
}
.xhl-reg,
.xhl-reg * {
    color: #d16969;
}
.xhl-str,
.xhl-str *,
.xhl-str .xhl-cm {
    color: #ce9178;
}
.xhl-cm,
.xhl-cm * {
    color: #6a8a35;
}
.xhl-jsx {
    color: #569cd6;
}
.xhl-tmp,.xhl-tmp .xhl-punc,.xhl-tmp .xhl-bkt{
    color: rgb(86,156,214);
}
.xhl-def{color: `.concat(at,`;}
.xhl-def .xhl-punc {
    color: #ddd;
}
.xhl-pre {
    background-color: #111;
    padding: 10px;
    color: `).concat(at,`;
    font-size: 14px;
    margin: 0;
    overflow-x: auto;
    font-family: Menlo, Monaco, "Courier New", monospace;
    line-height: 18px;
}
.xhl-container {
    overflow: auto;
}
.xhl-container .xhl-pre{
    background-color: transparent;
    padding: 0;
    font-family: inherit;
    line-height: inherit;
    font-size: inherit;
    color: inherit;
    overflow: unset;
    color: `).concat(at,`;
}
.xhl-pre::-webkit-scrollbar,
.xhl-container::-webkit-scrollbar {
    width: 5px;
    cursor: pointer;
    height: 5px;
}
.xhl-pre::-webkit-scrollbar-button, .xhl-container::-webkit-scrollbar-button {
    display: none;
}
.xhl-pre::-webkit-scrollbar-track,
.xhl-container::-webkit-scrollbar-track {
    background-color: transparent;
}
.xhl-pre::-webkit-scrollbar-thumb,
.xhl-container::-webkit-scrollbar-thumb {
    background-color: #666;
    cursor: pointer;
    background-clip: initial;
}
.xhl-pre::-webkit-scrollbar-thumb:hover,
.xhl-container::-webkit-scrollbar-thumb:hover {
    background-color: #888;
    cursor: pointer;
}
`)),document.head);function qe(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;n=n.replace(/\&lt;/g,"__LT__").replace(/\&gt;/g,"__GT__");var t=Ge(n.replace(/</g,"&lt;").replace(/>/g,"&gt;"));return e?"<pre class='xhl-pre'>".concat(t,"</pre>"):t}var Dt=["var","new","const","let","typeof","in","function","this","true","false","null","undefined","async","delete","class","extends"],Mt=["return","for","while","else if","if","else","switch","case","default","break","continue","await","yield","try","catch","finally","throw","export","import","from"],Bt=["console","window","document","Date","Array","Object","Boolean","Number","String","alert","RegExp","Function","JSON","Date"],W=["\\/","\\","\\(","\\)","\\[","\\]","\\{","\\}","\\+","\\-","\\*","\\=",",","\\.",":","%","_","\\$","@","#","\\^","\\|","!","~"],zt=["\\(","\\)","\\[","\\]","\\{","\\}"],q="(^|(&lt;)|(&lt;)|[\\n\\t;<> "+W.join("")+"])",ft="(["+W.join("")+"\\n;<> ]|(&lt;)|(&lt;)|$)";function H(n,e){return'<span class="xhl-'+e+'">'+n+"</span>"}function Ft(n,e,t,r){return n.replace(e,function(i){return typeof r=="string"?i.replace(r,H(r,t)):lt(r)==="object"?i.replace(r,function(o){return H(o,t)}):H(typeof r=="function"?r.apply(void 0,arguments):i,t)})}function Ze(n,e,t,r){if(n.indexOf("</span>")!==-1){var i=typeof e=="string"?Je(e):e[0];n=n.replace(i,function(a){var h=typeof e=="string"?new RegExp(e,"g"):e[1];return Ft(a,h,t,r)})}else{var o=typeof e=="string"?new RegExp(e,"g"):e[1];n=Ft(n,o,t,r)}return n}function Je(n){return new RegExp(n+"(?![^<]*>|[^<>]*</)","g")}function Ge(n){return n=Xe(n,[["\\$\\{(.*)\\}","tmp",function(e,t){return e.replace(t,H(t,"def"))}],[[/("(?:[^"\\]|\\.)*")|(\'(?:[^\'\\]|\\.)*\')|(`((?:[^`\\]|\\.)|\n)*`)(?![^<]*>|[^<>]*<\/)/g,/("(?:[^"\\]|\\.)*")|(\'(?:[^\'\\]|\\.)*\')|(`((?:[^`\\]|\\.)|\n)*`)/g],"str"],[`(//.*(
|$))|(\\/\\*(.|
)*?\\*\\/)`,"cm"],["\\/[a-zA-Z0-9"+W.slice(1).join("")+" ]+\\/[gi]?","reg"],D(Dt,"k1"),D(Dt,"k1"),D(Mt,"k2"),D(Mt,"k2"),D(Bt,"k3"),D(Bt,"k3"),[q+"[a-zA-Z_\\$]+[a-zA-Z_\\$0-9]* ?\\(","f",new RegExp("[a-zA-Z_\\$]+[a-zA-Z_\\$0-9]*","g")],[q+"[0-9]+(\\.?[0-9]+)?"+ft,"num",/[0-9]+(.?[0-9]+)?/g],[q+"[0-9]+(\\.?[0-9]+)?"+ft,"num",/[0-9]+(.?[0-9]+)?/g],[`&lt;\\/?[a-zA-Z\\-]*(\\/| |
|&gt;)`,"jsx"],["["+zt.join("")+"]","bkt",new RegExp("["+zt.join("")+"]","g")],["["+W.join("")+"]","punc",new RegExp("["+W.join("")+"]","g")],["["+W.join("")+"]","punc",new RegExp("["+W.join("")+"]","g")]]),n=n.replace(/\&lt;/g,H("<","punc")).replace(/\&gt;/g,H(">","punc")).replace(/;/g,H(";","punc")).replace(/&/g,H("&","punc")),n=n.replace(/__LT__/g,"&amp;lt;").replace(/__GT__/g,"&amp;gt;"),n}function D(n,e){return[q+"(("+n.join(")|(")+"))"+ft,e,new RegExp("(("+n.join(")|(")+"))","g")]}function Xe(n,e){for(var t=0;t<e.length;t++)e[t].unshift(n),n=Ze.apply(null,e[t]);return n}function Qe(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{code:""},e=n.code,t=e===void 0?"":e,r=n.borderRight,i=r===void 0?!1:r,o=n.startIndex,a=o===void 0?1:o,h=n.highlights,l=h===void 0?[]:h,c=n.style,s=c===void 0?{}:c,d=n.codeStyle,u=d===void 0?{}:d,f=n.lineHeight,p=f===void 0?C.LineHeight:f,v=n.lineCount,y={backgroundColor:"#111",color:"#fff",fontFamily:C.FontFamily,margin:"0",fontSize:"".concat(C.FontSize,"px"),paddingTop:"".concat(C.CodePadding,"px"),paddingBottom:"0",paddingLeft:"".concat(C.PLeft,"px"),lineHeight:"".concat(p,"px")},g=$({overflowX:"auto",borderRight:i?"1px solid #666":"none",flex:"1",position:"relative"},y),m=t.split(`
`),b=t;t.length<=1e4?b=qe(b,!1):console.warn("当前代码过长，已关闭代码高亮");var x=$({display:"flex"},s);v&&(x.minHeight="".concat(v*p+C.CodePadding*2,"px"));var _=Re(t,l);return L.div.style(x).append(L.div.style($($({},y),{},{flexDirection:"column",display:"flex",borderRight:"1px solid #aaa",padding:"".concat(C.CodePadding,"px 0px"),color:"#ddd",textAlign:"right"})).append(m.map(function(E,S){var A=_.find(function(F){return F.index===S});return L.span.style({padding:"0px 5px",backgroundColor:A?te(A):"transparent"}).text(a+S)})),L.pre.class("xhl-container").style($($({},g),u)).mounted(function(E){setTimeout(function(){if(_.length){var S=_[0];if(E.el.scrollLeft=S.left-(E.el.offsetWidth-S.width)/2,ResizeObserver){var A=new ResizeObserver(function(F){var At=F[0].target;Ne(".highlight-bar").forEach(function(ge){return ge.style("maxWidth","".concat(At==null?void 0:At.scrollWidth,"px"))})});A.observe(E.el)}}},100)}).append(Ue(_),L.div.class("xhl-pre").style($($({},u),{},{position:"relative"})).html(b))).el}var Ye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dt={exports:{}};(function(n,e){(function(t,r){r(e)})(Ye,function(t){function r(l){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(l)}function i(l,c){for(var s=0;s<c.length;s++){var d=c[s];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,d.key,d)}}function o(l){return function(c){if(Array.isArray(c))return a(c)}(l)||function(c){if(typeof Symbol<"u"&&c[Symbol.iterator]!=null||c["@@iterator"]!=null)return Array.from(c)}(l)||function(c,s){if(c){if(typeof c=="string")return a(c,s);var d=Object.prototype.toString.call(c).slice(8,-1);return(d=d==="Object"&&c.constructor?c.constructor.name:d)==="Map"||d==="Set"?Array.from(c):d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?a(c,s):void 0}}(l)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function a(l,c){(c==null||c>l.length)&&(c=l.length);for(var s=0,d=new Array(c);s<c;s++)d[s]=l[s];return d}var h=function(){function l(){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.usePrevEmit=!0,this._map={},this._prevData={}}var c,s,d;return c=l,d=[{key:"_",get:function(){return this.__||(this.__=new l),this.__}},{key:"usePrevEmit",get:function(){return this._.usePrevEmit},set:function(u){this._.usePrevEmit=u}},{key:"emit",value:function(u){for(var f,p=arguments.length,v=new Array(1<p?p-1:0),y=1;y<p;y++)v[y-1]=arguments[y];(f=this._).emit.apply(f,[u].concat(v))}},{key:"off",value:function(u,f){this._.off(u,f)}},{key:"clear",value:function(u){this._.clear(u)}},{key:"on",value:function(u,f){this._.on(u,f)}},{key:"once",value:function(u,f){this._.once(u,f)}},{key:"onWait",value:function(u){this._.onWait(u)}},{key:"head",value:function(u,f){this._.head(u,f)}},{key:"headOnce",value:function(u,f){this._.headOnce(u,f)}}],(s=[{key:"hasEvent",value:function(u){return!!this._map[u]}},{key:"on",value:function(u,f){var p=this;if(r(u)==="object"){var v,y=[];for(v in u)y.push(this.on(v,u[v]));return function(){y.forEach(function(m){return m()})}}if(!f)throw new Error("fn is required");var g=this._formatTarget(f);return this._checkPrev(u,g)&&g.once?function(){}:(this._getList(u).push(g),function(){p.off(u,g)})}},{key:"_formatTarget",value:function(u,f){return typeof u=="function"?{listener:u,once:f!=null&&f,prev:this.usePrevEmit}:(typeof f=="boolean"&&(u.once=f),u)}},{key:"emit",value:function(u){for(var f=arguments.length,p=new Array(1<f?f-1:0),v=1;v<f;v++)p[v-1]=arguments[v];this._prevData[u]=p;var y=this._map[u];if(!y)return!1;for(var g=0;g<y.length;g++){var m=y[g];m.listener.apply(m,p),m.once&&(y.splice(g,1),g--)}return!0}},{key:"off",value:function(u,f){if(u=this._map[u],!u)return!1;var p=u.findIndex(function(v){return v===f||v.listener===f});return p!==-1&&(u.splice(p,1),!0)}},{key:"clear",value:function(u){return!!this._map[u]&&(delete this._map[u],delete this._prevData[u],!0)}},{key:"onWait",value:function(u,f){var p=this;return new Promise(function(v){var y=function(){for(var g=arguments.length,m=new Array(g),b=0;b<g;b++)m[b]=arguments[b];return v(m)};f&&(y=Object.assign({listener:y},f)),p.once(u,y)})}},{key:"destroy",value:function(){this._map={},this._prevData={}}},{key:"_checkPrev",value:function(u,f){return f.prev?(u=this._prevData[u],u!==void 0&&(f.listener.apply(f,o(u)),!0)):!1}},{key:"once",value:function(u,f){return this.on(u,this._formatTarget(f,!0))}},{key:"head",value:function(u,f){var p=this,v=this._formatTarget(f);return this._checkPrev(u,v)&&v.once?function(){}:(this._getList(u).unshift(v),function(){p.off(u,f)})}},{key:"headOnce",value:function(u,f){return this.head(u,this._formatTarget(f,!0))}},{key:"_getList",value:function(u){var f=this._map[u];return f||(this._map[u]=f=[]),f}}])&&i(c.prototype,s),d&&i(c,d),Object.defineProperty(c,"prototype",{writable:!1}),l}();h.version="0.0.3",t.Eveit=h,t.default=h,Object.defineProperty(t,"__esModule",{value:!0})})})(dt,dt.exports);var St=dt.exports;function vt(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function tn(n){if(Array.isArray(n))return vt(n)}function en(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Nt(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,un(r.key),r)}}function nn(n,e,t){return e&&Nt(n.prototype,e),t&&Nt(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function rn(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function on(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vt(n){return tn(n)||rn(n)||sn(n)||on()}function an(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function un(n){var e=an(n,"string");return typeof e=="symbol"?e:e+""}function sn(n,e){if(n){if(typeof n=="string")return vt(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?vt(n,e):void 0}}var U=Symbol("E"),Ct=function(n){return n[n.Fork=0]="Fork",n[n.Append=1]="Append",n}(Ct||{}),ee=function(){function n(){var e=this,t,r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.max,a=o===void 0?0:o,h=i.useStorage,l=h===void 0?!1:h,c=i.storageKey,s=c===void 0?"_def_history_stack":c,d=i.mode,u=d===void 0?0:d,f=i.storageProvider,p=i.onStepChange,v=i.onHistorySizeChange,y=i.onHistoryOut;if(en(this,n),this.step=0,this.size=0,this.max=40,this.list=[],this.index=0,this.End=U,this.isActive=!1,this.max=a,this.mode=u,l!==!1&&(f||s)&&(l=!0),l&&(this.storageProvider=f||{read:function(){var m=localStorage.getItem(s);return m?JSON.parse(m):[]},write:function(m){localStorage.setItem(s,JSON.stringify(m))}}),p&&(this.osc=function(){return p(e.step)}),v&&(this.ohsc=function(){return v(e.size)}),this.oho=y,(t=this.osc)===null||t===void 0||t.call(this),(r=this.ohsc)===null||r===void 0||r.call(this),l){var g=this.storageProvider.read();g instanceof Promise?g.then(function(m){e.useCache(m)}):this.useCache(g)}}return nn(n,[{key:"useCache",value:function(e){e.length!==0&&this.push.apply(this,Vt(e))}},{key:"setMax",value:function(e){this.max=e}},{key:"setStep",value:function(e){var t;this.step=e,(t=this.osc)===null||t===void 0||t.call(this)}},{key:"setHistoryIndex",value:function(e){var t;this.isActive||(this.isActive=!0),this.index=e,this.size=e,(t=this.ohsc)===null||t===void 0||t.call(this)}},{key:"back",value:function(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(!this.canBack(t))return t>1&&(this.setStep(this.step-this.index),this.setHistoryIndex(0)),this.End;this.setStep(this.step-t),this.setHistoryIndex(this.index-t);var r=this.list[this.index];return(e=this.oho)===null||e===void 0||e.call(this,r),r}},{key:"canBack",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.index-e>=0}},{key:"first",value:function(){return this.list.length===0?U:(this.setStep(this.step-this.index),this.setHistoryIndex(0),this.list[0])}},{key:"last",value:function(){return this.list.length===0?U:(this.setStep(this.step+this.list.length-this.index),this.setHistoryIndex(this.list.length-1),this.list[this.list.length-1])}},{key:"forward",value:function(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(!this.canForward(t))return t>1&&(this.setStep(this.step+this.list.length-this.index),this.setHistoryIndex(this.list.length-1)),this.End;this.setStep(this.step+t),this.setHistoryIndex(this.index+t);var r=this.list[this.index];return(e=this.oho)===null||e===void 0||e.call(this,r),r}},{key:"isEnd",value:function(e){return e===U}},{key:"canForward",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.index+e<this.list.length}},{key:"pop",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,t=this.list.length;if(t<=e){var r=Vt(this.list);return this.clear(),r}var i=t-e,o=this.list.splice(i),a=this.list.length;return a<this.index&&(this.setHistoryIndex(a),this.setStep(this.step-(this.index-a))),o}},{key:"push",value:function(){var e,t=this.list.length;this.index<t&&(this.step++,this.index++,this.mode===0&&this.list.splice(this.index));var r=arguments.length,i=0,o=r;this.max>0&&t+r>this.max&&(i=t+r-this.max,o=r-i),(e=this.list).push.apply(e,arguments),i&&this.list.splice(0,i),this._onListChange(),o&&(this.mode===1?this.setHistoryIndex(this.list.length):this.setHistoryIndex(this.index+o)),this.mode===1?this.setStep(this.list.length):this.setStep(this.step+o),this.isActive&&(this.isActive=!1)}},{key:"clear",value:function(){this.list=[],this._onListChange(),this.setHistoryIndex(0),this.setStep(0),this.isActive=!1}},{key:"replace",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.index;typeof this.list[t]>"u"||(this.list[t]=e,this._onListChange())}},{key:"isLatest",get:function(){return this.index===this.list.length-1}},{key:"_onListChange",value:function(){var e;(e=this.storageProvider)===null||e===void 0||e.write(this.list)}},{key:"current",value:function(){return this.list[this.index]}}])}();ee.Mode=Ct;function pt(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function ln(n){if(Array.isArray(n))return pt(n)}function et(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Rt(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,vn(r.key),r)}}function nt(n,e,t){return e&&Rt(n.prototype,e),t&&Rt(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function cn(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function hn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fn(n){return ln(n)||cn(n)||pn(n)||hn()}function dn(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function vn(n){var e=dn(n,"string");return typeof e=="symbol"?e:e+""}function M(n){"@babel/helpers - typeof";return M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(n)}function pn(n,e){if(n){if(typeof n=="string")return pt(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?pt(n,e):void 0}}function rt(n){return!!(n!=null&&n.__isRef)}var yt=null;function yn(n){return yt=n,function(){yt=null}}function ne(){return yt}var gn=function(){function n(e,t){var r=this;et(this,n),this.__isComputed=!0,this._dirty=!1,this._listeners=[],this._clearSub=[],this._compute=e,this._set=t;var i=yn(function(o,a){var h=function(){if(r._dirty=!0,r._listeners.length>0){var c=r._value,s=r.value;r._listeners.forEach(function(d){d(s,c)})}},l=typeof a=="string"?o.$sub(a,h):o.sub(h);r._clearSub.push(l)});this._refreshValue(),i()}return nt(n,[{key:"value",get:function(){var e;return this._dirty&&this._refreshValue(),ie(this),(e=ne())===null||e===void 0||e(this),this._value},set:function(e){if(!this._set){console.warn("Computed not have set property");return}this._set(e)}},{key:"_refreshValue",value:function(){this._value=this._compute(),this._dirty=!1}},{key:"sub",value:function(e){var t=this;return this._listeners.push(e),function(){return t.unsub(e)}}},{key:"unsub",value:function(e){var t=this._listeners.indexOf(e);return t!==-1?(this._listeners.splice(t,1),!0):!1}},{key:"destroy",value:function(){this._listeners=[],this._clearSub.forEach(function(e){return e()}),this._clearSub=[]}}])}();function mn(n,e){return it(n)?n:new gn(n,e)}function it(n){return!!(n!=null&&n.__isComputed)}function Et(n){return typeof n=="function"||it(n)}function re(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={},r={},i={$sub:function(s,d){return t[s]||(t[s]=[]),t[s].push(d),function(){i.$unsub(s,d)}},$unsub:function(s,d){if(t[s]){if(typeof d>"u")return delete t[s],!0;var u=t[s].indexOf(d);return u===-1?!1:(t[s].splice(u,1),!0)}},$get:function(s){return r[s]}},o={},a=function(s){var d=n[s];r[s]=d,o[s]={get:function(){var u;ie(i,s),(u=ne())===null||u===void 0||u(i,s);var f=r[s];return f},set:function(u){var f,p=r[s];r[s]=u,(f=t[s])===null||f===void 0||f.forEach(function(v){v(u,p)})}},i[s]=d};for(var h in n)a(h);Object.defineProperties(i,o);var l=function(s){i[s]=function(){for(var d=arguments.length,u=new Array(d),f=0;f<d;f++)u[f]=arguments[f];return e[s].apply(i,u)}};for(var c in e)l(c);return i}var R={};function ie(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",t;it(n)||rt(n)?(e="value",t=function(r){return n.sub(r)}):t=function(r){return n.$sub(e,r)},Object.assign(R,{set:function(r){n[e]=r},get:function(){return n[e]},sub:t})}function bn(n,e){if(!R)throw new Error("Bind 传入参数错误");(it(e)||rt(e))&&(e=e.value);var t=R.get,r=R.set,i=R.sub;if(t()!==e)throw new Error("Bind 传入参数错误");var o=n.el,a="string";if(o.tagName==="INPUT"){var h=n.attr("type");h==="number"||h==="range"?a="number":(h==="radio"||h==="checkbox")&&(a="boolean")}var l=function(){if(a==="boolean")return o.checked;var u=n.value();return a==="number"?parseFloat(u):u},c=function(u){if(a==="boolean"){o.checked=u;return}n.value(u)},s=!1,d=function(){s=!0,r(l()),s=!1};c(t()),n.on("input",function(){d()}),n.on("change",function(){d()}),i(function(u){s||c(u)})}function P(n,e){if(rt(n))n.sub(function(){e(n.value,!1)}),e(n.value,!0);else if(Et(n)){var t=mn(n);t.sub(function(){e(t.value,!1)}),e(t.value,!0)}else return e(n,!0),!1;return!0}function oe(n){return rt(n)||Et(n)}var ae=function(){function n(e){et(this,n),this.__ld_type=ot.Text,this.el=document.createTextNode(""),typeof e<"u"&&this.text(e)}return nt(n,[{key:"text",value:function(e){var t=this;return P(e,function(r){return t.el.textContent=r}),this}},{key:"mounted",value:function(e){return this.__mounted=e,this}}])}(),xn=function(){function n(){et(this,n),this.__ld_type=ot.Frag,this.children=[],this.el=document.createDocumentFragment()}return nt(n,[{key:"append",value:function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return Tt(r,function(o,a){e.children.push(a),e.el.appendChild(o)}),this}},{key:"mounted",value:function(e){return this.__mounted=function(t){t.children.forEach(function(r){var i;(i=r.__mounted)===null||i===void 0||i.call(r,r)}),e(t)},this}}])}(),ot=function(n){return n[n.Dom=0]="Dom",n[n.Text=1]="Text",n[n.Frag=2]="Frag",n}(ot||{});function Tt(n,e){n.forEach(function(t){var r;if(Array.isArray(t)){Tt(t,e);return}var i=t;Et(i)?(i=new ae(i),i=i.el):typeof i.__ld_type=="number"?i=i.el:t instanceof HTMLElement||(i=document.createTextNode("".concat(t))),e(i,t),(r=t.__mounted)===null||r===void 0||r.call(t,t)})}var _n=/(width$)|(height$)|(top$)|(bottom$)|(left$)|(right$)|(^margin)|(^padding)|(font-?size)/i,Kt=/!important$/,wn=/^[0-9]+$/;function ue(n,e){n=kn(n);var t="";return Kt.test(e)&&(t="important",e=e.replace(Kt,"")),wn.test(e)&&_n.test(n)&&(e="".concat(e,"px")),{cssKey:n,cssValue:e,important:t}}function kn(n){for(var e=n.length,t="",r=0;r<e;r++){var i=n[r],o=i.charCodeAt(0);o>=65&&o<=90?t+="-".concat(i.toLowerCase()):t+=i}return t}var Sn=["a","div","h1","h2","h3","h4","h5","h6","button","canvas","code","pre","table","th","td","tr","video","audio","ol","select","option","p","i","iframe","img","input","label","ul","li","span","textarea","form","br","tbody","object","progress","section","slot","small","strong","sub","summary","sup","template","title","var","style","meta","head","link","svg","script"];function se(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;if(e){var r=t.querySelector(n);if(r)return new j(r);throw new Error("Element is not exist"+n)}for(var i=t.querySelectorAll(n),o=[],a=0;a<i.length;a++)o.push(new j(i[a]));return o}var k=function(){var n=function(t){return new j(t)},e={frag:{get:function(){return new xn}},text:{get:function(){var t=function(r){return new ae(r)};return t.text=t,t}}};return Sn.forEach(function(t){e[t]={get:function(){return n(t)}}}),Object.defineProperties(n,e),n}();function Cn(n){var e=oe(n),t=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=new j("style").text(o);return document.head.appendChild(a.el),a};if(e||typeof n=="string"){var r=t();P(n,function(o){r.text(o)})}else{var i;le({data:n,onStyle:function(o,a){o&&(i||(i=t()),i.text(o)),a&&t(a)}})}}function le(n){var e=n.data,t=n.reactiveValue,r=t===void 0?[]:t,i=n.staticValue,o=i===void 0?[]:i,a=n.prefix,h=a===void 0?"":a,l=n.index,c=l===void 0?0:l,s=n.onStyle,d=n.first,u=d===void 0?!0:d,f=[],p=function(x){f.push(x),c++};h&&p("".concat(h,"{"));var v=!1,y=[],g=function(x){var _=e[x],E=oe(_);if(E)v=!0,function(S){P(_,function(A,F){F?p(ut(x,A)):(console.log(A,S),r[S]=ut(x,A),s(r.join("").trim()))})}(c);else{if(M(_)==="object")return y.push({key:x,value:_}),1;p(ut(x,_))}};for(var m in e)g(m);if(h&&p("}"),f.length){var b;(b=v?r:o).push.apply(b,f)}y.forEach(function(x){var _=x.key,E=x.value,S="";_[0]==="&"?S=_.substring(1):_[0]===":"?S=_:S=" ".concat(_),le({data:E,prefix:"".concat(h).concat(S),index:c,reactiveValue:r,staticValue:o,onStyle:s,first:!1})}),u&&s(r.join("").trim(),o.join("").trim())}function ut(n,e){var t=ue(n,e),r=t.important,i=t.cssValue,o=t.cssKey;return"".concat(o,":").concat(i).concat(r?"!".concat(r):"",";")}function En(n,e){var t,r=e;typeof e=="string"?r=se(e,!0):e instanceof HTMLElement&&(r=new j(e)),Array.isArray(n)?(t=r).append.apply(t,fn(n)):r.append(n)}var j=function(){function n(e){et(this,n),this.__ld_type=ot.Dom,this.__xr_funcs={},this.el=typeof e=="string"?document.createElement(e):e}return nt(n,[{key:"_ur",value:function(e,t){var r=this;return typeof t>"u"?this.el[e]:(P(t,function(i){return r.el[e]=i}),this)}},{key:"class",value:function(e){return this._ur("className",e)}},{key:"id",value:function(e){return this._ur("id",e)}},{key:"addClass",value:function(e){return this.el.classList.add(e),this}},{key:"removeClass",value:function(e){return this.el.classList.remove(e),this}},{key:"hasClass",value:function(e){var t;return(t=this.el)===null||t===void 0?void 0:t.classList.contains(e)}},{key:"toggleClass",value:function(e,t){var r;return!!((r=this.el)!==null&&r!==void 0&&r.classList.toggle(e,t))}},{key:"remove",value:function(){var e;return(e=this.el)===null||e===void 0||e.remove(),this}},{key:"text",value:function(e){return typeof e>"u"?this.el.innerText:this._ur("innerText",e)}},{key:"mounted",value:function(e){return this.__mounted=e,this}},{key:"attr",value:function(e,t){var r=this;if(M(e)==="object"){for(var i in e)this.attr(i,e[i]);return this}return typeof t>"u"?this.el.getAttribute(e)||"":(P(t,function(o){return r.el.setAttribute(e,o)}),this)}},{key:"removeAttr",value:function(e){return this.el.removeAttribute(e),this}},{key:"func",value:function(e,t){return typeof t>"u"?this.__xr_funcs[e]:(this.__xr_funcs[e]=t,this)}},{key:"data",value:function(e,t){var r=this;if(M(e)==="object"){for(var i in e)this.data(i,e[i]);return this}if(typeof t>"u"){var o;return((o=this.el.__xr_data)===null||o===void 0?void 0:o[e])||null}return this.el.__xr_data||(this.el.__xr_data={}),P(t,function(a){return r.el.__xr_data[e]=a}),this}},{key:"style",value:function(e,t){var r=this.el.style;if(typeof t<"u")return P(t,function(o){var a=ue(e,o),h=a.important,l=a.cssValue,c=a.cssKey;r.setProperty(c,l,h)}),this;if(typeof e=="string")return r[e];for(var i in e)this.style(i,e[i]);return this}},{key:"value",value:function(e){return this._ur("value",e)}},{key:"html",value:function(e){return this._ur("innerHTML",e)}},{key:"outerHtml",value:function(e){var t=this;return typeof e>"u"?this.el.outerHTML:(P(e,function(r){t.html(r),t.el=t.el.children[0]}),this)}},{key:"child",value:function(e){var t=this.el.children[e];return t?new n(t):null}},{key:"children",value:function(){for(var e=this.el.children.length,t=[],r=0;r<e;r++)t.push(this.child(r));return t}},{key:"click",value:function(e){return this.on("click",e)}},{key:"on",value:function(e,t){if(M(e)==="object"){for(var r in e)this.on(r,e[r]);return this}var i=this.el;if(typeof t=="function")this.el.addEventListener(e,t);else{var o,a=function(h){var l;t.self&&h.target!==i||(t.stop&&h.stopPropagation(),t.prevent&&h.preventDefault(),t.once&&i.removeEventListener(e,a,t.capture),(l=t.listener)===null||l===void 0||l.call(t,h))};i.addEventListener(e,a,(o=t.capture)!==null&&o!==void 0?o:!1)}return this}},{key:"append",value:function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return Tt(r,function(o){e.el.appendChild(o)}),this}},{key:"ref",value:function(e){return e(this),this}},{key:"hide",value:function(){return this.display("none")}},{key:"display",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"block";return this.style("display",e)}},{key:"show",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";return P(e,function(i){t.display(i?r:"none")}),this}},{key:"query",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return se(e,t,this.el)}},{key:"src",value:function(e){return this._ur("src",e)}},{key:"parent",value:function(){return this.el.parentElement}},{key:"empty",value:function(){return this.html("")}},{key:"name",value:function(e){return this.attr("__xr_name",e)}},{key:"find",value:function(e){return this.query('[__xr_name="'.concat(e,'"]'),!0)}},{key:"type",value:function(e){return this.attr("type",e)}},{key:"bind",value:function(e){return bn(this,e),this}}])}();function Ut(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function qt(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=Tn(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,h=!1;return{s:function(){t=t.call(n)},n:function(){var l=t.next();return a=l.done,l},e:function(l){h=!0,o=l},f:function(){try{a||t.return==null||t.return()}finally{if(h)throw o}}}}function Tn(n,e){if(n){if(typeof n=="string")return Ut(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ut(n,e):void 0}}var ce="  ";function $n(n){ce=n}function Pn(n){jn(this,n,ce)}function jn(n,e,t){var r=t.length;if(e.code==="Tab"){e.preventDefault();var i=Zt(n),o=i.startLineIndex,a=i.start,h=i.end,l=i.lineText.split(`
`);if(e.shiftKey){var c=!0,s=qt(l),d;try{for(s.s();!(d=s.n()).done;){var u=d.value;u.startsWith(t)?(n.selectionStart=o,n.selectionEnd=o+r,document.execCommand("delete",!1),c&&u.startsWith(t+t)&&(a-=r),h-=r,o+=u.length-r+1):o+=u.length+1,c=!1}}catch(x){s.e(x)}finally{s.f()}console.log(a,h),n.selectionStart=a,n.selectionEnd=h;return}if(l.length===1){st(t);return}a+=r;var f=qt(l),p;try{for(f.s();!(p=f.n()).done;){var v=p.value;n.selectionStart=n.selectionEnd=o,st(t),o+=r+v.length+1,h+=r}}catch(x){f.e(x)}finally{f.f()}n.selectionStart=a,n.selectionEnd=h}else if(e.code==="Enter"&&!e.ctrlKey){for(var y=Zt(n),g=y.lineText.split(`
`)[0],m=`
`,b=0;g.substring(b,b+r)===t;)m+=t,b+=r;b>0&&(st(m),e.preventDefault())}}function st(n){n&&document.execCommand("insertText",!1,n)}function Zt(n){var e=n.selectionStart,t=n.selectionEnd,r="",i=n.value;r=i.substring(e,t);var o=i.substring(0,e),a=o.lastIndexOf(`
`),h=a+1;return{start:e,end:t,text:r,lineText:i.substring(h,t),line:r.split(`
`).length,startLineIndex:h}}function gt(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function An(n){if(Array.isArray(n))return gt(n)}function On(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function $t(n,e,t){return e=G(e),In(n,he()?Reflect.construct(e,t||[],G(n).constructor):e.apply(n,t))}function B(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Jt(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,fe(r.key),r)}}function z(n,e,t){return e&&Jt(n.prototype,e),t&&Jt(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Z(n,e,t){return(e=fe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function G(n){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},G(n)}function Pt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&mt(n,e)}function he(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(he=function(){return!!n})()}function Ln(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Hn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function T(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Gt(Object(t),!0).forEach(function(r){Z(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Gt(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function In(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return On(n)}function mt(n,e){return mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},mt(n,e)}function Wn(n){return An(n)||Ln(n)||Mn(n)||Hn()}function Dn(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function fe(n){var e=Dn(n,"string");return typeof e=="symbol"?e:e+""}function Mn(n,e){if(n){if(typeof n=="string")return gt(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?gt(n,e):void 0}}var Bn=function(){function n(e,t){var r=this;B(this,n),this.pushedCurrent=!1,this.provider=t,this.history=new ee({max:e,mode:Ct.Append});var i=t.read();i instanceof Promise?i.then(function(o){r._initHistory(o)}):this._initHistory(i)}return z(n,[{key:"_initHistory",value:function(e){var t,r=JSON.parse(e);(t=this.history).push.apply(t,Wn(r))}},{key:"up",value:function(e){if(this.history.isActive||(this.push(e),this.history.back(),this.pushedCurrent=!0),this.history.canBack()){var t=this.history.back();return t}else return null}},{key:"down",value:function(){return this.history.canForward()?this.history.forward():null}},{key:"checkLatest",value:function(e){this.history.isLatest&&(this.history.replace(e),this.save())}},{key:"push",value:function(e){this.pushedCurrent&&(this.history.pop(),this.pushedCurrent=!1),this.history.push(e),this.save()}},{key:"save",value:function(){this.provider.write(JSON.stringify(this.history.list))}},{key:"clear",value:function(){this.pushedCurrent=!1,this.history.clear(),this.save()}}])}(),bt="web-term-container",O={FullParent:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},Text:{fontFamily:"courier-new, courier, monospace",fontSize:"15px",fontKerning:"none",whiteSpace:"pre",lineHeight:"17px",boxSizing:"border-box"},ScrollBar:{"&::-webkit-scrollbar":{width:"5px",cursor:"pointer",height:"5px"},"&::-webkit-scrollbar-button":{display:"none"},"&::-webkit-scrollbar-track":{display:"none"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#555",cursor:"pointer"}}},de={};function jt(n){Object.assign(de,n)}function zn(){Cn(de)}jt(Z(Z(Z({},".".concat(bt),T(T({position:"relative"},O.Text),{},{"*":T({},O.Text)},O.ScrollBar)),".editor-cursor",{position:"absolute",zIndex:"2",height:"16px",backgroundColor:"#000",color:"#fff","&.cursor-focus":{backgroundColor:"#fff",color:"#000"},".editor-cursor-border":T(T({},O.FullParent),{},{border:"1px solid #fff"}),".editor-cursor-text":T({},O.FullParent)}),".editor-textarea",T({},O.ScrollBar)));function Xt(){var n=navigator.userAgent;return/macintosh|mac os x/i.test(n)}function xt(n){return Xt()&&n.metaKey||!Xt()&&n.ctrlKey}function Fn(n){var e=!1;return n.on("compositionstart",function(){e=!0}),n.on("compositionend",function(){e=!1}),function(){return e}}function ve(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return n instanceof HTMLElement?new j(n):n instanceof j?n:typeof n=="string"?k.div[e?"html":"text"](n+t):k.div[e?"html":"text"](n.toString()+t)}var pe=2;jt({".term-display-box > div":{padding:"".concat(pe,"px 0"),wordBreak:"break-all",whiteSpace:"pre-wrap",a:{color:"#ccc"}}});var Nn=function(){function n(){B(this,n),this.container=k.div.class("term-display-box").on("click",function(e){e.stopPropagation()})}return z(n,[{key:"pushContent",value:function(e,t){this.container.append(ve(e,t,`
`))}}])}();function Vn(n){if(!n)return!1;var e=n.charCodeAt(0);return e>=128}var N=17,ye=function(n){function e(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.header,o=i===void 0?"":i,a=r.paddingTop,h=a===void 0?5:a,l=r.paddingLeft,c=l===void 0?5:l,s=r.size,d=s===void 0?"full":s,u=r.mode,f=u===void 0?"inline":u,p=r.tab,v=p===void 0?"  ":p;B(this,e),t=$t(this,e),t.SingleCharWidth=9,t.MultiCharWidth=15,t.wrapLine=!0,t.store=re({cx:0,cy:0}),t.header="",t._prevHeader="",t._prevHeaderWidth=0,t._pasteTimer=null,t._prevPos={x:-1,y:-1},t._isShowCursor=!1,t.size=d,t.mode=f,$n(v),t.paddingTop=h,t.paddingLeft=c;var y=k.canvas;return t.ctx=y.el.getContext("2d"),t.ctx.font="15px courier-new, courier, monospace",t.SingleCharWidth=t.measureTextWidth("a"),t.MultiCharWidth=t.measureTextWidth("一"),t.header=o,t.render(),t._monitorStart(),t}return Pt(e,n),z(e,[{key:"value",get:function(){var t=this.fullValue,r=this.header.length;return r?t.substring(r):t}},{key:"fullValue",get:function(){return this.textarea.value()}},{key:"beforeValue",get:function(){var t=this.fullValue,r=this.header.length,i=this.textarea.el.selectionStart;return typeof i=="number"&&i>0?t.substring(r,i):t.substring(r)}},{key:"headerWidth",get:function(){var t=this.header;return t!==this._prevHeader&&(this._prevHeader=t,this._prevHeaderWidth=this.measureTextWidth(t)),this._prevHeaderWidth}},{key:"_monitorStart",value:function(){var t=this;setTimeout(function(){t.textarea.el.clientWidth?t.relocateCursorPosition():t._monitorStart()},100)}},{key:"render",value:function(){var t=this.size==="full";this.container=k.div.style({position:"relative",height:t?"100%":"".concat(N+2*this.paddingTop,"px")}).append(this.cursor=k.div.class("editor-cursor").append(k.div.class("editor-cursor-border"),this.cursorText=k.div.class("editor-cursor-text")),this.textarea=k.textarea.class("editor-textarea").value(this.header).style(T(T({},O.FullParent),{},{padding:"".concat(this.paddingTop,"px ").concat(this.paddingLeft,"px"),backgroundColor:"transparent",border:"none",color:"#fff",outline:"none",resize:"none",zIndex:"1",caretColor:"transparent"}))),this.wrapLine&&this.textarea.style({wordBreak:"break-all",whiteSpace:"pre-wrap"}),this.initEvents()}},{key:"initEvents",value:function(){var t=this,r=!1,i=this.textarea.el,o=function(s){return s.code==="Backspace"||s.code==="Enter"},a=Fn(this.textarea),h=null,l=this.compatSelChange();this.textarea.on("keydown",function(s){if(!a()){if(t.mode==="inline"){if(s.code==="Enter")if(xt(s))t.pushText(`
`);else{s.preventDefault(),t.emit("key","Enter");return}else if(s.code==="ArrowUp"||s.code==="ArrowDown"||s.code==="Tab"){s.preventDefault(),t.emit("key",s.code);return}}if(s.code==="Tab"&&i.selectionStart!==i.selectionEnd&&t.showCursor(!1),Pn.call(i,s),o(s)&&(r=!0),s.code==="Backspace"){var d=t.getCursorPosition(),u=d.x,f=d.y;f===0&&u===t.headerWidth&&s.preventDefault()}xt(s)&&s.code==="KeyZ"&&(clearTimeout(h),h=setTimeout(function(){t.relocateCursorPosition()},50))}}).on("keyup",function(s){a()||o(s)&&(r=!1)}).on("paste",function(){t._pasteTimer=setTimeout(function(){t.relocateCursorPosition()},50)}).on("input",function(s){if(s.preventDefault(),r&&t.relocateCursorPosition(),t.size==="auto"){var d=t._countContentHeight(t.fullValue,!0);d!=i.clientHeight&&t.textarea.style("height","".concat(d,"px"))}t.emit("input")}).on("selectionchange",function(){l&&(l(),l=null),t._onSelectionChange()}).on("scroll",function(){t.relocateCursorPosition()}).on("focus",function(){t.cursor.addClass("cursor-focus")}).on("blur",function(){t.cursor.removeClass("cursor-focus")}).on("cut",function(){var s=t.textarea.el;s.selectionStart!==s.selectionEnd&&t.relocateCursorPosition()});var c=i.clientWidth;globalThis.addEventListener("resize",function(){i.clientWidth!==c&&(c=i.clientWidth,t.relocateCursorPosition())})}},{key:"_countContentHeight",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._countContentSize(t,r).height}},{key:"_countContentSize",value:function(t){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=t.split(`
`),a=0,h=o.map(function(l){var c=r.countSingleLineInfo(l);return a+=c.length*N,c});return{lines:h,height:a+(i?2*this.paddingTop:0)}}},{key:"countSingleLineInfo",value:function(t){var r=this,i=this._getLineBoxWidth();if(i<=0)return[{content:t,width:this.measureTextWidth(t)}];var o=Math.floor(i/this.MultiCharWidth);if(t.length<=o)return[{content:t,width:this.measureTextWidth(t)}];for(var a=[],h=t.length,l=0,c=l+o,s=function(){var y=t.substring(l,c);return{content:y,width:r.measureTextWidth(y)}};h>o;){var d=s(),u=d.content,f=d.width,p=void 0,v=void 0;do{if(p=u,v=f,c>=t.length){c++;break}u+=t[c],f=this.measureTextWidth(u),c++}while(f<=i);a.push({content:p,width:v}),l=c-1,c=l+o,h-=p.length}return l<t.length&&a.push(s()),a}},{key:"_onSelectionChange",value:function(){var t=this.textarea.el;if(t.selectionStart===t.selectionEnd)this.relocateCursorPosition();else{if(t.clientWidth===0)return;var r=this.header.length;t.selectionStart<r&&(t.selectionStart=r);var i=t.value.length;t.selectionEnd>i&&(t.selectionEnd=i)}}},{key:"compatSelChange",value:function(){var t=this,r=function(){var i=t.textarea.el;document.activeElement===i&&t._onSelectionChange()};return document.addEventListener("selectionchange",r),function(){return document.removeEventListener("selectionchange",r)}}},{key:"measureTextWidth",value:function(t){return t?this.ctx.measureText(t).width:0}},{key:"_getLineBoxWidth",value:function(){return this.textarea.el.clientWidth-2*this.paddingLeft}},{key:"getCursorPosition",value:function(){var t=this.textarea.el,r=t.selectionStart,i=t.value.substring(0,r),o=this._getLineBoxWidth(),a=t.value[r]||"",h=0,l=0;if(this.wrapLine){var c,s=this._countContentSize(i);l=s.height-N,h=((c=s.lines.pop())===null||c===void 0||(c=c.pop())===null||c===void 0?void 0:c.width)||0}else h=this.measureTextWidth(i),l=(i.split(`
`).length-1)*N;var d=Vn(a)?this.MultiCharWidth:this.SingleCharWidth;return h+d>o&&(h=0,l+=N),(this._prevPos.x!==h||this._prevPos.y!==l)&&(Object.assign(this._prevPos,{x:h,y:l}),this.emit("cursor-change",{x:h,y:l,word:a,wordWidth:d,beforeValue:this.beforeValue,value:this.value})),{x:h,y:l,word:a,wordWidth:d}}},{key:"showCursor",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._isShowCursor!==t&&(this.cursor.style("visibility",t?"visible":"hidden"),this._isShowCursor=t)}},{key:"relocateCursorPosition",value:function(){clearTimeout(this._pasteTimer);var t=this.textarea.el;this.showCursor();var r=this.getCursorPosition(),i=r.x,o=r.y,a=r.word,h=r.wordWidth,l=i;if(o===0&&i<this.headerWidth){var c=this.header.length;t.setSelectionRange(c,c),l=this.headerWidth}this.cursor.style({left:"".concat(l+this.paddingLeft,"px"),top:"".concat(o+this.paddingTop-t.scrollTop,"px"),width:"".concat(h,"px")}),this.cursorText.text(a)}},{key:"focus",value:function(){this.textarea.el.focus()}},{key:"pushText",value:function(t){var r=this.textarea.el;r.selectionStart=r.selectionEnd=r.value.length,this.insertText(t)}},{key:"insertText",value:function(t){t&&document.execCommand("insertText",!1,t)}},{key:"replaceText",value:function(t){this.clearContent(!1),this.pushText(t),this.relocateCursorPosition()}},{key:"clearContent",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,r=this.textarea.el,i=r.value,o=!i.startsWith(this.header),a=this.header.length;r.selectionStart=o?0:a,r.selectionEnd=i.length+1,a!==i.length&&(document.execCommand("delete",!1),o&&this.insertText(this.header),t&&this.relocateCursorPosition())}},{key:"setCursorToHead",value:function(){var t=this.textarea.el;t.selectionStart=t.selectionEnd=this.header.length}}])}(St.Eveit),Rn=function(n){function e(t,r){var i,o=r.padding;return B(this,e),i=$t(this,e),i.editor=new ye({mode:"full",paddingLeft:0,paddingTop:0}),i.container=k.div.style(T(T({},O.FullParent),{},{padding:o,position:"relative",zIndex:100,backgroundColor:"#000",flexDirection:"column"})).append(i.title=k.div.text("").style({color:"#aaa"}),i.editor.container.style({flex:"1",height:"auto"})).show(function(){return t.showEditor},"flex"),i.container.on("click",function(a){a.stopPropagation()}),i.container.on("keydown",function(a){if(a.code==="KeyS"&&xt(a)){var h=i.editor.value;i.editor.clearContent(),i.emit("edit-done",h),a.preventDefault()}a.code==="Escape"&&(i.editor.clearContent(),i.emit("edit-cancel"))}),i}return Pt(e,n),z(e,[{key:"vi",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this.editor.textarea.el.focus(),this.editor.replaceText(t),this.title.style({paddingBottom:r?"5px":0})[i?"html":"text"](r)}}])}(St.Eveit),Kn=2;jt({".term-below-box > div":{padding:"".concat(Kn,"px 0"),color:"#ccc",wordBreak:"break-all",whiteSpace:"pre-wrap",a:{color:"#ccc"}}});var Un=function(){function n(){B(this,n),this.container=k.div.class("term-below-box").on("click",function(e){e.stopPropagation()})}return z(n,[{key:"write",value:function(e,t){var r=this.container.children();r.length>0&&r[r.length-1].remove(),this.push(e,t)}},{key:"push",value:function(e,t){this.container.append(ve(e,t,`
`))}},{key:"clear",value:function(){this.container.empty()}}])}();function qn(){var n="_web_term_ui_history;";return{read:function(){return localStorage.getItem(n)||"[]"},write:function(e){return localStorage.setItem(n,e),!0}}}var Zn=function(n){function e(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.title,o=i===void 0?"":i,a=r.titleHtml,h=a===void 0?!0:a,l=r.historyMax,c=l===void 0?100:l,s=r.storageProvider,d=s===void 0?qn():s,u=r.container,f=r.header,p=r.padding,v=p===void 0?5:p;if(B(this,e),t=$t(this,e),t._padding=0,t.store=re({showEditor:!1}),zn(),t._padding=v,t.title=o,t.history=new Bn(c,d),t.editor=new Rn(t.store,{padding:v}),t.input=new ye({paddingTop:pe,paddingLeft:0,header:f,size:"auto",mode:"inline"}),t.display=new Nn,t.below=new Un,o&&t.display.pushContent(o,h),!u)t.container=k.div.class(bt).style({position:"fixed",top:0,left:0,width:"100%",height:"100%"}),En(t.container,"body");else{if(typeof u=="string"){var y=document.querySelector(u);if(!y)throw new Error("Container not exists");t.container=new j(y)}else t.container=new j(u);t.container.addClass(bt)}return t.initEvents(),t.render(),t}return Pt(e,n),z(e,[{key:"value",get:function(){return this.input.value}},{key:"beforeValue",get:function(){return this.input.beforeValue}},{key:"header",get:function(){return this.input.header}},{key:"initEvents",value:function(){var t=this;this.input.on("key",function(i){switch(i){case"Enter":{var o=t.input.value;o&&t.history.push(o),t.emit("enter",o)}break;case"ArrowDown":{var a=t.history.down();typeof a=="string"&&t.input.replaceText(a)}break;case"ArrowUp":{var h=t.history.up(t.input.value);typeof h=="string"?t.input.replaceText(h):t.input.setCursorToHead()}break;case"Tab":t.emit("tab",t.input.beforeValue);break}}),this.input.on("input",function(){t.history.checkLatest(t.input.value),t.emit("input",t.value,t.input.beforeValue)}),this.container.on("click",function(){t.input.focus()});var r=function(){t.store.showEditor=!1,t.input.focus()};this.editor.on("edit-done",function(i){r(),t.emit("edit-done",i)}),this.editor.on("edit-cancel",function(){r(),t.emit("edit-cancel")}),this.editor.editor.on("cursor-change",function(i){t.emit("edit-cursor-change",i)}),this.input.on("cursor-change",function(i){t.emit("cursor-change",i)})}},{key:"render",value:function(){var t=this;this.container.style({cursor:"text",backgroundColor:"#000",color:"#fff",fontSize:"16px",lineHeight:"20px",fontFamily:'Menlo, Monaco, "Courier New", monospace',overflow:function(){return t.store.showEditor?"hidden":"auto"}}).append(this.mainContainer=k.div.style("padding",this._padding).append(this.display.container,this.input.container,this.below.container).show(function(){return!t.store.showEditor}),this.editor.container)}},{key:"clearInputHistory",value:function(){this.history.clear()}},{key:"write",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.display.pushContent(this.input.fullValue,r),t&&this.display.pushContent(t,r),this.input.clearContent(),this.scrollToBottom()}},{key:"insertEdit",value:function(t){this.editor.editor.insertText(t)}},{key:"replaceEdit",value:function(t){this.editor.editor.replaceText(t)}},{key:"pushEdit",value:function(t){this.editor.editor.pushText(t)}},{key:"vi",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this.store.showEditor=!0,this.editor.vi(t,r,i)}},{key:"clearTerminal",value:function(){this.display.container.empty(),this.input.clearContent()}},{key:"newLine",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.display.pushContent(this.input.fullValue,t),this.input.clearContent()}},{key:"setHeader",value:function(t){this.input.header=t}},{key:"scrollToBottom",value:function(){this.container.el.scrollTop=this.container.el.scrollHeight}},{key:"focus",value:function(){this.input.focus()}},{key:"writeBelow",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.below.write(t,r),this.scrollToBottom()}},{key:"pushBelow",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.below.push(t,r),this.scrollToBottom()}},{key:"clearBelow",value:function(){this.below.clear()}}])}(St.Eveit);const w=new Zn({title:`This is a Demo. Type "help" to get Help.
`,container:"#container",header:"/ xx$ ",padding:10});w.on("enter",n=>{if(!n)w.write("");else if(n==="vi"||n.startsWith("vi "))w.vi(`test
11`,`${n.substring(3)} "Ctrl/Cmd + s" to Save, "Esc" to Exit`);else if(n==="clear")w.clearTerminal();else if(n==="help")w.write(["vi      : Open vi Editor","clear   : Clear Terminal","progress: Mock Progress Bar",'header  : "header <name>" to Set Header'].join(`
`),!1);else if(n==="progress"){let e=0;const t=Date.now(),r=setInterval(()=>{e+=Math.round(Math.random()*10),e>100&&(e=100,clearInterval(r)),w.writeBelow(`Progressing...[${e}%]`),e===100&&(w.clearBelow(),w.write(`Progress Done in ${Date.now()-t}ms!`))},100)}else n.startsWith("header")?(w.setHeader(`/ ${n.replace("header","").trim()}$ `),w.write(`SetHeader "${n}"`)):w.write(`Exec "${n}"`)});w.on("edit-done",n=>{w.write(`Edit Save: ${n}`)});w.on("tab",()=>{w.insertEdit("[test]")});document.getElementById("code").appendChild(Qe({code:`import {WebTerm} from 'web-term-ui';
const term = new WebTerm({
    title: 'This is a Demo. Type "help" to get Help.\\n',
    container: '#container',
    header: '/ xx$ ',
    padding: 10,
});
term.on('enter', v => {
    if (!v) term.write('');
    else if (v === 'vi' || v.startsWith('vi ')) {
        term.vi('test\\n11', \`\${v.substring(3)} "Ctrl/Cmd + s" to Save, "Esc" to Exit\`);
    } else if (v === 'clear') {
        term.clearTerminal();
    } else if (v === 'help') {
        term.write([
            'vi      : Open vi Editor',
            'clear   : Clear Terminal',
            'progress: Mock Progress Bar',
            'header  : "header <name>" to Set Header'
        ].join('\\n'), false);
    } else if (v === 'progress') {
        let progress = 0;
        const time = Date.now();
        const interval = setInterval(() => {
            progress += Math.round(Math.random() * 10);
            if (progress > 100) {
                progress = 100;
                clearInterval(interval);
            }
            term.writeBelow(\`Progressing...[\${progress}%]\`);
            if (progress === 100) {
                term.clearBelow();
                term.write(\`Progress Done in \${Date.now() - time}ms!\`);
            }
        }, 100);
    } else if (v.startsWith('header')) {
        term.setHeader(\`/ \${v.replace('header', '').trim()}$ \`);
        term.write(\`SetHeader "\${v}"\`);
    } else {
        term.write(\`Exec "\${v}"\`);
    }
});
term.on('edit-done', v => {
    term.write(\`Edit Save: \${v}\`);
});
term.on('tab', () => {
    term.insertEdit('[test]');
});`}));window.term=w;
