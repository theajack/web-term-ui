(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function ot(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function de(n){if(Array.isArray(n))return ot(n)}function q(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function $t(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,ge(r.key),r)}}function Z(n,e,t){return e&&$t(n.prototype,e),t&&$t(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function ve(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function pe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ye(n){return de(n)||ve(n)||be(n)||pe()}function me(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ge(n){var e=me(n,"string");return typeof e=="symbol"?e:e+""}function M(n){"@babel/helpers - typeof";return M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(n)}function be(n,e){if(n){if(typeof n=="string")return ot(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ot(n,e):void 0}}function yt(n){return!!(n!=null&&n.__isRef)}var at=null;function we(n){return at=n,function(){at=null}}function xe(){return at}var ke=function(){function n(e,t){var r=this;q(this,n),this.__isComputed=!0,this._dirty=!1,this._listeners=[],this._clearSub=[],this._compute=e,this._set=t;var i=we(function(o,a){var h=function(){if(r._dirty=!0,r._listeners.length>0){var c=r._value,l=r.value;r._listeners.forEach(function(d){d(l,c)})}},u=typeof a=="string"?o.$sub(a,h):o.sub(h);r._clearSub.push(u)});this._refreshValue(),i()}return Z(n,[{key:"value",get:function(){var e;return this._dirty&&this._refreshValue(),Se(this),(e=xe())===null||e===void 0||e(this),this._value},set:function(e){if(!this._set){console.warn("Computed not have set property");return}this._set(e)}},{key:"_refreshValue",value:function(){this._value=this._compute(),this._dirty=!1}},{key:"sub",value:function(e){var t=this;return this._listeners.push(e),function(){return t.unsub(e)}}},{key:"unsub",value:function(e){var t=this._listeners.indexOf(e);return t!==-1?(this._listeners.splice(t,1),!0):!1}},{key:"destroy",value:function(){this._listeners=[],this._clearSub.forEach(function(e){return e()}),this._clearSub=[]}}])}();function _e(n,e){return J(n)?n:new ke(n,e)}function J(n){return!!(n!=null&&n.__isComputed)}function Zt(n){return typeof n=="function"||J(n)}var W={};function Se(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",t;J(n)||yt(n)?(e="value",t=function(r){return n.sub(r)}):t=function(r){return n.$sub(e,r)},Object.assign(W,{set:function(r){n[e]=r},get:function(){return n[e]},sub:t})}function Ce(n,e){if(!W)throw new Error("Bind 传入参数错误");(J(e)||yt(e))&&(e=e.value);var t=W.get,r=W.set,i=W.sub;if(t()!==e)throw new Error("Bind 传入参数错误");var o=n.el,a="string";if(o.tagName==="INPUT"){var h=n.attr("type");h==="number"||h==="range"?a="number":(h==="radio"||h==="checkbox")&&(a="boolean")}var u=function(){if(a==="boolean")return o.checked;var s=n.value();return a==="number"?parseFloat(s):s},c=function(s){if(a==="boolean"){o.checked=s;return}n.value(s)},l=!1,d=function(){l=!0,r(u()),l=!1};c(t()),n.on("input",function(){d()}),n.on("change",function(){d()}),i(function(s){l||c(s)})}function j(n,e){if(yt(n))n.sub(function(){e(n.value)}),e(n.value);else if(Zt(n)){var t=_e(n);t.sub(function(){e(t.value)}),e(t.value)}else e(n)}var Jt=function(){function n(e){q(this,n),this.__ld_type=G.Text,this.el=document.createTextNode(""),typeof e<"u"&&this.text(e)}return Z(n,[{key:"text",value:function(e){var t=this;return j(e,function(r){return t.el.textContent=r}),this}},{key:"mounted",value:function(e){return this.__mounted=e,this}}])}(),$e=function(){function n(){q(this,n),this.__ld_type=G.Frag,this.children=[],this.el=document.createDocumentFragment()}return Z(n,[{key:"append",value:function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return mt(r,function(o,a){e.children.push(a),e.el.appendChild(o)}),this}},{key:"mounted",value:function(e){return this.__mounted=function(t){t.children.forEach(function(r){var i;(i=r.__mounted)===null||i===void 0||i.call(r,r)}),e(t)},this}}])}(),G=function(n){return n[n.Dom=0]="Dom",n[n.Text=1]="Text",n[n.Frag=2]="Frag",n}(G||{});function mt(n,e){n.forEach(function(t){var r;if(Array.isArray(t)){mt(t,e);return}var i=t;Zt(i)?(i=new Jt(i),i=i.el):typeof i.__ld_type=="number"?i=i.el:t instanceof HTMLElement||(i=document.createTextNode("".concat(t))),e(i,t),(r=t.__mounted)===null||r===void 0||r.call(t,t)})}var Ee=/(width$)|(height$)|(top$)|(bottom$)|(left$)|(right$)|(^margin)|(^padding)|(font-?size)/i,Et=/!important$/,Te=/^[0-9]+$/;function Pe(n,e){n=je(n);var t="";return Et.test(e)&&(t="important",e=e.replace(Et,"")),Te.test(e)&&Ee.test(n)&&(e="".concat(e,"px")),{cssKey:n,cssValue:e,important:t}}function je(n){for(var e=n.length,t="",r=0;r<e;r++){var i=n[r],o=i.charCodeAt(0);o>=65&&o<=90?t+="-".concat(i.toLowerCase()):t+=i}return t}var Ae=["a","div","h1","h2","h3","h4","h5","h6","button","canvas","code","pre","table","th","td","tr","video","audio","ol","select","option","p","i","iframe","img","input","label","ul","li","span","textarea","form","br","tbody","object","progress","section","slot","small","strong","sub","summary","sup","template","title","var","style","meta","head","link","svg","script"];function Oe(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return gt(n,e,document)}function gt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;if(e){var r=t.querySelector(n);if(r)return new K(r);throw new Error("Element is not exist"+n)}for(var i=t.querySelectorAll(n),o=[],a=0;a<i.length;a++)o.push(new K(i[a]));return o}var E=function(){var n=function(t){return new K(t)},e={frag:{get:function(){return new $e}},text:{get:function(){var t=function(r){return new Jt(r)};return t.text=t,t}}};return Ae.forEach(function(t){e[t]={get:function(){return n(t)}}}),Object.defineProperties(n,e),n}();function ze(n,e){var t,r=e;typeof e=="string"?r=gt(e,!0):e instanceof HTMLElement&&(r=new K(e)),Array.isArray(n)?(t=r).append.apply(t,ye(n)):r.append(n)}var K=function(){function n(e){q(this,n),this.__ld_type=G.Dom,this.__xr_funcs={},this.el=typeof e=="string"?document.createElement(e):e}return Z(n,[{key:"_ur",value:function(e,t){var r=this;return typeof t>"u"?this.el[e]:(j(t,function(i){return r.el[e]=i}),this)}},{key:"class",value:function(e){return this._ur("className",e)}},{key:"id",value:function(e){return this._ur("id",e)}},{key:"addClass",value:function(e){return this.el.classList.add(e),this}},{key:"removeClass",value:function(e){return this.el.classList.remove(e),this}},{key:"hasClass",value:function(e){var t;return(t=this.el)===null||t===void 0?void 0:t.classList.contains(e)}},{key:"toggleClass",value:function(e,t){var r;return!!((r=this.el)!==null&&r!==void 0&&r.classList.toggle(e,t))}},{key:"remove",value:function(){var e;return(e=this.el)===null||e===void 0||e.remove(),this}},{key:"text",value:function(e){return typeof e>"u"?this.el.innerText:this._ur("innerText",e)}},{key:"mounted",value:function(e){return this.__mounted=e,this}},{key:"attr",value:function(e,t){var r=this;if(M(e)==="object"){for(var i in e)this.attr(i,e[i]);return this}return typeof t>"u"?this.el.getAttribute(e)||"":(j(t,function(o){return r.el.setAttribute(e,o)}),this)}},{key:"removeAttr",value:function(e){return this.el.removeAttribute(e),this}},{key:"func",value:function(e,t){return typeof t>"u"?this.__xr_funcs[e]:(this.__xr_funcs[e]=t,this)}},{key:"data",value:function(e,t){var r=this;if(M(e)==="object"){for(var i in e)this.data(i,e[i]);return this}if(typeof t>"u"){var o;return((o=this.el.__xr_data)===null||o===void 0?void 0:o[e])||null}return this.el.__xr_data||(this.el.__xr_data={}),j(t,function(a){return r.el.__xr_data[e]=a}),this}},{key:"style",value:function(e,t){var r=this.el.style;if(typeof t<"u")return j(t,function(o){var a=Pe(e,o),h=a.important,u=a.cssValue,c=a.cssKey;r.setProperty(c,u,h)}),this;if(typeof e=="string")return r[e];for(var i in e)this.style(i,e[i]);return this}},{key:"value",value:function(e){return this._ur("value",e)}},{key:"html",value:function(e){return this._ur("innerHTML",e)}},{key:"outerHtml",value:function(e){var t=this;return typeof e>"u"?this.el.outerHTML:(j(e,function(r){t.html(r),t.el=t.el.children[0]}),this)}},{key:"child",value:function(e){var t=this.el.children[e];return t?new n(t):null}},{key:"children",value:function(){for(var e=this.el.children.length,t=[],r=0;r<e;r++)t.push(this.child(r));return t}},{key:"click",value:function(e){return this.on("click",e)}},{key:"on",value:function(e,t){if(M(e)==="object"){for(var r in e)this.on(r,e[r]);return this}var i=this.el;if(typeof t=="function")this.el.addEventListener(e,t);else{var o,a=function(h){var u;t.self&&h.target!==i||(t.stop&&h.stopPropagation(),t.prevent&&h.preventDefault(),t.once&&i.removeEventListener(e,a,t.capture),(u=t.listener)===null||u===void 0||u.call(t,h))};i.addEventListener(e,a,(o=t.capture)!==null&&o!==void 0?o:!1)}return this}},{key:"append",value:function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return mt(r,function(o){e.el.appendChild(o)}),this}},{key:"ref",value:function(e){return e(this),this}},{key:"hide",value:function(){return this.display("none")}},{key:"display",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"block";return this.style("display",e)}},{key:"show",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";return j(e,function(i){t.display(i?r:"none")}),this}},{key:"query",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return gt(e,t,this.el)}},{key:"src",value:function(e){return this._ur("src",e)}},{key:"parent",value:function(){return this.el.parentElement}},{key:"empty",value:function(){return this.html("")}},{key:"name",value:function(e){return this.attr("__xr_name",e)}},{key:"find",value:function(e){return this.query('[__xr_name="'.concat(e,'"]'),!0)}},{key:"type",value:function(e){return this.attr("type",e)}},{key:"bind",value:function(e){return Ce(this,e),this}}])}();function Tt(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Pt(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=We(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,h=!1;return{s:function(){t=t.call(n)},n:function(){var u=t.next();return a=u.done,u},e:function(u){h=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(h)throw o}}}}function Le(n,e,t){return(e=Ie(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function S(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jt(Object(t),!0).forEach(function(r){Le(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):jt(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function He(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ie(n){var e=He(n,"string");return typeof e=="symbol"?e:e+""}function st(n){"@babel/helpers - typeof";return st=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(n)}function We(n,e){if(n){if(typeof n=="string")return Tt(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Tt(n,e):void 0}}var k={FontFamily:'Menlo, Monaco, "Courier New", monospace',FontSize:14,LineHeight:18,CodePadding:10,PLeft:8};function De(n){var e=document.createElement("canvas"),t=e.getContext("2d");return t.font=n,function(r){return r?t.measureText(r).width:0}}function Me(n,e){var t=[],r="#0b8c0b",i=.4,o=De("14px Menlo, Monaco, Courier New, monospace"),a=Pt(e),h;try{for(a.s();!(h=a.n()).done;){var u=h.value,c={color:u.color||r,opacity:u.opacity||i};if(Fe(u)){var l=n.matchAll(u.match),d=Pt(l),s;try{for(d.s();!(s=d.n()).done;){var f=s.value,v=n.substring(0,f.index),y=v.split(`
`),p=y.pop();t.push(S({left:o(p)+k.PLeft,top:y.length*k.LineHeight,width:o(f[0]),index:y.length},c))}}catch($){d.e($)}finally{d.f()}}else{var m=u.row,g=u.column,b=u.range,_=b===void 0?1:b,C=n.split(`
`);debugger;t.push(S({left:o(C[m].substring(0,g))+k.PLeft,top:m*k.LineHeight,index:m,width:o(C[m].substring(g,g+_))},c))}}}catch($){a.e($)}finally{a.f()}return t}function Fe(n){return typeof n.match<"u"}function Be(n){return n.map(function(e){return E.div.class("highlight-bar").style({position:"absolute",backgroundColor:Gt(e),left:"0",top:"".concat(k.CodePadding+e.top,"px"),height:"".concat(k.LineHeight,"px"),width:"100%"}).append(E.span.style({position:"absolute",backgroundColor:e.color,left:"".concat(e.left,"px"),width:"".concat(e.width,"px"),height:"100%"}))})}function Gt(n){var e=n.color,t=n.opacity;if(e[0]==="#"){var r=function(o){var a=Math.round(o*1.6*10).toString(16);return a.length===2?"F":a},i=r(t);return e.length===4?"".concat(e).concat(i):"".concat(e).concat(i).concat(i)}else if(e.startsWith("rgba"))return e.replace(/,([0-9]*)\)/,",".concat(t,")"));return e.replace(/,([0-9]*)\)/,function(o,a){return",".concat(a,",").concat(t,")")})}var nt="#9cdcfe";ze(E.style.text(`
.xhl-punc {
    color: #ddd;
}
.xhl-bkt {
    color: #ffe11c;
}
.xhl-k1 {
    color: #569cd6;
}
.xhl-k2 {
    color: #c586c0;
}
.xhl-k3 {
    color: #3ac9b0;
}
.xhl-num {
    color: #b5cea8;
}
.xhl-f {
    color: #dcdcaa;
}
.xhl-reg,
.xhl-reg * {
    color: #d16969;
}
.xhl-str,
.xhl-str *,
.xhl-str .xhl-cm {
    color: #ce9178;
}
.xhl-cm,
.xhl-cm * {
    color: #6a8a35;
}
.xhl-jsx {
    color: #569cd6;
}
.xhl-tmp,.xhl-tmp .xhl-punc,.xhl-tmp .xhl-bkt{
    color: rgb(86,156,214);
}
.xhl-def{color: `.concat(nt,`;}
.xhl-def .xhl-punc {
    color: #ddd;
}
.xhl-pre {
    background-color: #111;
    padding: 10px;
    color: `).concat(nt,`;
    font-size: 14px;
    margin: 0;
    overflow-x: auto;
    font-family: Menlo, Monaco, "Courier New", monospace;
    line-height: 18px;
}
.xhl-container {
    overflow: auto;
}
.xhl-container .xhl-pre{
    background-color: transparent;
    padding: 0;
    font-family: inherit;
    line-height: inherit;
    font-size: inherit;
    color: inherit;
    overflow: unset;
    color: `).concat(nt,`;
}
.lhl-container{
    overflow: auto;
}
.xhl-pre::-webkit-scrollbar,
.lhl-container::-webkit-scrollbar,
.xhl-container::-webkit-scrollbar {
    width: 5px;
    cursor: pointer;
    height: 5px;
}
.xhl-pre::-webkit-scrollbar-button, 
.lhl-container::-webkit-scrollbar-button,
.xhl-container::-webkit-scrollbar-button {
    display: none;
}
.xhl-pre::-webkit-scrollbar-track,
.lhl-container::-webkit-scrollbar-track,
.xhl-container::-webkit-scrollbar-track {
    background-color: transparent;
}
.xhl-pre::-webkit-scrollbar-thumb,
.lhl-container::-webkit-scrollbar-thumb,
.xhl-container::-webkit-scrollbar-thumb {
    background-color: #666;
    cursor: pointer;
    background-clip: initial;
}
.xhl-pre::-webkit-scrollbar-thumb:hover,
.lhl-container::-webkit-scrollbar-thumb:hover,
.xhl-container::-webkit-scrollbar-thumb:hover {
    background-color: #888;
    cursor: pointer;
}
`)),document.head);function Ne(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;n=n.replace(/\&lt;/g,"__LT__").replace(/\&gt;/g,"__GT__");var t=Ke(n.replace(/</g,"&lt;").replace(/>/g,"&gt;"));return e?"<pre class='xhl-pre'>".concat(t,"</pre>"):t}var At=["var","new","const","let","typeof","in","function","this","true","false","null","undefined","async","delete","class","extends"],Ot=["return","for","while","else if","if","else","switch","case","default","break","continue","await","yield","try","catch","finally","throw","export","import","from"],zt=["console","window","document","Date","Array","Object","Boolean","Number","String","alert","RegExp","Function","JSON","Date"],O=["\\/","\\","\\(","\\)","\\[","\\]","\\{","\\}","\\+","\\-","\\*","\\=",",","\\.",":","%","_","\\$","@","#","\\^","\\|","!","~"],Lt=["\\(","\\)","\\[","\\]","\\{","\\}"],R="(^|(&lt;)|(&lt;)|[\\n\\t;<> "+O.join("")+"])",ut="(["+O.join("")+"\\n;<> ]|(&lt;)|(&lt;)|$)";function T(n,e){return'<span class="xhl-'+e+'">'+n+"</span>"}function Ht(n,e,t,r){return n.replace(e,function(i){return typeof r=="string"?i.replace(r,T(r,t)):st(r)==="object"?i.replace(r,function(o){return T(o,t)}):T(typeof r=="function"?r.apply(void 0,arguments):i,t)})}function Ve(n,e,t,r){if(n.indexOf("</span>")!==-1){var i=typeof e=="string"?Re(e):e[0];n=n.replace(i,function(a){var h=typeof e=="string"?new RegExp(e,"g"):e[1];return Ht(a,h,t,r)})}else{var o=typeof e=="string"?new RegExp(e,"g"):e[1];n=Ht(n,o,t,r)}return n}function Re(n){return new RegExp(n+"(?![^<]*>|[^<>]*</)","g")}function Ke(n){return n=Ue(n,[["\\$\\{(.*)\\}","tmp",function(e,t){return e.replace(t,T(t,"def"))}],[[/("(?:[^"\\]|\\.)*")|(\'(?:[^\'\\]|\\.)*\')|(`((?:[^`\\]|\\.)|\n)*`)(?![^<]*>|[^<>]*<\/)/g,/("(?:[^"\\]|\\.)*")|(\'(?:[^\'\\]|\\.)*\')|(`((?:[^`\\]|\\.)|\n)*`)/g],"str"],[`(//.*(
|$))|(\\/\\*(.|
)*?\\*\\/)`,"cm"],["\\/[a-zA-Z0-9"+O.slice(1).join("")+" ]+\\/[gi]?","reg"],z(At,"k1"),z(At,"k1"),z(Ot,"k2"),z(Ot,"k2"),z(zt,"k3"),z(zt,"k3"),[R+"[a-zA-Z_\\$]+[a-zA-Z_\\$0-9]* ?\\(","f",new RegExp("[a-zA-Z_\\$]+[a-zA-Z_\\$0-9]*","g")],[R+"[0-9]+(\\.?[0-9]+)?"+ut,"num",/[0-9]+(.?[0-9]+)?/g],[R+"[0-9]+(\\.?[0-9]+)?"+ut,"num",/[0-9]+(.?[0-9]+)?/g],[`&lt;\\/?[a-zA-Z\\-]*(\\/| |
|&gt;)`,"jsx"],["["+Lt.join("")+"]","bkt",new RegExp("["+Lt.join("")+"]","g")],["["+O.join("")+"]","punc",new RegExp("["+O.join("")+"]","g")],["["+O.join("")+"]","punc",new RegExp("["+O.join("")+"]","g")]]),n=n.replace(/\&lt;/g,T("<","punc")).replace(/\&gt;/g,T(">","punc")).replace(/;/g,T(";","punc")).replace(/&/g,T("&","punc")),n=n.replace(/__LT__/g,"&amp;lt;").replace(/__GT__/g,"&amp;gt;"),n}function z(n,e){return[R+"(("+n.join(")|(")+"))"+ut,e,new RegExp("(("+n.join(")|(")+"))","g")]}function Ue(n,e){for(var t=0;t<e.length;t++)e[t].unshift(n),n=Ve.apply(null,e[t]);return n}function qe(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{code:""},e=n.code,t=e===void 0?"":e,r=n.borderRight,i=r===void 0?!1:r,o=n.startIndex,a=o===void 0?1:o,h=n.highlights,u=h===void 0?[]:h,c=n.style,l=c===void 0?{}:c,d=n.codeStyle,s=d===void 0?{}:d,f=n.lineHeight,v=f===void 0?k.LineHeight:f,y=n.lineCount,p={backgroundColor:"#111",color:"#fff",fontFamily:k.FontFamily,margin:"0",fontSize:"".concat(k.FontSize,"px"),paddingTop:"".concat(k.CodePadding,"px"),paddingBottom:"0",paddingLeft:"".concat(k.PLeft,"px"),lineHeight:"".concat(v,"px")},m=S({overflowX:"auto",borderRight:i?"1px solid #666":"none",flex:"1",position:"relative"},p),g=t.split(`
`),b=t;t.length<=1e4?b=Ne(b,!1):console.warn("当前代码过长，已关闭代码高亮");var _=S({display:"flex"},l);y&&(_.minHeight="".concat(y*v+k.CodePadding*2,"px"));var C=Me(t,u);return E.div.style(_).append(E.div.style(S(S({},p),{},{flexDirection:"column",display:"flex",borderRight:"1px solid #aaa",padding:"".concat(k.CodePadding,"px 0px"),color:"#ddd",textAlign:"right"})).append(g.map(function($,I){var N=C.find(function(et){return et.index===I});return E.span.style({padding:"0px 5px",backgroundColor:N?Gt(N):"transparent"}).text(a+I)})),E.pre.class("xhl-container").style(S(S({},m),s)).mounted(function($){setTimeout(function(){if(C.length){var I=C[0];if($.el.scrollLeft=I.left-($.el.offsetWidth-I.width)/2,ResizeObserver){var N=new ResizeObserver(function(et){var Ct=et[0].target;Oe(".highlight-bar").forEach(function(fe){return fe.style("maxWidth","".concat(Ct==null?void 0:Ct.scrollWidth,"px"))})});N.observe($.el)}}},100)}).append(Be(C),E.div.class("xhl-pre").style(S(S({},s),{},{position:"relative"})).html(b))).el}var Ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lt={exports:{}};(function(n,e){(function(t,r){r(e)})(Ze,function(t){function r(u){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(u)}function i(u,c){for(var l=0;l<c.length;l++){var d=c[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}function o(u){return function(c){if(Array.isArray(c))return a(c)}(u)||function(c){if(typeof Symbol<"u"&&c[Symbol.iterator]!=null||c["@@iterator"]!=null)return Array.from(c)}(u)||function(c,l){if(c){if(typeof c=="string")return a(c,l);var d=Object.prototype.toString.call(c).slice(8,-1);return(d=d==="Object"&&c.constructor?c.constructor.name:d)==="Map"||d==="Set"?Array.from(c):d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?a(c,l):void 0}}(u)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function a(u,c){(c==null||c>u.length)&&(c=u.length);for(var l=0,d=new Array(c);l<c;l++)d[l]=u[l];return d}var h=function(){function u(){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this.usePrevEmit=!0,this._map={},this._prevData={}}var c,l,d;return c=u,d=[{key:"_",get:function(){return this.__||(this.__=new u),this.__}},{key:"usePrevEmit",get:function(){return this._.usePrevEmit},set:function(s){this._.usePrevEmit=s}},{key:"emit",value:function(s){for(var f,v=arguments.length,y=new Array(1<v?v-1:0),p=1;p<v;p++)y[p-1]=arguments[p];(f=this._).emit.apply(f,[s].concat(y))}},{key:"off",value:function(s,f){this._.off(s,f)}},{key:"clear",value:function(s){this._.clear(s)}},{key:"on",value:function(s,f){this._.on(s,f)}},{key:"once",value:function(s,f){this._.once(s,f)}},{key:"onWait",value:function(s){this._.onWait(s)}},{key:"head",value:function(s,f){this._.head(s,f)}},{key:"headOnce",value:function(s,f){this._.headOnce(s,f)}}],(l=[{key:"hasEvent",value:function(s){return!!this._map[s]}},{key:"on",value:function(s,f){var v=this;if(r(s)==="object"){var y,p=[];for(y in s)p.push(this.on(y,s[y]));return function(){p.forEach(function(g){return g()})}}if(!f)throw new Error("fn is required");var m=this._formatTarget(f);return this._checkPrev(s,m)&&m.once?function(){}:(this._getList(s).push(m),function(){v.off(s,m)})}},{key:"_formatTarget",value:function(s,f){return typeof s=="function"?{listener:s,once:f!=null&&f,prev:this.usePrevEmit}:(typeof f=="boolean"&&(s.once=f),s)}},{key:"emit",value:function(s){for(var f=arguments.length,v=new Array(1<f?f-1:0),y=1;y<f;y++)v[y-1]=arguments[y];this._prevData[s]=v;var p=this._map[s];if(!p)return!1;for(var m=0;m<p.length;m++){var g=p[m];g.listener.apply(g,v),g.once&&(p.splice(m,1),m--)}return!0}},{key:"off",value:function(s,f){if(s=this._map[s],!s)return!1;var v=s.findIndex(function(y){return y===f||y.listener===f});return v!==-1&&(s.splice(v,1),!0)}},{key:"clear",value:function(s){return!!this._map[s]&&(delete this._map[s],delete this._prevData[s],!0)}},{key:"onWait",value:function(s,f){var v=this;return new Promise(function(y){var p=function(){for(var m=arguments.length,g=new Array(m),b=0;b<m;b++)g[b]=arguments[b];return y(g)};f&&(p=Object.assign({listener:p},f)),v.once(s,p)})}},{key:"destroy",value:function(){this._map={},this._prevData={}}},{key:"_checkPrev",value:function(s,f){return f.prev?(s=this._prevData[s],s!==void 0&&(f.listener.apply(f,o(s)),!0)):!1}},{key:"once",value:function(s,f){return this.on(s,this._formatTarget(f,!0))}},{key:"head",value:function(s,f){var v=this,y=this._formatTarget(f);return this._checkPrev(s,y)&&y.once?function(){}:(this._getList(s).unshift(y),function(){v.off(s,f)})}},{key:"headOnce",value:function(s,f){return this.head(s,this._formatTarget(f,!0))}},{key:"_getList",value:function(s){var f=this._map[s];return f||(this._map[s]=f=[]),f}}])&&i(c.prototype,l),d&&i(c,d),Object.defineProperty(c,"prototype",{writable:!1}),u}();h.version="0.0.3",t.Eveit=h,t.default=h,Object.defineProperty(t,"__esModule",{value:!0})})})(lt,lt.exports);var bt=lt.exports;function ct(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Je(n){if(Array.isArray(n))return ct(n)}function Ge(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function It(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,en(r.key),r)}}function Xe(n,e,t){return e&&It(n.prototype,e),t&&It(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Ye(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Qe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wt(n){return Je(n)||Ye(n)||nn(n)||Qe()}function tn(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function en(n){var e=tn(n,"string");return typeof e=="symbol"?e:e+""}function nn(n,e){if(n){if(typeof n=="string")return ct(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ct(n,e):void 0}}var V=Symbol("E"),wt=function(n){return n[n.Fork=0]="Fork",n[n.Append=1]="Append",n}(wt||{}),Xt=function(){function n(){var e=this,t,r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.max,a=o===void 0?0:o,h=i.useStorage,u=h===void 0?!1:h,c=i.storageKey,l=c===void 0?"_def_history_stack":c,d=i.mode,s=d===void 0?0:d,f=i.storageProvider,v=i.onStepChange,y=i.onHistorySizeChange,p=i.onHistoryOut;if(Ge(this,n),this.step=0,this.size=0,this.max=40,this.list=[],this.index=0,this.End=V,this.isActive=!1,this.max=a,this.mode=s,u!==!1&&(f||l)&&(u=!0),u&&(this.storageProvider=f||{read:function(){var g=localStorage.getItem(l);return g?JSON.parse(g):[]},write:function(g){localStorage.setItem(l,JSON.stringify(g))}}),v&&(this.osc=function(){return v(e.step)}),y&&(this.ohsc=function(){return y(e.size)}),this.oho=p,(t=this.osc)===null||t===void 0||t.call(this),(r=this.ohsc)===null||r===void 0||r.call(this),u){var m=this.storageProvider.read();m instanceof Promise?m.then(function(g){e.useCache(g)}):this.useCache(m)}}return Xe(n,[{key:"useCache",value:function(e){e.length!==0&&this.push.apply(this,Wt(e))}},{key:"setMax",value:function(e){this.max=e}},{key:"setStep",value:function(e){var t;this.step=e,(t=this.osc)===null||t===void 0||t.call(this)}},{key:"setHistoryIndex",value:function(e){var t;this.isActive||(this.isActive=!0),this.index=e,this.size=e,(t=this.ohsc)===null||t===void 0||t.call(this)}},{key:"back",value:function(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(!this.canBack(t))return t>1&&(this.setStep(this.step-this.index),this.setHistoryIndex(0)),this.End;this.setStep(this.step-t),this.setHistoryIndex(this.index-t);var r=this.list[this.index];return(e=this.oho)===null||e===void 0||e.call(this,r),r}},{key:"canBack",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.index-e>=0}},{key:"first",value:function(){return this.list.length===0?V:(this.setStep(this.step-this.index),this.setHistoryIndex(0),this.list[0])}},{key:"last",value:function(){return this.list.length===0?V:(this.setStep(this.step+this.list.length-this.index),this.setHistoryIndex(this.list.length-1),this.list[this.list.length-1])}},{key:"forward",value:function(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(!this.canForward(t))return t>1&&(this.setStep(this.step+this.list.length-this.index),this.setHistoryIndex(this.list.length-1)),this.End;this.setStep(this.step+t),this.setHistoryIndex(this.index+t);var r=this.list[this.index];return(e=this.oho)===null||e===void 0||e.call(this,r),r}},{key:"isEnd",value:function(e){return e===V}},{key:"canForward",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.index+e<this.list.length}},{key:"pop",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,t=this.list.length;if(t<=e){var r=Wt(this.list);return this.clear(),r}var i=t-e,o=this.list.splice(i),a=this.list.length;return a<this.index&&(this.setHistoryIndex(a),this.setStep(this.step-(this.index-a))),o}},{key:"push",value:function(){var e,t=this.list.length;this.index<t&&(this.step++,this.index++,this.mode===0&&this.list.splice(this.index));var r=arguments.length,i=0,o=r;this.max>0&&t+r>this.max&&(i=t+r-this.max,o=r-i),(e=this.list).push.apply(e,arguments),i&&this.list.splice(0,i),this._onListChange(),o&&(this.mode===1?this.setHistoryIndex(this.list.length):this.setHistoryIndex(this.index+o)),this.mode===1?this.setStep(this.list.length):this.setStep(this.step+o),this.isActive&&(this.isActive=!1)}},{key:"clear",value:function(){this.list=[],this._onListChange(),this.setHistoryIndex(0),this.setStep(0),this.isActive=!1}},{key:"replace",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.index;typeof this.list[t]>"u"||(this.list[t]=e,this._onListChange())}},{key:"isLatest",get:function(){return this.index===this.list.length-1}},{key:"_onListChange",value:function(){var e;(e=this.storageProvider)===null||e===void 0||e.write(this.list)}},{key:"current",value:function(){return this.list[this.index]}}])}();Xt.Mode=wt;function ht(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function rn(n){if(Array.isArray(n))return ht(n)}function X(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Dt(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,ln(r.key),r)}}function Y(n,e,t){return e&&Dt(n.prototype,e),t&&Dt(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function on(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function an(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sn(n){return rn(n)||on(n)||cn(n)||an()}function un(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ln(n){var e=un(n,"string");return typeof e=="symbol"?e:e+""}function F(n){"@babel/helpers - typeof";return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(n)}function cn(n,e){if(n){if(typeof n=="string")return ht(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ht(n,e):void 0}}function xt(n){return!!(n!=null&&n.__isRef)}var ft=null;function hn(n){return ft=n,function(){ft=null}}function Yt(){return ft}var fn=function(){function n(e,t){var r=this;X(this,n),this.__isComputed=!0,this._dirty=!1,this._listeners=[],this._clearSub=[],this._compute=e,this._set=t;var i=hn(function(o,a){var h=function(){if(r._dirty=!0,r._listeners.length>0){var c=r._value,l=r.value;r._listeners.forEach(function(d){d(l,c)})}},u=typeof a=="string"?o.$sub(a,h):o.sub(h);r._clearSub.push(u)});this._refreshValue(),i()}return Y(n,[{key:"value",get:function(){var e;return this._dirty&&this._refreshValue(),ee(this),(e=Yt())===null||e===void 0||e(this),this._value},set:function(e){if(!this._set){console.warn("Computed not have set property");return}this._set(e)}},{key:"_refreshValue",value:function(){this._value=this._compute(),this._dirty=!1}},{key:"sub",value:function(e){var t=this;return this._listeners.push(e),function(){return t.unsub(e)}}},{key:"unsub",value:function(e){var t=this._listeners.indexOf(e);return t!==-1?(this._listeners.splice(t,1),!0):!1}},{key:"destroy",value:function(){this._listeners=[],this._clearSub.forEach(function(e){return e()}),this._clearSub=[]}}])}();function dn(n,e){return Q(n)?n:new fn(n,e)}function Q(n){return!!(n!=null&&n.__isComputed)}function Qt(n){return typeof n=="function"||Q(n)}function te(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={},r={},i={$sub:function(l,d){return t[l]||(t[l]=[]),t[l].push(d),function(){i.$unsub(l,d)}},$unsub:function(l,d){if(t[l]){if(typeof d>"u")return delete t[l],!0;var s=t[l].indexOf(d);return s===-1?!1:(t[l].splice(s,1),!0)}},$get:function(l){return r[l]}},o={},a=function(l){var d=n[l];r[l]=d,o[l]={get:function(){var s;ee(i,l),(s=Yt())===null||s===void 0||s(i,l);var f=r[l];return f},set:function(s){var f,v=r[l];r[l]=s,(f=t[l])===null||f===void 0||f.forEach(function(y){y(s,v)})}},i[l]=d};for(var h in n)a(h);Object.defineProperties(i,o);var u=function(l){i[l]=function(){for(var d=arguments.length,s=new Array(d),f=0;f<d;f++)s[f]=arguments[f];return e[l].apply(i,s)}};for(var c in e)u(c);return i}var D={};function ee(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",t;Q(n)||xt(n)?(e="value",t=function(r){return n.sub(r)}):t=function(r){return n.$sub(e,r)},Object.assign(D,{set:function(r){n[e]=r},get:function(){return n[e]},sub:t})}function vn(n,e){if(!D)throw new Error("Bind 传入参数错误");(Q(e)||xt(e))&&(e=e.value);var t=D.get,r=D.set,i=D.sub;if(t()!==e)throw new Error("Bind 传入参数错误");var o=n.el,a="string";if(o.tagName==="INPUT"){var h=n.attr("type");h==="number"||h==="range"?a="number":(h==="radio"||h==="checkbox")&&(a="boolean")}var u=function(){if(a==="boolean")return o.checked;var s=n.value();return a==="number"?parseFloat(s):s},c=function(s){if(a==="boolean"){o.checked=s;return}n.value(s)},l=!1,d=function(){l=!0,r(u()),l=!1};c(t()),n.on("input",function(){d()}),n.on("change",function(){d()}),i(function(s){l||c(s)})}function A(n,e){if(xt(n))n.sub(function(){e(n.value,!1)}),e(n.value,!0);else if(Qt(n)){var t=dn(n);t.sub(function(){e(t.value,!1)}),e(t.value,!0)}else return e(n,!0),!1;return!0}var ne=function(){function n(e){X(this,n),this.__ld_type=tt.Text,this.el=document.createTextNode(""),typeof e<"u"&&this.text(e)}return Y(n,[{key:"text",value:function(e){var t=this;return A(e,function(r){return t.el.textContent=r}),this}},{key:"mounted",value:function(e){return this.__mounted=e,this}}])}(),pn=function(){function n(){X(this,n),this.__ld_type=tt.Frag,this.children=[],this.el=document.createDocumentFragment()}return Y(n,[{key:"append",value:function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return kt(r,function(o,a){e.children.push(a),e.el.appendChild(o)}),this}},{key:"mounted",value:function(e){return this.__mounted=function(t){t.children.forEach(function(r){var i;(i=r.__mounted)===null||i===void 0||i.call(r,r)}),e(t)},this}}])}(),tt=function(n){return n[n.Dom=0]="Dom",n[n.Text=1]="Text",n[n.Frag=2]="Frag",n}(tt||{});function kt(n,e){n.forEach(function(t){var r;if(Array.isArray(t)){kt(t,e);return}var i=t;Qt(i)?(i=new ne(i),i=i.el):typeof i.__ld_type=="number"?i=i.el:t instanceof HTMLElement||(i=document.createTextNode("".concat(t))),e(i,t),(r=t.__mounted)===null||r===void 0||r.call(t,t)})}var yn=/(width$)|(height$)|(top$)|(bottom$)|(left$)|(right$)|(^margin)|(^padding)|(font-?size)/i,Mt=/!important$/,mn=/^[0-9]+$/;function gn(n,e){n=bn(n);var t="";return Mt.test(e)&&(t="important",e=e.replace(Mt,"")),mn.test(e)&&yn.test(n)&&(e="".concat(e,"px")),{cssKey:n,cssValue:e,important:t}}function bn(n){for(var e=n.length,t="",r=0;r<e;r++){var i=n[r],o=i.charCodeAt(0);o>=65&&o<=90?t+="-".concat(i.toLowerCase()):t+=i}return t}var wn=["a","div","h1","h2","h3","h4","h5","h6","button","canvas","code","pre","table","th","td","tr","video","audio","ol","select","option","p","i","iframe","img","input","label","ul","li","span","textarea","form","br","tbody","object","progress","section","slot","small","strong","sub","summary","sup","template","title","var","style","meta","head","link","svg","script"];function re(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;if(e){var r=t.querySelector(n);if(r)return new P(r);throw new Error("Element is not exist"+n)}for(var i=t.querySelectorAll(n),o=[],a=0;a<i.length;a++)o.push(new P(i[a]));return o}var x=function(){var n=function(t){return new P(t)},e={frag:{get:function(){return new pn}},text:{get:function(){var t=function(r){return new ne(r)};return t.text=t,t}}};return wn.forEach(function(t){e[t]={get:function(){return n(t)}}}),Object.defineProperties(n,e),n}();function xn(n,e){var t,r=e;typeof e=="string"?r=re(e,!0):e instanceof HTMLElement&&(r=new P(e)),Array.isArray(n)?(t=r).append.apply(t,sn(n)):r.append(n)}var P=function(){function n(e){X(this,n),this.__ld_type=tt.Dom,this.__xr_funcs={},this.el=typeof e=="string"?document.createElement(e):e}return Y(n,[{key:"_ur",value:function(e,t){var r=this;return typeof t>"u"?this.el[e]:(A(t,function(i){return r.el[e]=i}),this)}},{key:"class",value:function(e){return this._ur("className",e)}},{key:"id",value:function(e){return this._ur("id",e)}},{key:"addClass",value:function(e){return this.el.classList.add(e),this}},{key:"removeClass",value:function(e){return this.el.classList.remove(e),this}},{key:"hasClass",value:function(e){var t;return(t=this.el)===null||t===void 0?void 0:t.classList.contains(e)}},{key:"toggleClass",value:function(e,t){var r;return!!((r=this.el)!==null&&r!==void 0&&r.classList.toggle(e,t))}},{key:"remove",value:function(){var e;return(e=this.el)===null||e===void 0||e.remove(),this}},{key:"text",value:function(e){return typeof e>"u"?this.el.innerText:this._ur("innerText",e)}},{key:"mounted",value:function(e){return this.__mounted=e,this}},{key:"attr",value:function(e,t){var r=this;if(F(e)==="object"){for(var i in e)this.attr(i,e[i]);return this}return typeof t>"u"?this.el.getAttribute(e)||"":(A(t,function(o){return r.el.setAttribute(e,o)}),this)}},{key:"removeAttr",value:function(e){return this.el.removeAttribute(e),this}},{key:"func",value:function(e,t){return typeof t>"u"?this.__xr_funcs[e]:(this.__xr_funcs[e]=t,this)}},{key:"data",value:function(e,t){var r=this;if(F(e)==="object"){for(var i in e)this.data(i,e[i]);return this}if(typeof t>"u"){var o;return((o=this.el.__xr_data)===null||o===void 0?void 0:o[e])||null}return this.el.__xr_data||(this.el.__xr_data={}),A(t,function(a){return r.el.__xr_data[e]=a}),this}},{key:"style",value:function(e,t){var r=this.el.style;if(typeof t<"u")return A(t,function(o){var a=gn(e,o),h=a.important,u=a.cssValue,c=a.cssKey;r.setProperty(c,u,h)}),this;if(typeof e=="string")return r[e];for(var i in e)this.style(i,e[i]);return this}},{key:"value",value:function(e){return this._ur("value",e)}},{key:"html",value:function(e){return this._ur("innerHTML",e)}},{key:"outerHtml",value:function(e){var t=this;return typeof e>"u"?this.el.outerHTML:(A(e,function(r){t.html(r),t.el=t.el.children[0]}),this)}},{key:"child",value:function(e){var t=this.el.children[e];return t?new n(t):null}},{key:"children",value:function(){for(var e=this.el.children.length,t=[],r=0;r<e;r++)t.push(this.child(r));return t}},{key:"click",value:function(e){return this.on("click",e)}},{key:"on",value:function(e,t){if(F(e)==="object"){for(var r in e)this.on(r,e[r]);return this}var i=this.el;if(typeof t=="function")this.el.addEventListener(e,t);else{var o,a=function(h){var u;t.self&&h.target!==i||(t.stop&&h.stopPropagation(),t.prevent&&h.preventDefault(),t.once&&i.removeEventListener(e,a,t.capture),(u=t.listener)===null||u===void 0||u.call(t,h))};i.addEventListener(e,a,(o=t.capture)!==null&&o!==void 0?o:!1)}return this}},{key:"append",value:function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return kt(r,function(o){e.el.appendChild(o)}),this}},{key:"ref",value:function(e){return e(this),this}},{key:"hide",value:function(){return this.display("none")}},{key:"display",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"block";return this.style("display",e)}},{key:"show",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";return A(e,function(i){t.display(i?r:"none")}),this}},{key:"query",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return re(e,t,this.el)}},{key:"src",value:function(e){return this._ur("src",e)}},{key:"parent",value:function(){return this.el.parentElement}},{key:"empty",value:function(){return this.html("")}},{key:"name",value:function(e){return this.attr("__xr_name",e)}},{key:"find",value:function(e){return this.query('[__xr_name="'.concat(e,'"]'),!0)}},{key:"type",value:function(e){return this.attr("type",e)}},{key:"bind",value:function(e){return vn(this,e),this}}])}();function Ft(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Bt(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=kn(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,h=!1;return{s:function(){t=t.call(n)},n:function(){var u=t.next();return a=u.done,u},e:function(u){h=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(h)throw o}}}}function kn(n,e){if(n){if(typeof n=="string")return Ft(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ft(n,e):void 0}}var ie="  ";function _n(n){ie=n}function Sn(n){Cn(this,n,ie)}function Cn(n,e,t){var r=t.length;if(e.code==="Tab"){e.preventDefault();var i=Nt(n),o=i.startLineIndex,a=i.start,h=i.end,u=i.lineText.split(`
`);if(e.shiftKey){var c=!0,l=Bt(u),d;try{for(l.s();!(d=l.n()).done;){var s=d.value;s.startsWith(t)?(n.selectionStart=o,n.selectionEnd=o+r,document.execCommand("delete",!1),c&&s.startsWith(t+t)&&(a-=r),h-=r,o+=s.length-r+1):o+=s.length+1,c=!1}}catch(_){l.e(_)}finally{l.f()}console.log(a,h),n.selectionStart=a,n.selectionEnd=h;return}if(u.length===1){rt(t);return}a+=r;var f=Bt(u),v;try{for(f.s();!(v=f.n()).done;){var y=v.value;n.selectionStart=n.selectionEnd=o,rt(t),o+=r+y.length+1,h+=r}}catch(_){f.e(_)}finally{f.f()}n.selectionStart=a,n.selectionEnd=h}else if(e.code==="Enter"&&!e.ctrlKey){for(var p=Nt(n),m=p.lineText.split(`
`)[0],g=`
`,b=0;m.substring(b,b+r)===t;)g+=t,b+=r;b>0&&(rt(g),e.preventDefault())}}function rt(n){n&&document.execCommand("insertText",!1,n)}function Nt(n){var e=n.selectionStart,t=n.selectionEnd,r="",i=n.value;r=i.substring(e,t);var o=i.substring(0,e),a=o.lastIndexOf(`
`),h=a+1;return{start:e,end:t,text:r,lineText:i.substring(h,t),line:r.split(`
`).length,startLineIndex:h}}(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(".style-text{font-family:Menlo,Monaco,Courier New,monospace;font-size:var(--font-size);font-kerning:none;white-space:pre;line-height:var(--line-height);box-sizing:border-box}.full-parent{position:absolute;top:0;left:0;width:100%;height:100%}.editor-textarea::-webkit-scrollbar,.web-term-container::-webkit-scrollbar{width:5px;cursor:pointer;height:5px}.editor-textarea::-webkit-scrollbar-button,.web-term-container::-webkit-scrollbar-button{display:none}.editor-textarea::-webkit-scrollbar-track,.web-term-container::-webkit-scrollbar-track{display:none}.editor-textarea::-webkit-scrollbar-thumb,.web-term-container::-webkit-scrollbar-thumb{background-color:#777;cursor:pointer}.editor-textarea ::selection,.web-term-container ::selection{background-color:var(--selection-bg);color:var(--selection)}.web-term-container{position:relative;font-family:Menlo,Monaco,Courier New,monospace;font-size:var(--font-size);font-kerning:none;white-space:pre;line-height:var(--line-height);box-sizing:border-box;background-color:var(--background);color:var(--color);cursor:text}.web-term-container *{font-family:Menlo,Monaco,Courier New,monospace;font-size:var(--font-size);font-kerning:none;white-space:pre;line-height:var(--line-height);box-sizing:border-box}.editor-cursor{position:absolute;z-index:2;height:var(--line-height);background-color:var(--background);color:var(--color)}.editor-cursor.cursor-focus{background-color:var(--selection-bg);color:var(--selection)}.editor-cursor .editor-cursor-border{position:absolute;top:0;left:0;width:100%;height:100%;border:1px solid var(--selection-bg)}.editor-cursor .editor-cursor-text{position:absolute;top:0;left:0;width:100%;height:100%}.editor-textarea{color:var(--color)}.term-editor-title{color:var(--color);opacity:.7}.term-display-box>div,.term-below-box>div{padding:2px 0;word-break:break-all;white-space:pre-wrap;color:var(--color)}.term-display-box>div a,.term-below-box>div a{opacity:.7}.term-below-box>div{opacity:.7}")),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();function dt(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function $n(n){if(Array.isArray(n))return dt(n)}function En(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _t(n,e,t){return e=U(e),An(n,oe()?Reflect.construct(e,t||[],U(n).constructor):e.apply(n,t))}function L(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Vt(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,ae(r.key),r)}}function H(n,e,t){return e&&Vt(n.prototype,e),t&&Vt(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function it(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=se(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,h=!1;return{s:function(){t=t.call(n)},n:function(){var u=t.next();return a=u.done,u},e:function(u){h=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(h)throw o}}}}function Tn(n,e,t){return(e=ae(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function U(n){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},U(n)}function St(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&vt(n,e)}function oe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oe=function(){return!!n})()}function Pn(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function jn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function B(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Rt(Object(t),!0).forEach(function(r){Tn(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Rt(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function An(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return En(n)}function vt(n,e){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},vt(n,e)}function On(n){return $n(n)||Pn(n)||se(n)||jn()}function zn(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ae(n){var e=zn(n,"string");return typeof e=="symbol"?e:e+""}function se(n,e){if(n){if(typeof n=="string")return dt(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?dt(n,e):void 0}}var Ln=function(){function n(e,t){var r=this;L(this,n),this.pushedCurrent=!1,this.provider=t,this.history=new Xt({max:e,mode:wt.Append});var i=t.read();i instanceof Promise?i.then(function(o){r._initHistory(o)}):this._initHistory(i)}return H(n,[{key:"_initHistory",value:function(e){var t,r=JSON.parse(e);(t=this.history).push.apply(t,On(r))}},{key:"up",value:function(e){if(this.history.isActive||(this.push(e),this.history.back(),this.pushedCurrent=!0),this.history.canBack()){var t=this.history.back();return t}else return null}},{key:"down",value:function(){return this.history.canForward()?this.history.forward():null}},{key:"checkLatest",value:function(e){this.history.isLatest&&(this.history.replace(e),this.save())}},{key:"push",value:function(e){this.pushedCurrent&&(this.history.pop(),this.pushedCurrent=!1),this.history.push(e),this.save()}},{key:"save",value:function(){this.provider.write(JSON.stringify(this.history.list))}},{key:"clear",value:function(){this.pushedCurrent=!1,this.history.clear(),this.save()}}])}();function Kt(){var n=navigator.userAgent;return/macintosh|mac os x/i.test(n)}function pt(n){return Kt()&&n.metaKey||!Kt()&&n.ctrlKey}function Hn(n){var e=!1;return n.on("compositionstart",function(){e=!0}),n.on("compositionend",function(){e=!1}),function(){return e}}function ue(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return n instanceof HTMLElement?new P(n):n instanceof P?n:typeof n=="string"?x.div[e?"html":"text"](n+t):x.div[e?"html":"text"](n.toString()+t)}function Ut(n){if(n=n.trim(),!n)return[];var e=n.split("|").map(function(a){return a.trim()}),t=[],r=it(e),i;try{var o=function(){var a=i.value,h={name:"",args:[],options:{}},u=a.split(" ");h.name=u.shift()||"";var c="",l=!1,d=function(m){if(l)h.options[c]=m;else{var g=it(c),b;try{for(g.s();!(b=g.n()).done;){var _=b.value;h.options[_]=m}}catch(C){g.e(C)}finally{g.f()}}},s=function(m){c=m.substring(l?2:1)},f=function(m){l=m[1]==="-"},v=it(u),y;try{for(v.s();!(y=v.n()).done;){var p=y.value;p=p.trim(),p&&(p[0]==="-"?(f(p),c&&d(!0),s(p)):c?p[0]==="-"?(f(p),d(!0),s(p)):(d(p),c=""):h.args.push(p))}}catch(m){v.e(m)}finally{v.f()}c&&d(!0),t.push(h)};for(r.s();!(i=r.n()).done;)o()}catch(a){r.e(a)}finally{r.f()}return t}var In=function(){function n(){L(this,n),this.container=x.div.class("term-display-box").on("click",function(e){e.stopPropagation()})}return H(n,[{key:"pushContent",value:function(e,t){this.container.append(ue(e,t,`
`))}}])}(),qt="web-term-container",Wn=2,le={FullParent:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}},ce={padding:5,fontSize:14,color:"#fff",background:"#000",selectionBackground:"#fff",selectionColor:"#000"};function Dn(n){if(!n)return!1;var e=n.charCodeAt(0);return e>=128}var he=function(n){function e(t){var r,i=t.header,o=i===void 0?"":i,a=t.paddingTop,h=a===void 0?5:a,u=t.paddingLeft,c=u===void 0?5:u,l=t.size,d=l===void 0?"full":l,s=t.mode,f=s===void 0?"inline":s,v=t.tab,y=v===void 0?"  ":v,p=t.fontSize,m=p===void 0?ce.fontSize:p;L(this,e),r=_t(this,e),r.SingleCharWidth=9,r.MultiCharWidth=15,r.fontSize=0,r.lineHeight=0,r.wrapLine=!0,r.store=te({cx:0,cy:0}),r.header="",r._prevHeader="",r._prevHeaderWidth=0,r._pasteTimer=null,r._prevPos={x:-1,y:-1},r._isShowCursor=!1,r.setFontSize(m),r.size=d,r.mode=f,_n(y),r.paddingTop=h,r.paddingLeft=c;var g=x.canvas;return r.ctx=g.el.getContext("2d"),r.resize(!0),r.header=o,r.render(),r._monitorStart(),r}return St(e,n),H(e,[{key:"setFontSize",value:function(t){this.fontSize=t,this.lineHeight=t+2}},{key:"value",get:function(){var t=this.fullValue,r=this.header.length;return r?t.substring(r):t}},{key:"fullValue",get:function(){return this.textarea.value()}},{key:"beforeValue",get:function(){var t=this.fullValue,r=this.header.length,i=this.textarea.el.selectionStart;return typeof i=="number"&&i>0?t.substring(r,i):t.substring(r)}},{key:"headerWidth",get:function(){var t=this.header;return(t!==this._prevHeader||this._prevHeaderWidth<0)&&(this._prevHeader=t,this._prevHeaderWidth=this.measureTextWidth(t)),this._prevHeaderWidth}},{key:"_monitorStart",value:function(){var t=this;setTimeout(function(){t.textarea.el.clientWidth?t.relocateCursorPosition():t._monitorStart()},100)}},{key:"render",value:function(){var t=this.size==="full";this.container=x.div.style({position:"relative",height:t?"100%":"".concat(this.lineHeight+2*this.paddingTop,"px")}).append(this.cursor=x.div.class("editor-cursor").append(x.div.class("editor-cursor-border"),this.cursorText=x.div.class("editor-cursor-text")),this.textarea=x.textarea.class("editor-textarea").value(this.header).style(B(B({},le.FullParent),{},{padding:"".concat(this.paddingTop,"px ").concat(this.paddingLeft,"px"),backgroundColor:"transparent",border:"none",outline:"none",resize:"none",zIndex:"1",caretColor:"transparent"}))),this.wrapLine&&this.textarea.style({wordBreak:"break-all",whiteSpace:"pre-wrap"}),this.initEvents()}},{key:"initEvents",value:function(){var t=this,r=!1,i=this.textarea.el,o=function(l){return l.code==="Backspace"||l.code==="Enter"},a=Hn(this.textarea),h=null,u=this.compatSelChange();this.textarea.on("keydown",function(l){if(!a()){if(t.mode==="inline"){if(l.code==="Enter")if(pt(l))t.pushText(`
`);else{l.preventDefault(),t.emit("key","Enter");return}else if(l.code==="ArrowUp"||l.code==="ArrowDown"||l.code==="Tab"){l.preventDefault(),t.emit("key",l.code);return}}if(l.code==="Tab"&&i.selectionStart!==i.selectionEnd&&t.showCursor(!1),Sn.call(i,l),o(l)&&(r=!0),l.code==="Backspace"){var d=t.getCursorPosition(),s=d.x,f=d.y,v=d.isRange;f===0&&s<=t.headerWidth&&!v&&l.preventDefault()}pt(l)&&l.code==="KeyZ"&&(clearTimeout(h),h=setTimeout(function(){t.relocateCursorPosition()},50))}}).on("keyup",function(l){a()||o(l)&&(r=!1)}).on("paste",function(){t._pasteTimer=setTimeout(function(){t.relocateCursorPosition()},50)}).on("input",function(l){if(l.preventDefault(),r&&t.relocateCursorPosition(),t.size==="auto"){var d=t._countContentHeight(t.fullValue,!0);d!=i.clientHeight&&t.textarea.style("height","".concat(d,"px"))}t.emit("input")}).on("selectionchange",function(){u&&(u(),u=null),t._onSelectionChange()}).on("scroll",function(){t.relocateCursorPosition()}).on("focus",function(){t.cursor.addClass("cursor-focus")}).on("blur",function(){t.cursor.removeClass("cursor-focus")}).on("cut",function(){var l=t.textarea.el;l.selectionStart!==l.selectionEnd&&t.relocateCursorPosition()});var c=i.clientWidth;globalThis.addEventListener("resize",function(){i.clientWidth!==c&&(c=i.clientWidth,t.relocateCursorPosition())})}},{key:"_countContentHeight",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._countContentSize(t,r).height}},{key:"_countContentSize",value:function(t){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=t.split(`
`),a=0,h=o.map(function(u){var c=r.countSingleLineInfo(u);return a+=c.length*r.lineHeight,c});return{lines:h,height:a+(i?2*this.paddingTop:0)}}},{key:"countSingleLineInfo",value:function(t){var r=this,i=this._getLineBoxWidth();if(i<=0)return[{content:t,width:this.measureTextWidth(t)}];var o=Math.floor(i/this.MultiCharWidth);if(t.length<=o)return[{content:t,width:this.measureTextWidth(t)}];for(var a=[],h=t.length,u=0,c=u+o,l=function(){var p=t.substring(u,c);return{content:p,width:r.measureTextWidth(p)}};h>o;){var d=l(),s=d.content,f=d.width,v=void 0,y=void 0;do{if(v=s,y=f,c>=t.length){c++;break}s+=t[c],f=this.measureTextWidth(s),c++}while(f<=i);a.push({content:v,width:y}),u=c-1,c=u+o,h-=v.length}return u<t.length&&a.push(l()),a}},{key:"_onSelectionChange",value:function(){var t=this.textarea.el;if(t.selectionStart===t.selectionEnd)this.relocateCursorPosition();else{if(t.clientWidth===0)return;var r=this.header.length;t.selectionStart<r&&(t.selectionStart=r);var i=t.value.length;t.selectionEnd>i&&(t.selectionEnd=i)}}},{key:"compatSelChange",value:function(){var t=this,r=function(){var i=t.textarea.el;document.activeElement===i&&t._onSelectionChange()};return document.addEventListener("selectionchange",r),function(){return document.removeEventListener("selectionchange",r)}}},{key:"measureTextWidth",value:function(t){return t?this.ctx.measureText(t).width:0}},{key:"_getLineBoxWidth",value:function(){return this.textarea.el.clientWidth-2*this.paddingLeft}},{key:"getCursorPosition",value:function(){var t=this.textarea.el,r=t.selectionStart,i=t.selectionEnd,o=t.value.substring(0,r),a=this._getLineBoxWidth(),h=t.value[r]||"",u=0,c=0;if(this.wrapLine){var l,d=this._countContentSize(o);c=d.height-this.lineHeight,u=((l=d.lines.pop())===null||l===void 0||(l=l.pop())===null||l===void 0?void 0:l.width)||0}else u=this.measureTextWidth(o),c=(o.split(`
`).length-1)*this.lineHeight;var s=Dn(h)?this.MultiCharWidth:this.SingleCharWidth;return u+s>a&&(u=0,c+=this.lineHeight),(this._prevPos.x!==u||this._prevPos.y!==c)&&(Object.assign(this._prevPos,{x:u,y:c}),this.emit("cursor-change",{x:u,y:c,word:h,wordWidth:s,beforeValue:this.beforeValue,value:this.value})),{x:u,y:c,isRange:r!=i,word:h,wordWidth:s}}},{key:"showCursor",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._isShowCursor!==t&&(this.cursor.style("visibility",t?"visible":"hidden"),this._isShowCursor=t)}},{key:"relocateCursorPosition",value:function(){clearTimeout(this._pasteTimer);var t=this.textarea.el;this.showCursor();var r=this.getCursorPosition(),i=r.x,o=r.y,a=r.word,h=r.wordWidth,u=i;if(o===0&&i<this.headerWidth){var c=this.header.length;t.setSelectionRange(c,c),u=this.headerWidth}this.cursor.style({left:"".concat(u+this.paddingLeft,"px"),top:"".concat(o+this.paddingTop-t.scrollTop,"px"),width:"".concat(h,"px")}),this.cursorText.text(a)}},{key:"focus",value:function(){this.textarea.el.focus()}},{key:"pushText",value:function(t){var r=this.textarea.el;r.selectionStart=r.selectionEnd=r.value.length,this.insertText(t)}},{key:"insertText",value:function(t){t&&document.execCommand("insertText",!1,t)}},{key:"replaceText",value:function(t){this.clearContent(!1),this.pushText(t),this.relocateCursorPosition()}},{key:"clearContent",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,r=this.textarea.el,i=r.value,o=!i.startsWith(this.header),a=this.header.length;r.selectionStart=o?0:a,r.selectionEnd=i.length+1,a!==i.length&&(document.execCommand("delete",!1),o&&this.insertText(this.header),t&&this.relocateCursorPosition())}},{key:"setCursorToHead",value:function(){this.setCursorPos(0)}},{key:"setCursorPos",value:function(t){var r=this.textarea.el;r.selectionStart=r.selectionEnd=this.header.length+t}},{key:"resize",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.ctx.font="".concat(this.fontSize,'px Menlo, Monaco, "Courier New", monospace'),this.SingleCharWidth=this.measureTextWidth("a"),this.MultiCharWidth=this.measureTextWidth("一"),!t){this._prevHeaderWidth=-1;var r=this.size==="full";r||this.container.style("height","".concat(this.lineHeight+2*this.paddingTop,"px")),this.relocateCursorPosition()}}}])}(bt.Eveit),Mn=function(n){function e(t,r){var i;return L(this,e),i=_t(this,e),i.editor=new he({mode:"full",paddingLeft:0,paddingTop:0,fontSize:r.fontSize}),i.container=x.div.style(B(B({},le.FullParent),{},{padding:r.padding,position:"relative",zIndex:100,flexDirection:"column"})).append(i.title=x.div.class("term-editor-title").text(""),i.editor.container.style({flex:"1",height:"auto"})).show(function(){return t.showEditor},"flex"),i.container.on("click",function(o){o.stopPropagation()}),i.container.on("keydown",function(o){if(o.code==="KeyS"&&pt(o)){var a=i.editor.value;i.editor.clearContent(),i.emit("edit-done",a),o.preventDefault()}o.code==="Escape"&&(i.editor.clearContent(),i.emit("edit-cancel"))}),i}return St(e,n),H(e,[{key:"vi",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.title,o=i===void 0?"":i,a=r.html,h=a===void 0?!0:a;this.editor.textarea.el.focus(),this.editor.replaceText(t),this.title.style({paddingBottom:o?"5px":0})[h?"html":"text"](o)}}])}(bt.Eveit),Fn=function(){function n(){L(this,n),this.container=x.div.class("term-below-box").on("click",function(e){e.stopPropagation()})}return H(n,[{key:"write",value:function(e,t){var r=this.container.children();r.length>0&&r[r.length-1].remove(),this.push(e,t)}},{key:"push",value:function(e,t){this.container.append(ue(e,t,`
`))}},{key:"clear",value:function(){this.container.empty()}}])}();function Bn(){var n="_web_term_ui_history;";return{read:function(){return localStorage.getItem(n)||"[]"},write:function(e){return localStorage.setItem(n,e),!0}}}var Nn=function(n){function e(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.title,o=i===void 0?"":i,a=r.titleHtml,h=a===void 0?!0:a,u=r.historyMax,c=u===void 0?100:u,l=r.storageProvider,d=l===void 0?Bn():l,s=r.container,f=r.header,v=r.theme,y=r.style,p=y===void 0?{}:y,m=r.parseCommand,g=m===void 0?!0:m;if(L(this,e),t=_t(this,e),t.style=B({},ce),t.store=te({showEditor:!1}),t.theme="dark",t._parseCommand=g,t.title=o,t.history=new Ln(c,d),Object.assign(t.style,p),t.editor=new Mn(t.store,t.style),t.input=new he({paddingTop:Wn,paddingLeft:0,header:f,size:"auto",mode:"inline",fontSize:t.style.fontSize}),t.display=new In,t.below=new Fn,o&&t.display.pushContent(o,h),!s)t.container=x.div.class(qt).style({position:"fixed",top:0,left:0,width:"100%",height:"100%"}),xn(t.container,"body");else{if(typeof s=="string"){var b=document.querySelector(s);if(!b)throw new Error("Container not exists");t.container=new P(b)}else t.container=new P(s);t.container.addClass(qt)}return t.initEvents(),v?t.setTheme(v):t.setColor(p),t._setFontSize(t.style.fontSize),t.render(),t}return St(e,n),H(e,[{key:"value",get:function(){return this.input.value}},{key:"beforeValue",get:function(){return this.input.beforeValue}},{key:"header",get:function(){return this.input.header}},{key:"initEvents",value:function(){var t=this;this.input.on("key",function(i){switch(i){case"Enter":{var o=t.input.value;if(o&&t.history.push(o),t.emit("enter",o),t._parseCommand){var a=Ut(o);t.emit("command",a[0],a)}}break;case"ArrowDown":{var h=t.history.down();typeof h=="string"&&t.input.replaceText(h)}break;case"ArrowUp":{var u=t.history.up(t.input.value);typeof u=="string"?t.input.replaceText(u):t.input.setCursorToHead()}break;case"Tab":t.emit("tab",t.input.beforeValue);break}}),this.input.on("input",function(){t.history.checkLatest(t.input.value),t.emit("input",t.value,t.input.beforeValue)}),this.container.on("click",function(){t.input.focus()});var r=function(){t.store.showEditor=!1,t.input.focus()};this.editor.on("edit-done",function(i){r(),t.emit("edit-done",i)}),this.editor.on("edit-cancel",function(){r(),t.emit("edit-cancel")}),this.editor.editor.on("cursor-change",function(i){t.emit("edit-cursor-change",i)}),this.input.on("cursor-change",function(i){t.emit("cursor-change",i)})}},{key:"render",value:function(){var t=this;this.container.style({overflow:function(){return t.store.showEditor?"hidden":"auto"}}).append(this.mainContainer=x.div.style("padding",this.style.padding).append(this.display.container,this.input.container,this.below.container).show(function(){return!t.store.showEditor}),this.editor.container)}},{key:"setTheme",value:function(t){var r="#fff",i="#000",o=t==="light";this.theme=t,this.setColor({background:o?r:i,color:o?i:r,selectionBackground:o?i:r,selectionColor:o?r:i})}},{key:"setColor",value:function(t){Object.assign(this.style,t),this.container.style({"--background":this.style.background,"--color":this.style.color,"--selection":this.style.selectionColor,"--selection-bg":this.style.selectionBackground})}},{key:"_setFontSize",value:function(t){this.style.fontSize=t;var r=t+2;this.container.style({"--font-size":t,"--line-height":r})}},{key:"fontSize",get:function(){return this.style.fontSize}},{key:"setFontSize",value:function(t){this._setFontSize(t),this.editor.editor.setFontSize(t),this.input.setFontSize(t),this.resize()}},{key:"clearInputHistory",value:function(){this.history.clear()}},{key:"write",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.html,o=i===void 0?!0:i,a=r.clear,h=a===void 0?!0:a;this.display.pushContent(this.input.fullValue,o),t&&this.display.pushContent(t,o),h&&this.input.clearContent(),this.scrollToBottom()}},{key:"insertEdit",value:function(t){this.editor.editor.insertText(t)}},{key:"replaceEdit",value:function(t){this.editor.editor.replaceText(t)}},{key:"setCursorPos",value:function(t){this.input.setCursorPos(t)}},{key:"pushEdit",value:function(t){this.editor.editor.pushText(t)}},{key:"vi",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.title,o=i===void 0?"":i,a=r.html,h=a===void 0?!0:a;this.store.showEditor=!0,this.editor.vi(t,{title:o,html:h})}},{key:"clearTerminal",value:function(){this.display.container.empty(),this.input.clearContent()}},{key:"newLine",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.write("",{html:t})}},{key:"setHeader",value:function(t){this.input.header=t}},{key:"scrollToBottom",value:function(){this.container.el.scrollTop=this.container.el.scrollHeight}},{key:"focus",value:function(){this.input.focus()}},{key:"writeBelow",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.below.write(t,r),this.scrollToBottom()}},{key:"pushBelow",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.below.push(t,r),this.scrollToBottom()}},{key:"clearBelow",value:function(){this.below.clear()}},{key:"resize",value:function(){this.editor.editor.resize(),this.input.resize()}},{key:"parseCommand",value:function(t){return Ut(t)}}])}(bt.Eveit);const w=new Nn({title:`This is a Demo. Type "help" to get Help.
`,container:"#container",header:"/ admin$ ",style:{padding:10}});w.on("enter",n=>{if(!n)w.newLine();else if(n==="vi"||n.startsWith("vi "))w.vi(`test
11`,{title:`${n.substring(3)} "Ctrl/Cmd + s" to Save, "Esc" to Exit`});else if(n==="clear")w.clearTerminal();else if(n==="help")Vn();else if(n==="progress")Rn();else if(n.startsWith("header"))w.setHeader(`/ ${n.replace("header","").trim()}$ `),w.write(`SetHeader "${n}"`);else if(n==="theme"){const e=w.theme==="dark"?"light":"dark";w.setTheme(e),w.write(`Set theme to "${e}"`)}else if(n.startsWith("font")){const e=parseInt(n.replace("font","").trim());w.setFontSize(e),w.write(`Set FontSize = "${e}"`)}else w.write(`Exec "${n}"`,{clear:!1})});w.on("edit-done",n=>{w.write(`Edit Save: ${n}`)});w.on("tab",()=>{w.insertEdit("[test]")});function Vn(){w.write(["vi      : Open vi Editor","clear   : Clear Terminal","progress: Mock Progress Bar",'header  : "header <name>" to Set Header',"theme   : Toggle theme between dark and light",'font    : "font <size>" to set font-size'].join(`
`),{html:!1})}function Rn(){let n=0;const e=Date.now(),t=setInterval(()=>{n+=Math.round(Math.random()*10),n>100&&(n=100,clearInterval(t)),w.writeBelow(`Progressing...[${n}%]`),n===100&&(w.clearBelow(),w.write(`Progress Done in ${Date.now()-e}ms!`))},100)}document.getElementById("code").appendChild(qe({code:`import {WebTerm} from 'web-term-ui';
const term = new WebTerm({
    title: 'This is a Demo. Type "help" to get Help.\\n',
    container: '#container',
    header: '/ admin$ ',
    // theme: 'light',
    style: {padding: 10}
});
term.on('enter', v => {
    if (!v) {
        term.newLine();
    } else if (v === 'vi' || v.startsWith('vi ')) {
        term.vi('test\\n11', {
            title: \`\${v.substring(3)} "Ctrl/Cmd + s" to Save, "Esc" to Exit\`
        });
    } else if (v === 'clear') {
        term.clearTerminal();
    } else if (v === 'help') {
        writeHelp();
    } else if (v === 'progress') {
        mockProgress();
    } else if (v.startsWith('header')) {
        term.setHeader(\`/ \${v.replace('header', '').trim()}$ \`);
        term.write(\`SetHeader "\${v}"\`);
    } else if (v === 'theme') {
        const target = term.theme === 'dark' ? 'light' : 'dark';
        term.setTheme(target);
        term.write(\`Set theme to "\${target}"\`);
    } else if (v.startsWith('font')) {
        const size = parseInt(v.replace('font', '').trim());
        term.setFontSize(size);
        term.write(\`Set FontSize = "\${size}"\`);
    } else {
        term.write(\`Exec "\${v}"\`);
    }
});
term.on('edit-done', v => {
    term.write(\`Edit Save: \${v}\`);
});
term.on('tab', () => {
    term.insertEdit('[test]');
});
function writeHelp () {
    term.write([
        'vi      : Open vi Editor',
        'clear   : Clear Terminal',
        'progress: Mock Progress Bar',
        'header  : "header <name>" to Set Header',
        'theme   : Toggle theme between dark and light',
        'font    : "font <size>" to set font-size'
    ].join('\\n'), {html: false});
}
function mockProgress () {
    let progress = 0;
    const time = Date.now();
    const interval = setInterval(() => {
        progress += Math.round(Math.random() * 10);
        if (progress > 100) {
            progress = 100;
            clearInterval(interval);
        }
        term.writeBelow(\`Progressing...[\${progress}%]\`);
        if (progress === 100) {
            term.clearBelow();
            term.write(\`Progress Done in \${Date.now() - time}ms!\`);
        }
    }, 100);
}`}));window.term=w;
