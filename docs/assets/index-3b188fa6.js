(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();function Et(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}function Tt(n,t){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=de(n))||t&&n&&typeof n.length=="number"){e&&(n=e);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,u=!0,h=!1;return{s:function(){e=e.call(n)},n:function(){var l=e.next();return u=l.done,l},e:function(l){h=!0,o=l},f:function(){try{u||e.return==null||e.return()}finally{if(h)throw o}}}}function ce(n,t,e){return(t=fe(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function $t(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function _(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?$t(Object(e),!0).forEach(function(r){ce(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):$t(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}function he(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var r=e.call(n,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function fe(n){var t=he(n,"string");return typeof t=="symbol"?t:t+""}function ot(n){"@babel/helpers - typeof";return ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(n)}function de(n,t){if(n){if(typeof n=="string")return Et(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Et(n,t):void 0}}var k={FontFamily:'Menlo, Monaco, "Courier New", monospace',FontSize:14,LineHeight:18,CodePadding:10,PLeft:8};function ve(n){var t=document.createElement("canvas"),e=t.getContext("2d");return e.font=n,function(r){return r?e.measureText(r).width:0}}function at(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}function pe(n){if(Array.isArray(n))return at(n)}function Z(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function Pt(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,xe(r.key),r)}}function J(n,t,e){return t&&Pt(n.prototype,t),e&&Pt(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function ye(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function me(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ge(n){return pe(n)||ye(n)||we(n)||me()}function be(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var r=e.call(n,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function xe(n){var t=be(n,"string");return typeof t=="symbol"?t:t+""}function B(n){"@babel/helpers - typeof";return B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(n)}function we(n,t){if(n){if(typeof n=="string")return at(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?at(n,t):void 0}}function yt(n){return!!(n!=null&&n.__isRef)}var ut=null;function ke(n){return ut=n,function(){ut=null}}function _e(){return ut}var Se=function(){function n(t,e){var r=this;Z(this,n),this.__isComputed=!0,this._dirty=!1,this._listeners=[],this._clearSub=[],this._compute=t,this._set=e;var i=ke(function(o,u){var h=function(){if(r._dirty=!0,r._listeners.length>0){var c=r._value,s=r.value;r._listeners.forEach(function(d){d(s,c)})}},l=typeof u=="string"?o.$sub(u,h):o.sub(h);r._clearSub.push(l)});this._refreshValue(),i()}return J(n,[{key:"value",get:function(){var t;return this._dirty&&this._refreshValue(),Ee(this),(t=_e())===null||t===void 0||t(this),this._value},set:function(t){if(!this._set){console.warn("Computed not have set property");return}this._set(t)}},{key:"_refreshValue",value:function(){this._value=this._compute(),this._dirty=!1}},{key:"sub",value:function(t){var e=this;return this._listeners.push(t),function(){return e.unsub(t)}}},{key:"unsub",value:function(t){var e=this._listeners.indexOf(t);return e!==-1?(this._listeners.splice(e,1),!0):!1}},{key:"destroy",value:function(){this._listeners=[],this._clearSub.forEach(function(t){return t()}),this._clearSub=[]}}])}();function Ce(n,t){return G(n)?n:new Se(n,t)}function G(n){return!!(n!=null&&n.__isComputed)}function Ut(n){return typeof n=="function"||G(n)}var M={};function Ee(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",e;G(n)||yt(n)?(t="value",e=function(r){return n.sub(r)}):e=function(r){return n.$sub(t,r)},Object.assign(M,{set:function(r){n[t]=r},get:function(){return n[t]},sub:e})}function Te(n,t){if(!M)throw new Error("Bind 传入参数错误");(G(t)||yt(t))&&(t=t.value);var e=M.get,r=M.set,i=M.sub;if(e()!==t)throw new Error("Bind 传入参数错误");var o=n.el,u="string";if(o.tagName==="INPUT"){var h=n.attr("type");h==="number"||h==="range"?u="number":(h==="radio"||h==="checkbox")&&(u="boolean")}var l=function(){if(u==="boolean")return o.checked;var a=n.value();return u==="number"?parseFloat(a):a},c=function(a){if(u==="boolean"){o.checked=a;return}n.value(a)},s=!1,d=function(){s=!0,r(l()),s=!1};c(e()),n.on("input",function(){d()}),n.on("change",function(){d()}),i(function(a){s||c(a)})}function j(n,t){if(yt(n))n.sub(function(){t(n.value)}),t(n.value);else if(Ut(n)){var e=Ce(n);e.sub(function(){t(e.value)}),t(e.value)}else t(n)}var Zt=function(){function n(t){Z(this,n),this.__ld_type=X.Text,this.el=document.createTextNode(""),typeof t<"u"&&this.text(t)}return J(n,[{key:"text",value:function(t){var e=this;return j(t,function(r){return e.el.textContent=r}),this}},{key:"mounted",value:function(t){return this.__mounted=t,this}}])}(),$e=function(){function n(){Z(this,n),this.__ld_type=X.Frag,this.children=[],this.el=document.createDocumentFragment()}return J(n,[{key:"append",value:function(){for(var t=this,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return mt(r,function(o,u){t.children.push(u),t.el.appendChild(o)}),this}},{key:"mounted",value:function(t){return this.__mounted=function(e){e.children.forEach(function(r){var i;(i=r.__mounted)===null||i===void 0||i.call(r,r)}),t(e)},this}}])}(),X=function(n){return n[n.Dom=0]="Dom",n[n.Text=1]="Text",n[n.Frag=2]="Frag",n}(X||{});function mt(n,t){n.forEach(function(e){var r;if(Array.isArray(e)){mt(e,t);return}var i=e;Ut(i)?(i=new Zt(i),i=i.el):typeof i.__ld_type=="number"?i=i.el:e instanceof HTMLElement||(i=document.createTextNode("".concat(e))),t(i,e),(r=e.__mounted)===null||r===void 0||r.call(e,e)})}var Pe=/(width$)|(height$)|(top$)|(bottom$)|(left$)|(right$)|(^margin)|(^padding)|(font-?size)/i,jt=/!important$/,je=/^[0-9]+$/;function Oe(n,t){n=Ae(n);var e="";return jt.test(t)&&(e="important",t=t.replace(jt,"")),je.test(t)&&Pe.test(n)&&(t="".concat(t,"px")),{cssKey:n,cssValue:t,important:e}}function Ae(n){for(var t=n.length,e="",r=0;r<t;r++){var i=n[r],o=i.charCodeAt(0);o>=65&&o<=90?e+="-".concat(i.toLowerCase()):e+=i}return e}var Le=["a","div","h1","h2","h3","h4","h5","h6","button","canvas","code","pre","table","th","td","tr","video","audio","ol","select","option","p","i","iframe","img","input","label","ul","li","span","textarea","form","br","tbody","object","progress","section","slot","small","strong","sub","summary","sup","template","title","var","style","meta","head","link","svg","script"];function He(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return gt(n,t,document)}function gt(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;if(t){var r=e.querySelector(n);if(r)return new K(r);throw new Error("Element is not exist"+n)}for(var i=e.querySelectorAll(n),o=[],u=0;u<i.length;u++)o.push(new K(i[u]));return o}var E=function(){var n=function(e){return new K(e)},t={frag:{get:function(){return new $e}},text:{get:function(){var e=function(r){return new Zt(r)};return e.text=e,e}}};return Le.forEach(function(e){t[e]={get:function(){return n(e)}}}),Object.defineProperties(n,t),n}();function Ie(n,t){var e,r=t;typeof t=="string"?r=gt(t,!0):t instanceof HTMLElement&&(r=new K(t)),Array.isArray(n)?(e=r).append.apply(e,ge(n)):r.append(n)}var K=function(){function n(t){Z(this,n),this.__ld_type=X.Dom,this.__xr_funcs={},this.el=typeof t=="string"?document.createElement(t):t}return J(n,[{key:"_ur",value:function(t,e){var r=this;return typeof e>"u"?this.el[t]:(j(e,function(i){return r.el[t]=i}),this)}},{key:"class",value:function(t){return this._ur("className",t)}},{key:"id",value:function(t){return this._ur("id",t)}},{key:"addClass",value:function(t){return this.el.classList.add(t),this}},{key:"removeClass",value:function(t){return this.el.classList.remove(t),this}},{key:"hasClass",value:function(t){var e;return(e=this.el)===null||e===void 0?void 0:e.classList.contains(t)}},{key:"toggleClass",value:function(t,e){var r;return!!((r=this.el)!==null&&r!==void 0&&r.classList.toggle(t,e))}},{key:"remove",value:function(){var t;return(t=this.el)===null||t===void 0||t.remove(),this}},{key:"text",value:function(t){return typeof t>"u"?this.el.innerText:this._ur("innerText",t)}},{key:"mounted",value:function(t){return this.__mounted=t,this}},{key:"attr",value:function(t,e){var r=this;if(B(t)==="object"){for(var i in t)this.attr(i,t[i]);return this}return typeof e>"u"?this.el.getAttribute(t)||"":(j(e,function(o){return r.el.setAttribute(t,o)}),this)}},{key:"removeAttr",value:function(t){return this.el.removeAttribute(t),this}},{key:"func",value:function(t,e){return typeof e>"u"?this.__xr_funcs[t]:(this.__xr_funcs[t]=e,this)}},{key:"data",value:function(t,e){var r=this;if(B(t)==="object"){for(var i in t)this.data(i,t[i]);return this}if(typeof e>"u"){var o;return((o=this.el.__xr_data)===null||o===void 0?void 0:o[t])||null}return this.el.__xr_data||(this.el.__xr_data={}),j(e,function(u){return r.el.__xr_data[t]=u}),this}},{key:"style",value:function(t,e){var r=this.el.style;if(typeof e<"u")return j(e,function(o){var u=Oe(t,o),h=u.important,l=u.cssValue,c=u.cssKey;r.setProperty(c,l,h)}),this;if(typeof t=="string")return r[t];for(var i in t)this.style(i,t[i]);return this}},{key:"value",value:function(t){return this._ur("value",t)}},{key:"html",value:function(t){return this._ur("innerHTML",t)}},{key:"outerHtml",value:function(t){var e=this;return typeof t>"u"?this.el.outerHTML:(j(t,function(r){e.html(r),e.el=e.el.children[0]}),this)}},{key:"child",value:function(t){var e=this.el.children[t];return e?new n(e):null}},{key:"children",value:function(){for(var t=this.el.children.length,e=[],r=0;r<t;r++)e.push(this.child(r));return e}},{key:"click",value:function(t){return this.on("click",t)}},{key:"on",value:function(t,e){if(B(t)==="object"){for(var r in t)this.on(r,t[r]);return this}var i=this.el;if(typeof e=="function")this.el.addEventListener(t,e);else{var o,u=function(h){var l;e.self&&h.target!==i||(e.stop&&h.stopPropagation(),e.prevent&&h.preventDefault(),e.once&&i.removeEventListener(t,u,e.capture),(l=e.listener)===null||l===void 0||l.call(e,h))};i.addEventListener(t,u,(o=e.capture)!==null&&o!==void 0?o:!1)}return this}},{key:"append",value:function(){for(var t=this,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return mt(r,function(o){t.el.appendChild(o)}),this}},{key:"ref",value:function(t){return t(this),this}},{key:"hide",value:function(){return this.display("none")}},{key:"display",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"block";return this.style("display",t)}},{key:"show",value:function(t){var e=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";return j(t,function(i){e.display(i?r:"none")}),this}},{key:"query",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return gt(t,e,this.el)}},{key:"src",value:function(t){return this._ur("src",t)}},{key:"parent",value:function(){return this.el.parentElement}},{key:"empty",value:function(){return this.html("")}},{key:"name",value:function(t){return this.attr("__xr_name",t)}},{key:"find",value:function(t){return this.query('[__xr_name="'.concat(t,'"]'),!0)}},{key:"type",value:function(t){return this.attr("type",t)}},{key:"bind",value:function(t){return Te(this,t),this}}])}();function We(n,t){var e=[],r="#0b8c0b",i=.4,o=ve("14px Menlo, Monaco, Courier New, monospace"),u=Tt(t),h;try{for(u.s();!(h=u.n()).done;){var l=h.value,c={color:l.color||r,opacity:l.opacity||i};if(De(l)){var s=n.matchAll(l.match),d=Tt(s),a;try{for(d.s();!(a=d.n()).done;){var f=a.value,p=n.substring(0,f.index),v=p.split(`
`),y=v.pop();e.push(_({left:o(y)+k.PLeft,top:v.length*k.LineHeight,width:o(f[0]),index:v.length},c))}}catch(C){d.e(C)}finally{d.f()}}else{var m=l.row,g=l.column,x=l.range,S=x===void 0?1:x,P=n.split(`
`);debugger;e.push(_({left:o(P[m].substring(0,g))+k.PLeft,top:m*k.LineHeight,index:m,width:o(P[m].substring(g,g+S))},c))}}}catch(C){u.e(C)}finally{u.f()}return e}function De(n){return typeof n.match<"u"}function Me(n){return n.map(function(t){return E.div.class("highlight-bar").style({position:"absolute",backgroundColor:Jt(t),left:"0",top:"".concat(k.CodePadding+t.top,"px"),height:"".concat(k.LineHeight,"px"),width:"100%"}).append(E.span.style({position:"absolute",backgroundColor:t.color,left:"".concat(t.left,"px"),width:"".concat(t.width,"px"),height:"100%"}))})}function Jt(n){var t=n.color,e=n.opacity;if(t[0]==="#"){var r=function(o){var u=Math.round(o*1.6*10).toString(16);return u.length===2?"F":u},i=r(e);return t.length===4?"".concat(t).concat(i):"".concat(t).concat(i).concat(i)}else if(t.startsWith("rgba"))return t.replace(/,([0-9]*)\)/,",".concat(e,")"));return t.replace(/,([0-9]*)\)/,function(o,u){return",".concat(u,",").concat(e,")")})}var rt="#9cdcfe";Ie(E.style.text(`
.xhl-punc {
    color: #ddd;
}
.xhl-bkt {
    color: #ffe11c;
}
.xhl-k1 {
    color: #569cd6;
}
.xhl-k2 {
    color: #c586c0;
}
.xhl-k3 {
    color: #3ac9b0;
}
.xhl-num {
    color: #b5cea8;
}
.xhl-f {
    color: #dcdcaa;
}
.xhl-reg,
.xhl-reg * {
    color: #d16969;
}
.xhl-str,
.xhl-str *,
.xhl-str .xhl-cm {
    color: #ce9178;
}
.xhl-cm,
.xhl-cm * {
    color: #6a8a35;
}
.xhl-jsx {
    color: #569cd6;
}
.xhl-tmp,.xhl-tmp .xhl-punc,.xhl-tmp .xhl-bkt{
    color: rgb(86,156,214);
}
.xhl-def{color: `.concat(rt,`;}
.xhl-def .xhl-punc {
    color: #ddd;
}
.xhl-pre {
    background-color: #111;
    padding: 10px;
    color: `).concat(rt,`;
    font-size: 14px;
    margin: 0;
    overflow-x: auto;
    font-family: Menlo, Monaco, "Courier New", monospace;
    line-height: 18px;
}
.xhl-container {
    overflow: auto;
}
.xhl-container .xhl-pre{
    background-color: transparent;
    padding: 0;
    font-family: inherit;
    line-height: inherit;
    font-size: inherit;
    color: inherit;
    overflow: unset;
    color: `).concat(rt,`;
}
.xhl-pre::-webkit-scrollbar,
.xhl-container::-webkit-scrollbar {
    width: 5px;
    cursor: pointer;
    height: 5px;
}
.xhl-pre::-webkit-scrollbar-button, .xhl-container::-webkit-scrollbar-button {
    display: none;
}
.xhl-pre::-webkit-scrollbar-track,
.xhl-container::-webkit-scrollbar-track {
    background-color: transparent;
}
.xhl-pre::-webkit-scrollbar-thumb,
.xhl-container::-webkit-scrollbar-thumb {
    background-color: #666;
    cursor: pointer;
    background-clip: initial;
}
.xhl-pre::-webkit-scrollbar-thumb:hover,
.xhl-container::-webkit-scrollbar-thumb:hover {
    background-color: #888;
    cursor: pointer;
}
`)),document.head);function ze(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;n=n.replace(/\&lt;/g,"__LT__").replace(/\&gt;/g,"__GT__");var e=Fe(n.replace(/</g,"&lt;").replace(/>/g,"&gt;"));return t?"<pre class='xhl-pre'>".concat(e,"</pre>"):e}var Ot=["var","new","const","let","typeof","in","function","this","true","false","null","undefined","async","delete","class","extends"],At=["return","for","while","else if","if","else","switch","case","default","break","continue","await","yield","try","catch","finally","throw","export","import","from"],Lt=["console","window","document","Date","Array","Object","Boolean","Number","String","alert","RegExp","Function","JSON","Date"],A=["\\/","\\","\\(","\\)","\\[","\\]","\\{","\\}","\\+","\\-","\\*","\\=",",","\\.",":","%","_","\\$","@","#","\\^","\\|","!","~"],Ht=["\\(","\\)","\\[","\\]","\\{","\\}"],R="(^|(&lt;)|(&lt;)|[\\n\\t;<> "+A.join("")+"])",st="(["+A.join("")+"\\n;<> ]|(&lt;)|(&lt;)|$)";function T(n,t){return'<span class="xhl-'+t+'">'+n+"</span>"}function It(n,t,e,r){return n.replace(t,function(i){return typeof r=="string"?i.replace(r,T(r,e)):ot(r)==="object"?i.replace(r,function(o){return T(o,e)}):T(typeof r=="function"?r.apply(void 0,arguments):i,e)})}function Be(n,t,e,r){if(n.indexOf("</span>")!==-1){var i=typeof t=="string"?Ne(t):t[0];n=n.replace(i,function(u){var h=typeof t=="string"?new RegExp(t,"g"):t[1];return It(u,h,e,r)})}else{var o=typeof t=="string"?new RegExp(t,"g"):t[1];n=It(n,o,e,r)}return n}function Ne(n){return new RegExp(n+"(?![^<]*>|[^<>]*</)","g")}function Fe(n){return n=Ve(n,[["\\$\\{(.*)\\}","tmp",function(t,e){return t.replace(e,T(e,"def"))}],[[/("(?:[^"\\]|\\.)*")|(\'(?:[^\'\\]|\\.)*\')|(`((?:[^`\\]|\\.)|\n)*`)(?![^<]*>|[^<>]*<\/)/g,/("(?:[^"\\]|\\.)*")|(\'(?:[^\'\\]|\\.)*\')|(`((?:[^`\\]|\\.)|\n)*`)/g],"str"],[`(//.*(
|$))|(\\/\\*(.|
)*?\\*\\/)`,"cm"],["\\/[a-zA-Z0-9"+A.slice(1).join("")+" ]+\\/[gi]?","reg"],L(Ot,"k1"),L(Ot,"k1"),L(At,"k2"),L(At,"k2"),L(Lt,"k3"),L(Lt,"k3"),[R+"[a-zA-Z_\\$]+[a-zA-Z_\\$0-9]* ?\\(","f",new RegExp("[a-zA-Z_\\$]+[a-zA-Z_\\$0-9]*","g")],[R+"[0-9]+(\\.?[0-9]+)?"+st,"num",/[0-9]+(.?[0-9]+)?/g],[R+"[0-9]+(\\.?[0-9]+)?"+st,"num",/[0-9]+(.?[0-9]+)?/g],[`&lt;\\/?[a-zA-Z\\-]*(\\/| |
|&gt;)`,"jsx"],["["+Ht.join("")+"]","bkt",new RegExp("["+Ht.join("")+"]","g")],["["+A.join("")+"]","punc",new RegExp("["+A.join("")+"]","g")],["["+A.join("")+"]","punc",new RegExp("["+A.join("")+"]","g")]]),n=n.replace(/\&lt;/g,T("<","punc")).replace(/\&gt;/g,T(">","punc")).replace(/;/g,T(";","punc")).replace(/&/g,T("&","punc")),n=n.replace(/__LT__/g,"&amp;lt;").replace(/__GT__/g,"&amp;gt;"),n}function L(n,t){return[R+"(("+n.join(")|(")+"))"+st,t,new RegExp("(("+n.join(")|(")+"))","g")]}function Ve(n,t){for(var e=0;e<t.length;e++)t[e].unshift(n),n=Be.apply(null,t[e]);return n}function Re(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{code:""},t=n.code,e=t===void 0?"":t,r=n.borderRight,i=r===void 0?!1:r,o=n.startIndex,u=o===void 0?1:o,h=n.highlights,l=h===void 0?[]:h,c=n.style,s=c===void 0?{}:c,d=n.codeStyle,a=d===void 0?{}:d,f=n.lineHeight,p=f===void 0?k.LineHeight:f,v=n.lineCount,y={backgroundColor:"#111",color:"#fff",fontFamily:k.FontFamily,margin:"0",fontSize:"".concat(k.FontSize,"px"),paddingTop:"".concat(k.CodePadding,"px"),paddingBottom:"0",paddingLeft:"".concat(k.PLeft,"px"),lineHeight:"".concat(p,"px")},m=_({overflowX:"auto",borderRight:i?"1px solid #666":"none",flex:"1",position:"relative"},y),g=e.split(`
`),x=e;e.length<=1e4?x=ze(x,!1):console.warn("当前代码过长，已关闭代码高亮");var S=_({display:"flex"},s);v&&(S.minHeight="".concat(v*p+k.CodePadding*2,"px"));var P=We(e,l);return E.div.style(S).append(E.div.style(_(_({},y),{},{flexDirection:"column",display:"flex",borderRight:"1px solid #aaa",padding:"".concat(k.CodePadding,"px 0px"),color:"#ddd",textAlign:"right"})).append(g.map(function(C,W){var F=P.find(function(nt){return nt.index===W});return E.span.style({padding:"0px 5px",backgroundColor:F?Jt(F):"transparent"}).text(u+W)})),E.pre.class("xhl-container").style(_(_({},m),a)).mounted(function(C){setTimeout(function(){if(P.length){var W=P[0];if(C.el.scrollLeft=W.left-(C.el.offsetWidth-W.width)/2,ResizeObserver){var F=new ResizeObserver(function(nt){var Ct=nt[0].target;He(".highlight-bar").forEach(function(le){return le.style("maxWidth","".concat(Ct==null?void 0:Ct.scrollWidth,"px"))})});F.observe(C.el)}}},100)}).append(Me(P),E.div.class("xhl-pre").style(_(_({},a),{},{position:"relative"})).html(x))).el}var Ke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lt={exports:{}};(function(n,t){(function(e,r){r(t)})(Ke,function(e){function r(l){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(l)}function i(l,c){for(var s=0;s<c.length;s++){var d=c[s];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,d.key,d)}}function o(l){return function(c){if(Array.isArray(c))return u(c)}(l)||function(c){if(typeof Symbol<"u"&&c[Symbol.iterator]!=null||c["@@iterator"]!=null)return Array.from(c)}(l)||function(c,s){if(c){if(typeof c=="string")return u(c,s);var d=Object.prototype.toString.call(c).slice(8,-1);return(d=d==="Object"&&c.constructor?c.constructor.name:d)==="Map"||d==="Set"?Array.from(c):d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?u(c,s):void 0}}(l)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function u(l,c){(c==null||c>l.length)&&(c=l.length);for(var s=0,d=new Array(c);s<c;s++)d[s]=l[s];return d}var h=function(){function l(){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.usePrevEmit=!0,this._map={},this._prevData={}}var c,s,d;return c=l,d=[{key:"_",get:function(){return this.__||(this.__=new l),this.__}},{key:"usePrevEmit",get:function(){return this._.usePrevEmit},set:function(a){this._.usePrevEmit=a}},{key:"emit",value:function(a){for(var f,p=arguments.length,v=new Array(1<p?p-1:0),y=1;y<p;y++)v[y-1]=arguments[y];(f=this._).emit.apply(f,[a].concat(v))}},{key:"off",value:function(a,f){this._.off(a,f)}},{key:"clear",value:function(a){this._.clear(a)}},{key:"on",value:function(a,f){this._.on(a,f)}},{key:"once",value:function(a,f){this._.once(a,f)}},{key:"onWait",value:function(a){this._.onWait(a)}},{key:"head",value:function(a,f){this._.head(a,f)}},{key:"headOnce",value:function(a,f){this._.headOnce(a,f)}}],(s=[{key:"hasEvent",value:function(a){return!!this._map[a]}},{key:"on",value:function(a,f){var p=this;if(r(a)==="object"){var v,y=[];for(v in a)y.push(this.on(v,a[v]));return function(){y.forEach(function(g){return g()})}}if(!f)throw new Error("fn is required");var m=this._formatTarget(f);return this._checkPrev(a,m)&&m.once?function(){}:(this._getList(a).push(m),function(){p.off(a,m)})}},{key:"_formatTarget",value:function(a,f){return typeof a=="function"?{listener:a,once:f!=null&&f,prev:this.usePrevEmit}:(typeof f=="boolean"&&(a.once=f),a)}},{key:"emit",value:function(a){for(var f=arguments.length,p=new Array(1<f?f-1:0),v=1;v<f;v++)p[v-1]=arguments[v];this._prevData[a]=p;var y=this._map[a];if(!y)return!1;for(var m=0;m<y.length;m++){var g=y[m];g.listener.apply(g,p),g.once&&(y.splice(m,1),m--)}return!0}},{key:"off",value:function(a,f){if(a=this._map[a],!a)return!1;var p=a.findIndex(function(v){return v===f||v.listener===f});return p!==-1&&(a.splice(p,1),!0)}},{key:"clear",value:function(a){return!!this._map[a]&&(delete this._map[a],delete this._prevData[a],!0)}},{key:"onWait",value:function(a,f){var p=this;return new Promise(function(v){var y=function(){for(var m=arguments.length,g=new Array(m),x=0;x<m;x++)g[x]=arguments[x];return v(g)};f&&(y=Object.assign({listener:y},f)),p.once(a,y)})}},{key:"destroy",value:function(){this._map={},this._prevData={}}},{key:"_checkPrev",value:function(a,f){return f.prev?(a=this._prevData[a],a!==void 0&&(f.listener.apply(f,o(a)),!0)):!1}},{key:"once",value:function(a,f){return this.on(a,this._formatTarget(f,!0))}},{key:"head",value:function(a,f){var p=this,v=this._formatTarget(f);return this._checkPrev(a,v)&&v.once?function(){}:(this._getList(a).unshift(v),function(){p.off(a,f)})}},{key:"headOnce",value:function(a,f){return this.head(a,this._formatTarget(f,!0))}},{key:"_getList",value:function(a){var f=this._map[a];return f||(this._map[a]=f=[]),f}}])&&i(c.prototype,s),d&&i(c,d),Object.defineProperty(c,"prototype",{writable:!1}),l}();h.version="0.0.3",e.Eveit=h,e.default=h,Object.defineProperty(e,"__esModule",{value:!0})})})(lt,lt.exports);var bt=lt.exports;function ct(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}function qe(n){if(Array.isArray(n))return ct(n)}function Ue(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function Wt(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Ye(r.key),r)}}function Ze(n,t,e){return t&&Wt(n.prototype,t),e&&Wt(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Je(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Ge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dt(n){return qe(n)||Je(n)||Qe(n)||Ge()}function Xe(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var r=e.call(n,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function Ye(n){var t=Xe(n,"string");return typeof t=="symbol"?t:t+""}function Qe(n,t){if(n){if(typeof n=="string")return ct(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?ct(n,t):void 0}}var V=Symbol("E"),xt=function(n){return n[n.Fork=0]="Fork",n[n.Append=1]="Append",n}(xt||{}),Gt=function(){function n(){var t=this,e,r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.max,u=o===void 0?0:o,h=i.useStorage,l=h===void 0?!1:h,c=i.storageKey,s=c===void 0?"_def_history_stack":c,d=i.mode,a=d===void 0?0:d,f=i.storageProvider,p=i.onStepChange,v=i.onHistorySizeChange,y=i.onHistoryOut;if(Ue(this,n),this.step=0,this.size=0,this.max=40,this.list=[],this.index=0,this.End=V,this.isActive=!1,this.max=u,this.mode=a,l!==!1&&(f||s)&&(l=!0),l&&(this.storageProvider=f||{read:function(){var g=localStorage.getItem(s);return g?JSON.parse(g):[]},write:function(g){localStorage.setItem(s,JSON.stringify(g))}}),p&&(this.osc=function(){return p(t.step)}),v&&(this.ohsc=function(){return v(t.size)}),this.oho=y,(e=this.osc)===null||e===void 0||e.call(this),(r=this.ohsc)===null||r===void 0||r.call(this),l){var m=this.storageProvider.read();m instanceof Promise?m.then(function(g){t.useCache(g)}):this.useCache(m)}}return Ze(n,[{key:"useCache",value:function(t){t.length!==0&&this.push.apply(this,Dt(t))}},{key:"setMax",value:function(t){this.max=t}},{key:"setStep",value:function(t){var e;this.step=t,(e=this.osc)===null||e===void 0||e.call(this)}},{key:"setHistoryIndex",value:function(t){var e;this.isActive||(this.isActive=!0),this.index=t,this.size=t,(e=this.ohsc)===null||e===void 0||e.call(this)}},{key:"back",value:function(){var t,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(!this.canBack(e))return e>1&&(this.setStep(this.step-this.index),this.setHistoryIndex(0)),this.End;this.setStep(this.step-e),this.setHistoryIndex(this.index-e);var r=this.list[this.index];return(t=this.oho)===null||t===void 0||t.call(this,r),r}},{key:"canBack",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.index-t>=0}},{key:"first",value:function(){return this.list.length===0?V:(this.setStep(this.step-this.index),this.setHistoryIndex(0),this.list[0])}},{key:"last",value:function(){return this.list.length===0?V:(this.setStep(this.step+this.list.length-this.index),this.setHistoryIndex(this.list.length-1),this.list[this.list.length-1])}},{key:"forward",value:function(){var t,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(!this.canForward(e))return e>1&&(this.setStep(this.step+this.list.length-this.index),this.setHistoryIndex(this.list.length-1)),this.End;this.setStep(this.step+e),this.setHistoryIndex(this.index+e);var r=this.list[this.index];return(t=this.oho)===null||t===void 0||t.call(this,r),r}},{key:"isEnd",value:function(t){return t===V}},{key:"canForward",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.index+t<this.list.length}},{key:"pop",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,e=this.list.length;if(e<=t){var r=Dt(this.list);return this.clear(),r}var i=e-t,o=this.list.splice(i),u=this.list.length;return u<this.index&&(this.setHistoryIndex(u),this.setStep(this.step-(this.index-u))),o}},{key:"push",value:function(){var t,e=this.list.length;this.index<e&&(this.step++,this.index++,this.mode===0&&this.list.splice(this.index));var r=arguments.length,i=0,o=r;this.max>0&&e+r>this.max&&(i=e+r-this.max,o=r-i),(t=this.list).push.apply(t,arguments),i&&this.list.splice(0,i),this._onListChange(),o&&(this.mode===1?this.setHistoryIndex(this.list.length):this.setHistoryIndex(this.index+o)),this.mode===1?this.setStep(this.list.length):this.setStep(this.step+o),this.isActive&&(this.isActive=!1)}},{key:"clear",value:function(){this.list=[],this._onListChange(),this.setHistoryIndex(0),this.setStep(0),this.isActive=!1}},{key:"replace",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.index;typeof this.list[e]>"u"||(this.list[e]=t,this._onListChange())}},{key:"isLatest",get:function(){return this.index===this.list.length-1}},{key:"_onListChange",value:function(){var t;(t=this.storageProvider)===null||t===void 0||t.write(this.list)}},{key:"current",value:function(){return this.list[this.index]}}])}();Gt.Mode=xt;function ht(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}function tn(n){if(Array.isArray(n))return ht(n)}function Y(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function Mt(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,an(r.key),r)}}function Q(n,t,e){return t&&Mt(n.prototype,t),e&&Mt(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function en(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function nn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rn(n){return tn(n)||en(n)||un(n)||nn()}function on(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var r=e.call(n,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function an(n){var t=on(n,"string");return typeof t=="symbol"?t:t+""}function N(n){"@babel/helpers - typeof";return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(n)}function un(n,t){if(n){if(typeof n=="string")return ht(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?ht(n,t):void 0}}function wt(n){return!!(n!=null&&n.__isRef)}var ft=null;function sn(n){return ft=n,function(){ft=null}}function Xt(){return ft}var ln=function(){function n(t,e){var r=this;Y(this,n),this.__isComputed=!0,this._dirty=!1,this._listeners=[],this._clearSub=[],this._compute=t,this._set=e;var i=sn(function(o,u){var h=function(){if(r._dirty=!0,r._listeners.length>0){var c=r._value,s=r.value;r._listeners.forEach(function(d){d(s,c)})}},l=typeof u=="string"?o.$sub(u,h):o.sub(h);r._clearSub.push(l)});this._refreshValue(),i()}return Q(n,[{key:"value",get:function(){var t;return this._dirty&&this._refreshValue(),te(this),(t=Xt())===null||t===void 0||t(this),this._value},set:function(t){if(!this._set){console.warn("Computed not have set property");return}this._set(t)}},{key:"_refreshValue",value:function(){this._value=this._compute(),this._dirty=!1}},{key:"sub",value:function(t){var e=this;return this._listeners.push(t),function(){return e.unsub(t)}}},{key:"unsub",value:function(t){var e=this._listeners.indexOf(t);return e!==-1?(this._listeners.splice(e,1),!0):!1}},{key:"destroy",value:function(){this._listeners=[],this._clearSub.forEach(function(t){return t()}),this._clearSub=[]}}])}();function cn(n,t){return tt(n)?n:new ln(n,t)}function tt(n){return!!(n!=null&&n.__isComputed)}function Yt(n){return typeof n=="function"||tt(n)}function Qt(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e={},r={},i={$sub:function(s,d){return e[s]||(e[s]=[]),e[s].push(d),function(){i.$unsub(s,d)}},$unsub:function(s,d){if(e[s]){if(typeof d>"u")return delete e[s],!0;var a=e[s].indexOf(d);return a===-1?!1:(e[s].splice(a,1),!0)}},$get:function(s){return r[s]}},o={},u=function(s){var d=n[s];r[s]=d,o[s]={get:function(){var a;te(i,s),(a=Xt())===null||a===void 0||a(i,s);var f=r[s];return f},set:function(a){var f,p=r[s];r[s]=a,(f=e[s])===null||f===void 0||f.forEach(function(v){v(a,p)})}},i[s]=d};for(var h in n)u(h);Object.defineProperties(i,o);var l=function(s){i[s]=function(){for(var d=arguments.length,a=new Array(d),f=0;f<d;f++)a[f]=arguments[f];return t[s].apply(i,a)}};for(var c in t)l(c);return i}var z={};function te(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",e;tt(n)||wt(n)?(t="value",e=function(r){return n.sub(r)}):e=function(r){return n.$sub(t,r)},Object.assign(z,{set:function(r){n[t]=r},get:function(){return n[t]},sub:e})}function hn(n,t){if(!z)throw new Error("Bind 传入参数错误");(tt(t)||wt(t))&&(t=t.value);var e=z.get,r=z.set,i=z.sub;if(e()!==t)throw new Error("Bind 传入参数错误");var o=n.el,u="string";if(o.tagName==="INPUT"){var h=n.attr("type");h==="number"||h==="range"?u="number":(h==="radio"||h==="checkbox")&&(u="boolean")}var l=function(){if(u==="boolean")return o.checked;var a=n.value();return u==="number"?parseFloat(a):a},c=function(a){if(u==="boolean"){o.checked=a;return}n.value(a)},s=!1,d=function(){s=!0,r(l()),s=!1};c(e()),n.on("input",function(){d()}),n.on("change",function(){d()}),i(function(a){s||c(a)})}function O(n,t){if(wt(n))n.sub(function(){t(n.value,!1)}),t(n.value,!0);else if(Yt(n)){var e=cn(n);e.sub(function(){t(e.value,!1)}),t(e.value,!0)}else return t(n,!0),!1;return!0}var ee=function(){function n(t){Y(this,n),this.__ld_type=et.Text,this.el=document.createTextNode(""),typeof t<"u"&&this.text(t)}return Q(n,[{key:"text",value:function(t){var e=this;return O(t,function(r){return e.el.textContent=r}),this}},{key:"mounted",value:function(t){return this.__mounted=t,this}}])}(),fn=function(){function n(){Y(this,n),this.__ld_type=et.Frag,this.children=[],this.el=document.createDocumentFragment()}return Q(n,[{key:"append",value:function(){for(var t=this,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return kt(r,function(o,u){t.children.push(u),t.el.appendChild(o)}),this}},{key:"mounted",value:function(t){return this.__mounted=function(e){e.children.forEach(function(r){var i;(i=r.__mounted)===null||i===void 0||i.call(r,r)}),t(e)},this}}])}(),et=function(n){return n[n.Dom=0]="Dom",n[n.Text=1]="Text",n[n.Frag=2]="Frag",n}(et||{});function kt(n,t){n.forEach(function(e){var r;if(Array.isArray(e)){kt(e,t);return}var i=e;Yt(i)?(i=new ee(i),i=i.el):typeof i.__ld_type=="number"?i=i.el:e instanceof HTMLElement||(i=document.createTextNode("".concat(e))),t(i,e),(r=e.__mounted)===null||r===void 0||r.call(e,e)})}var dn=/(width$)|(height$)|(top$)|(bottom$)|(left$)|(right$)|(^margin)|(^padding)|(font-?size)/i,zt=/!important$/,vn=/^[0-9]+$/;function pn(n,t){n=yn(n);var e="";return zt.test(t)&&(e="important",t=t.replace(zt,"")),vn.test(t)&&dn.test(n)&&(t="".concat(t,"px")),{cssKey:n,cssValue:t,important:e}}function yn(n){for(var t=n.length,e="",r=0;r<t;r++){var i=n[r],o=i.charCodeAt(0);o>=65&&o<=90?e+="-".concat(i.toLowerCase()):e+=i}return e}var mn=["a","div","h1","h2","h3","h4","h5","h6","button","canvas","code","pre","table","th","td","tr","video","audio","ol","select","option","p","i","iframe","img","input","label","ul","li","span","textarea","form","br","tbody","object","progress","section","slot","small","strong","sub","summary","sup","template","title","var","style","meta","head","link","svg","script"];function ne(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;if(t){var r=e.querySelector(n);if(r)return new $(r);throw new Error("Element is not exist"+n)}for(var i=e.querySelectorAll(n),o=[],u=0;u<i.length;u++)o.push(new $(i[u]));return o}var w=function(){var n=function(e){return new $(e)},t={frag:{get:function(){return new fn}},text:{get:function(){var e=function(r){return new ee(r)};return e.text=e,e}}};return mn.forEach(function(e){t[e]={get:function(){return n(e)}}}),Object.defineProperties(n,t),n}();function gn(n,t){var e,r=t;typeof t=="string"?r=ne(t,!0):t instanceof HTMLElement&&(r=new $(t)),Array.isArray(n)?(e=r).append.apply(e,rn(n)):r.append(n)}var $=function(){function n(t){Y(this,n),this.__ld_type=et.Dom,this.__xr_funcs={},this.el=typeof t=="string"?document.createElement(t):t}return Q(n,[{key:"_ur",value:function(t,e){var r=this;return typeof e>"u"?this.el[t]:(O(e,function(i){return r.el[t]=i}),this)}},{key:"class",value:function(t){return this._ur("className",t)}},{key:"id",value:function(t){return this._ur("id",t)}},{key:"addClass",value:function(t){return this.el.classList.add(t),this}},{key:"removeClass",value:function(t){return this.el.classList.remove(t),this}},{key:"hasClass",value:function(t){var e;return(e=this.el)===null||e===void 0?void 0:e.classList.contains(t)}},{key:"toggleClass",value:function(t,e){var r;return!!((r=this.el)!==null&&r!==void 0&&r.classList.toggle(t,e))}},{key:"remove",value:function(){var t;return(t=this.el)===null||t===void 0||t.remove(),this}},{key:"text",value:function(t){return typeof t>"u"?this.el.innerText:this._ur("innerText",t)}},{key:"mounted",value:function(t){return this.__mounted=t,this}},{key:"attr",value:function(t,e){var r=this;if(N(t)==="object"){for(var i in t)this.attr(i,t[i]);return this}return typeof e>"u"?this.el.getAttribute(t)||"":(O(e,function(o){return r.el.setAttribute(t,o)}),this)}},{key:"removeAttr",value:function(t){return this.el.removeAttribute(t),this}},{key:"func",value:function(t,e){return typeof e>"u"?this.__xr_funcs[t]:(this.__xr_funcs[t]=e,this)}},{key:"data",value:function(t,e){var r=this;if(N(t)==="object"){for(var i in t)this.data(i,t[i]);return this}if(typeof e>"u"){var o;return((o=this.el.__xr_data)===null||o===void 0?void 0:o[t])||null}return this.el.__xr_data||(this.el.__xr_data={}),O(e,function(u){return r.el.__xr_data[t]=u}),this}},{key:"style",value:function(t,e){var r=this.el.style;if(typeof e<"u")return O(e,function(o){var u=pn(t,o),h=u.important,l=u.cssValue,c=u.cssKey;r.setProperty(c,l,h)}),this;if(typeof t=="string")return r[t];for(var i in t)this.style(i,t[i]);return this}},{key:"value",value:function(t){return this._ur("value",t)}},{key:"html",value:function(t){return this._ur("innerHTML",t)}},{key:"outerHtml",value:function(t){var e=this;return typeof t>"u"?this.el.outerHTML:(O(t,function(r){e.html(r),e.el=e.el.children[0]}),this)}},{key:"child",value:function(t){var e=this.el.children[t];return e?new n(e):null}},{key:"children",value:function(){for(var t=this.el.children.length,e=[],r=0;r<t;r++)e.push(this.child(r));return e}},{key:"click",value:function(t){return this.on("click",t)}},{key:"on",value:function(t,e){if(N(t)==="object"){for(var r in t)this.on(r,t[r]);return this}var i=this.el;if(typeof e=="function")this.el.addEventListener(t,e);else{var o,u=function(h){var l;e.self&&h.target!==i||(e.stop&&h.stopPropagation(),e.prevent&&h.preventDefault(),e.once&&i.removeEventListener(t,u,e.capture),(l=e.listener)===null||l===void 0||l.call(e,h))};i.addEventListener(t,u,(o=e.capture)!==null&&o!==void 0?o:!1)}return this}},{key:"append",value:function(){for(var t=this,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return kt(r,function(o){t.el.appendChild(o)}),this}},{key:"ref",value:function(t){return t(this),this}},{key:"hide",value:function(){return this.display("none")}},{key:"display",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"block";return this.style("display",t)}},{key:"show",value:function(t){var e=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";return O(t,function(i){e.display(i?r:"none")}),this}},{key:"query",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return ne(t,e,this.el)}},{key:"src",value:function(t){return this._ur("src",t)}},{key:"parent",value:function(){return this.el.parentElement}},{key:"empty",value:function(){return this.html("")}},{key:"name",value:function(t){return this.attr("__xr_name",t)}},{key:"find",value:function(t){return this.query('[__xr_name="'.concat(t,'"]'),!0)}},{key:"type",value:function(t){return this.attr("type",t)}},{key:"bind",value:function(t){return hn(this,t),this}}])}();function Bt(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}function Nt(n,t){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=bn(n))||t&&n&&typeof n.length=="number"){e&&(n=e);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,u=!0,h=!1;return{s:function(){e=e.call(n)},n:function(){var l=e.next();return u=l.done,l},e:function(l){h=!0,o=l},f:function(){try{u||e.return==null||e.return()}finally{if(h)throw o}}}}function bn(n,t){if(n){if(typeof n=="string")return Bt(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Bt(n,t):void 0}}var re="  ";function xn(n){re=n}function wn(n){kn(this,n,re)}function kn(n,t,e){var r=e.length;if(t.code==="Tab"){t.preventDefault();var i=Ft(n),o=i.startLineIndex,u=i.start,h=i.end,l=i.lineText.split(`
`);if(t.shiftKey){var c=!0,s=Nt(l),d;try{for(s.s();!(d=s.n()).done;){var a=d.value;a.startsWith(e)?(n.selectionStart=o,n.selectionEnd=o+r,document.execCommand("delete",!1),c&&a.startsWith(e+e)&&(u-=r),h-=r,o+=a.length-r+1):o+=a.length+1,c=!1}}catch(S){s.e(S)}finally{s.f()}console.log(u,h),n.selectionStart=u,n.selectionEnd=h;return}if(l.length===1){it(e);return}u+=r;var f=Nt(l),p;try{for(f.s();!(p=f.n()).done;){var v=p.value;n.selectionStart=n.selectionEnd=o,it(e),o+=r+v.length+1,h+=r}}catch(S){f.e(S)}finally{f.f()}n.selectionStart=u,n.selectionEnd=h}else if(t.code==="Enter"&&!t.ctrlKey){for(var y=Ft(n),m=y.lineText.split(`
`)[0],g=`
`,x=0;m.substring(x,x+r)===e;)g+=e,x+=r;x>0&&(it(g),t.preventDefault())}}function it(n){n&&document.execCommand("insertText",!1,n)}function Ft(n){var t=n.selectionStart,e=n.selectionEnd,r="",i=n.value;r=i.substring(t,e);var o=i.substring(0,t),u=o.lastIndexOf(`
`),h=u+1;return{start:t,end:e,text:r,lineText:i.substring(h,e),line:r.split(`
`).length,startLineIndex:h}}(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(".style-text{font-family:Menlo,Monaco,Courier New,monospace;font-size:14px;font-kerning:none;white-space:pre;line-height:16px;box-sizing:border-box}.full-parent{position:absolute;top:0;left:0;width:100%;height:100%}.editor-textarea::-webkit-scrollbar,.web-term-container::-webkit-scrollbar{width:5px;cursor:pointer;height:5px}.editor-textarea::-webkit-scrollbar-button,.web-term-container::-webkit-scrollbar-button{display:none}.editor-textarea::-webkit-scrollbar-track,.web-term-container::-webkit-scrollbar-track{display:none}.editor-textarea::-webkit-scrollbar-thumb,.web-term-container::-webkit-scrollbar-thumb{background-color:#777;cursor:pointer}.editor-textarea ::selection,.web-term-container ::selection{background-color:var(--color);color:var(--background)}.web-term-container{position:relative;font-family:Menlo,Monaco,Courier New,monospace;font-size:14px;font-kerning:none;white-space:pre;line-height:16px;box-sizing:border-box;background-color:var(--background);color:var(--color);cursor:text}.web-term-container *{font-family:Menlo,Monaco,Courier New,monospace;font-size:14px;font-kerning:none;white-space:pre;line-height:16px;box-sizing:border-box}.editor-cursor{position:absolute;z-index:2;height:16px;background-color:var(--background);color:var(--color)}.editor-cursor.cursor-focus{background-color:var(--color);color:var(--background)}.editor-cursor .editor-cursor-border{position:absolute;top:0;left:0;width:100%;height:100%;border:1px solid var(--color)}.editor-cursor .editor-cursor-text{position:absolute;top:0;left:0;width:100%;height:100%}.editor-textarea{color:var(--color)}.term-editor-title{color:var(--color);opacity:.7}.term-display-box>div,.term-below-box>div{padding:2px 0;word-break:break-all;white-space:pre-wrap;color:var(--color)}.term-display-box>div a,.term-below-box>div a{opacity:.7}.term-below-box>div{opacity:.7}")),document.head.appendChild(n)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();function dt(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}function _n(n){if(Array.isArray(n))return dt(n)}function Sn(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _t(n,t,e){return t=q(t),$n(n,ie()?Reflect.construct(t,e||[],q(n).constructor):t.apply(n,e))}function H(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function Vt(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,oe(r.key),r)}}function I(n,t,e){return t&&Vt(n.prototype,t),e&&Vt(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Cn(n,t,e){return(t=oe(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function q(n){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},q(n)}function St(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&vt(n,t)}function ie(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ie=function(){return!!n})()}function En(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Tn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rt(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function U(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Rt(Object(e),!0).forEach(function(r){Cn(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Rt(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}function $n(n,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sn(n)}function vt(n,t){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},vt(n,t)}function Pn(n){return _n(n)||En(n)||On(n)||Tn()}function jn(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var r=e.call(n,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function oe(n){var t=jn(n,"string");return typeof t=="symbol"?t:t+""}function On(n,t){if(n){if(typeof n=="string")return dt(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?dt(n,t):void 0}}var An=function(){function n(t,e){var r=this;H(this,n),this.pushedCurrent=!1,this.provider=e,this.history=new Gt({max:t,mode:xt.Append});var i=e.read();i instanceof Promise?i.then(function(o){r._initHistory(o)}):this._initHistory(i)}return I(n,[{key:"_initHistory",value:function(t){var e,r=JSON.parse(t);(e=this.history).push.apply(e,Pn(r))}},{key:"up",value:function(t){if(this.history.isActive||(this.push(t),this.history.back(),this.pushedCurrent=!0),this.history.canBack()){var e=this.history.back();return e}else return null}},{key:"down",value:function(){return this.history.canForward()?this.history.forward():null}},{key:"checkLatest",value:function(t){this.history.isLatest&&(this.history.replace(t),this.save())}},{key:"push",value:function(t){this.pushedCurrent&&(this.history.pop(),this.pushedCurrent=!1),this.history.push(t),this.save()}},{key:"save",value:function(){this.provider.write(JSON.stringify(this.history.list))}},{key:"clear",value:function(){this.pushedCurrent=!1,this.history.clear(),this.save()}}])}();function Kt(){var n=navigator.userAgent;return/macintosh|mac os x/i.test(n)}function pt(n){return Kt()&&n.metaKey||!Kt()&&n.ctrlKey}function Ln(n){var t=!1;return n.on("compositionstart",function(){t=!0}),n.on("compositionend",function(){t=!1}),function(){return t}}function ae(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return n instanceof HTMLElement?new $(n):n instanceof $?n:typeof n=="string"?w.div[t?"html":"text"](n+e):w.div[t?"html":"text"](n.toString()+e)}var Hn=function(){function n(){H(this,n),this.container=w.div.class("term-display-box").on("click",function(t){t.stopPropagation()})}return I(n,[{key:"pushContent",value:function(t,e){this.container.append(ae(t,e,`
`))}}])}(),qt="web-term-container",In=2,ue={FullParent:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}};function Wn(n){if(!n)return!1;var t=n.charCodeAt(0);return t>=128}var D=16,se=function(n){function t(e){var r,i=e.header,o=i===void 0?"":i,u=e.paddingTop,h=u===void 0?5:u,l=e.paddingLeft,c=l===void 0?5:l,s=e.size,d=s===void 0?"full":s,a=e.mode,f=a===void 0?"inline":a,p=e.tab,v=p===void 0?"  ":p;H(this,t),r=_t(this,t),r.SingleCharWidth=9,r.MultiCharWidth=15,r.wrapLine=!0,r.store=Qt({cx:0,cy:0}),r.header="",r._prevHeader="",r._prevHeaderWidth=0,r._pasteTimer=null,r._prevPos={x:-1,y:-1},r._isShowCursor=!1,r.size=d,r.mode=f,xn(v),r.paddingTop=h,r.paddingLeft=c;var y=w.canvas;return r.ctx=y.el.getContext("2d"),r.ctx.font="14px courier-new, courier, monospace",r.SingleCharWidth=r.measureTextWidth("a"),r.MultiCharWidth=r.measureTextWidth("一"),r.header=o,r.render(),r._monitorStart(),r}return St(t,n),I(t,[{key:"value",get:function(){var e=this.fullValue,r=this.header.length;return r?e.substring(r):e}},{key:"fullValue",get:function(){return this.textarea.value()}},{key:"beforeValue",get:function(){var e=this.fullValue,r=this.header.length,i=this.textarea.el.selectionStart;return typeof i=="number"&&i>0?e.substring(r,i):e.substring(r)}},{key:"headerWidth",get:function(){var e=this.header;return e!==this._prevHeader&&(this._prevHeader=e,this._prevHeaderWidth=this.measureTextWidth(e)),this._prevHeaderWidth}},{key:"_monitorStart",value:function(){var e=this;setTimeout(function(){e.textarea.el.clientWidth?e.relocateCursorPosition():e._monitorStart()},100)}},{key:"render",value:function(){var e=this.size==="full";this.container=w.div.style({position:"relative",height:e?"100%":"".concat(D+2*this.paddingTop,"px")}).append(this.cursor=w.div.class("editor-cursor").append(w.div.class("editor-cursor-border"),this.cursorText=w.div.class("editor-cursor-text")),this.textarea=w.textarea.class("editor-textarea").value(this.header).style(U(U({},ue.FullParent),{},{padding:"".concat(this.paddingTop,"px ").concat(this.paddingLeft,"px"),backgroundColor:"transparent",border:"none",outline:"none",resize:"none",zIndex:"1",caretColor:"transparent"}))),this.wrapLine&&this.textarea.style({wordBreak:"break-all",whiteSpace:"pre-wrap"}),this.initEvents()}},{key:"initEvents",value:function(){var e=this,r=!1,i=this.textarea.el,o=function(s){return s.code==="Backspace"||s.code==="Enter"},u=Ln(this.textarea),h=null,l=this.compatSelChange();this.textarea.on("keydown",function(s){if(!u()){if(e.mode==="inline"){if(s.code==="Enter")if(pt(s))e.pushText(`
`);else{s.preventDefault(),e.emit("key","Enter");return}else if(s.code==="ArrowUp"||s.code==="ArrowDown"||s.code==="Tab"){s.preventDefault(),e.emit("key",s.code);return}}if(s.code==="Tab"&&i.selectionStart!==i.selectionEnd&&e.showCursor(!1),wn.call(i,s),o(s)&&(r=!0),s.code==="Backspace"){var d=e.getCursorPosition(),a=d.x,f=d.y,p=d.isRange;f===0&&a<=e.headerWidth&&!p&&s.preventDefault()}pt(s)&&s.code==="KeyZ"&&(clearTimeout(h),h=setTimeout(function(){e.relocateCursorPosition()},50))}}).on("keyup",function(s){u()||o(s)&&(r=!1)}).on("paste",function(){e._pasteTimer=setTimeout(function(){e.relocateCursorPosition()},50)}).on("input",function(s){if(s.preventDefault(),r&&e.relocateCursorPosition(),e.size==="auto"){var d=e._countContentHeight(e.fullValue,!0);d!=i.clientHeight&&e.textarea.style("height","".concat(d,"px"))}e.emit("input")}).on("selectionchange",function(){l&&(l(),l=null),e._onSelectionChange()}).on("scroll",function(){e.relocateCursorPosition()}).on("focus",function(){e.cursor.addClass("cursor-focus")}).on("blur",function(){e.cursor.removeClass("cursor-focus")}).on("cut",function(){var s=e.textarea.el;s.selectionStart!==s.selectionEnd&&e.relocateCursorPosition()});var c=i.clientWidth;globalThis.addEventListener("resize",function(){i.clientWidth!==c&&(c=i.clientWidth,e.relocateCursorPosition())})}},{key:"_countContentHeight",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._countContentSize(e,r).height}},{key:"_countContentSize",value:function(e){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=e.split(`
`),u=0,h=o.map(function(l){var c=r.countSingleLineInfo(l);return u+=c.length*D,c});return{lines:h,height:u+(i?2*this.paddingTop:0)}}},{key:"countSingleLineInfo",value:function(e){var r=this,i=this._getLineBoxWidth();if(i<=0)return[{content:e,width:this.measureTextWidth(e)}];var o=Math.floor(i/this.MultiCharWidth);if(e.length<=o)return[{content:e,width:this.measureTextWidth(e)}];for(var u=[],h=e.length,l=0,c=l+o,s=function(){var y=e.substring(l,c);return{content:y,width:r.measureTextWidth(y)}};h>o;){var d=s(),a=d.content,f=d.width,p=void 0,v=void 0;do{if(p=a,v=f,c>=e.length){c++;break}a+=e[c],f=this.measureTextWidth(a),c++}while(f<=i);u.push({content:p,width:v}),l=c-1,c=l+o,h-=p.length}return l<e.length&&u.push(s()),u}},{key:"_onSelectionChange",value:function(){var e=this.textarea.el;if(e.selectionStart===e.selectionEnd)this.relocateCursorPosition();else{if(e.clientWidth===0)return;var r=this.header.length;e.selectionStart<r&&(e.selectionStart=r);var i=e.value.length;e.selectionEnd>i&&(e.selectionEnd=i)}}},{key:"compatSelChange",value:function(){var e=this,r=function(){var i=e.textarea.el;document.activeElement===i&&e._onSelectionChange()};return document.addEventListener("selectionchange",r),function(){return document.removeEventListener("selectionchange",r)}}},{key:"measureTextWidth",value:function(e){return e?this.ctx.measureText(e).width:0}},{key:"_getLineBoxWidth",value:function(){return this.textarea.el.clientWidth-2*this.paddingLeft}},{key:"getCursorPosition",value:function(){var e=this.textarea.el,r=e.selectionStart,i=e.selectionEnd,o=e.value.substring(0,r),u=this._getLineBoxWidth(),h=e.value[r]||"",l=0,c=0;if(this.wrapLine){var s,d=this._countContentSize(o);c=d.height-D,l=((s=d.lines.pop())===null||s===void 0||(s=s.pop())===null||s===void 0?void 0:s.width)||0}else l=this.measureTextWidth(o),c=(o.split(`
`).length-1)*D;var a=Wn(h)?this.MultiCharWidth:this.SingleCharWidth;return l+a>u&&(l=0,c+=D),(this._prevPos.x!==l||this._prevPos.y!==c)&&(Object.assign(this._prevPos,{x:l,y:c}),this.emit("cursor-change",{x:l,y:c,word:h,wordWidth:a,beforeValue:this.beforeValue,value:this.value})),{x:l,y:c,isRange:r!=i,word:h,wordWidth:a}}},{key:"showCursor",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._isShowCursor!==e&&(this.cursor.style("visibility",e?"visible":"hidden"),this._isShowCursor=e)}},{key:"relocateCursorPosition",value:function(){clearTimeout(this._pasteTimer);var e=this.textarea.el;this.showCursor();var r=this.getCursorPosition(),i=r.x,o=r.y,u=r.word,h=r.wordWidth,l=i;if(o===0&&i<this.headerWidth){var c=this.header.length;e.setSelectionRange(c,c),l=this.headerWidth}this.cursor.style({left:"".concat(l+this.paddingLeft,"px"),top:"".concat(o+this.paddingTop-e.scrollTop,"px"),width:"".concat(h,"px")}),this.cursorText.text(u)}},{key:"focus",value:function(){this.textarea.el.focus()}},{key:"pushText",value:function(e){var r=this.textarea.el;r.selectionStart=r.selectionEnd=r.value.length,this.insertText(e)}},{key:"insertText",value:function(e){e&&document.execCommand("insertText",!1,e)}},{key:"replaceText",value:function(e){this.clearContent(!1),this.pushText(e),this.relocateCursorPosition()}},{key:"clearContent",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,r=this.textarea.el,i=r.value,o=!i.startsWith(this.header),u=this.header.length;r.selectionStart=o?0:u,r.selectionEnd=i.length+1,u!==i.length&&(document.execCommand("delete",!1),o&&this.insertText(this.header),e&&this.relocateCursorPosition())}},{key:"setCursorToHead",value:function(){var e=this.textarea.el;e.selectionStart=e.selectionEnd=this.header.length}}])}(bt.Eveit),Dn=function(n){function t(e,r){var i;return H(this,t),i=_t(this,t),i.editor=new se({mode:"full",paddingLeft:0,paddingTop:0}),i.container=w.div.style(U(U({},ue.FullParent),{},{padding:r.padding,position:"relative",zIndex:100,flexDirection:"column"})).append(i.title=w.div.class("term-editor-title").text(""),i.editor.container.style({flex:"1",height:"auto"})).show(function(){return e.showEditor},"flex"),i.container.on("click",function(o){o.stopPropagation()}),i.container.on("keydown",function(o){if(o.code==="KeyS"&&pt(o)){var u=i.editor.value;i.editor.clearContent(),i.emit("edit-done",u),o.preventDefault()}o.code==="Escape"&&(i.editor.clearContent(),i.emit("edit-cancel"))}),i}return St(t,n),I(t,[{key:"vi",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this.editor.textarea.el.focus(),this.editor.replaceText(e),this.title.style({paddingBottom:r?"5px":0})[i?"html":"text"](r)}}])}(bt.Eveit),Mn=function(){function n(){H(this,n),this.container=w.div.class("term-below-box").on("click",function(t){t.stopPropagation()})}return I(n,[{key:"write",value:function(t,e){var r=this.container.children();r.length>0&&r[r.length-1].remove(),this.push(t,e)}},{key:"push",value:function(t,e){this.container.append(ae(t,e,`
`))}},{key:"clear",value:function(){this.container.empty()}}])}();function zn(){var n="_web_term_ui_history;";return{read:function(){return localStorage.getItem(n)||"[]"},write:function(t){return localStorage.setItem(n,t),!0}}}var Bn=function(n){function t(){var e,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.title,o=i===void 0?"":i,u=r.titleHtml,h=u===void 0?!0:u,l=r.historyMax,c=l===void 0?100:l,s=r.storageProvider,d=s===void 0?zn():s,a=r.container,f=r.header,p=r.theme,v=r.style,y=v===void 0?{}:v;if(H(this,t),e=_t(this,t),e.style={padding:5,color:"#fff",background:"#000"},e.store=Qt({showEditor:!1}),e.theme="dark",e.title=o,e.history=new An(c,d),Object.assign(e.style,y),e.editor=new Dn(e.store,{padding:e.style.padding}),e.input=new se({paddingTop:In,paddingLeft:0,header:f,size:"auto",mode:"inline"}),e.display=new Hn,e.below=new Mn,o&&e.display.pushContent(o,h),!a)e.container=w.div.class(qt).style({position:"fixed",top:0,left:0,width:"100%",height:"100%"}),gn(e.container,"body");else{if(typeof a=="string"){var m=document.querySelector(a);if(!m)throw new Error("Container not exists");e.container=new $(m)}else e.container=new $(a);e.container.addClass(qt)}return e.initEvents(),p?e.setTheme(p):e.setColor(y),e.render(),e}return St(t,n),I(t,[{key:"value",get:function(){return this.input.value}},{key:"beforeValue",get:function(){return this.input.beforeValue}},{key:"header",get:function(){return this.input.header}},{key:"initEvents",value:function(){var e=this;this.input.on("key",function(i){switch(i){case"Enter":{var o=e.input.value;o&&e.history.push(o),e.emit("enter",o)}break;case"ArrowDown":{var u=e.history.down();typeof u=="string"&&e.input.replaceText(u)}break;case"ArrowUp":{var h=e.history.up(e.input.value);typeof h=="string"?e.input.replaceText(h):e.input.setCursorToHead()}break;case"Tab":e.emit("tab",e.input.beforeValue);break}}),this.input.on("input",function(){e.history.checkLatest(e.input.value),e.emit("input",e.value,e.input.beforeValue)}),this.container.on("click",function(){e.input.focus()});var r=function(){e.store.showEditor=!1,e.input.focus()};this.editor.on("edit-done",function(i){r(),e.emit("edit-done",i)}),this.editor.on("edit-cancel",function(){r(),e.emit("edit-cancel")}),this.editor.editor.on("cursor-change",function(i){e.emit("edit-cursor-change",i)}),this.input.on("cursor-change",function(i){e.emit("cursor-change",i)})}},{key:"render",value:function(){var e=this;this.container.style({overflow:function(){return e.store.showEditor?"hidden":"auto"}}).append(this.mainContainer=w.div.style("padding",this.style.padding).append(this.display.container,this.input.container,this.below.container).show(function(){return!e.store.showEditor}),this.editor.container)}},{key:"setTheme",value:function(e){var r="#fff",i="#000",o=e==="light";this.theme=e,this.setColor({background:o?r:i,color:o?i:r})}},{key:"setColor",value:function(e){Object.assign(this.style,e),this.container.style({"--background":this.style.background,"--color":this.style.color})}},{key:"clearInputHistory",value:function(){this.history.clear()}},{key:"write",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.display.pushContent(this.input.fullValue,r),e&&this.display.pushContent(e,r),this.input.clearContent(),this.scrollToBottom()}},{key:"insertEdit",value:function(e){this.editor.editor.insertText(e)}},{key:"replaceEdit",value:function(e){this.editor.editor.replaceText(e)}},{key:"pushEdit",value:function(e){this.editor.editor.pushText(e)}},{key:"vi",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this.store.showEditor=!0,this.editor.vi(e,r,i)}},{key:"clearTerminal",value:function(){this.display.container.empty(),this.input.clearContent()}},{key:"newLine",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.write("",e)}},{key:"setHeader",value:function(e){this.input.header=e}},{key:"scrollToBottom",value:function(){this.container.el.scrollTop=this.container.el.scrollHeight}},{key:"focus",value:function(){this.input.focus()}},{key:"writeBelow",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.below.write(e,r),this.scrollToBottom()}},{key:"pushBelow",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.below.push(e,r),this.scrollToBottom()}},{key:"clearBelow",value:function(){this.below.clear()}}])}(bt.Eveit);const b=new Bn({title:`This is a Demo. Type "help" to get Help.
`,container:"#container",header:"/ admin$ ",style:{padding:10}});b.on("enter",n=>{if(!n)b.newLine();else if(n==="vi"||n.startsWith("vi "))b.vi(`test
11`,`${n.substring(3)} "Ctrl/Cmd + s" to Save, "Esc" to Exit`);else if(n==="clear")b.clearTerminal();else if(n==="help")Nn();else if(n==="progress")Fn();else if(n.startsWith("header"))b.setHeader(`/ ${n.replace("header","").trim()}$ `),b.write(`SetHeader "${n}"`);else if(n==="theme"){const t=b.theme==="dark"?"light":"dark";b.setTheme(t),b.write(`Set theme to "${t}"`)}else b.write(`Exec "${n}"`)});b.on("edit-done",n=>{b.write(`Edit Save: ${n}`)});b.on("tab",()=>{b.insertEdit("[test]")});function Nn(){b.write(["vi      : Open vi Editor","clear   : Clear Terminal","progress: Mock Progress Bar",'header  : "header <name>" to Set Header',"theme   : Toggle theme between dark and light"].join(`
`),!1)}function Fn(){let n=0;const t=Date.now(),e=setInterval(()=>{n+=Math.round(Math.random()*10),n>100&&(n=100,clearInterval(e)),b.writeBelow(`Progressing...[${n}%]`),n===100&&(b.clearBelow(),b.write(`Progress Done in ${Date.now()-t}ms!`))},100)}document.getElementById("code").appendChild(Re({code:`import {WebTerm} from 'web-term-ui';
const term = new WebTerm({
    title: 'This is a Demo. Type "help" to get Help.\\n',
    container: '#container',
    header: '/ admin$ ',
    // mode: 'light',
    style: {padding: 10}
});
term.on('enter', v => {
    if (!v) term.write('');
    else if (v === 'vi' || v.startsWith('vi ')) {
        term.vi('test\\n11', \`\${v.substring(3)} "Ctrl/Cmd + s" to Save, "Esc" to Exit\`);
    } else if (v === 'clear') {
        term.clearTerminal();
    } else if (v === 'help') {
        term.write([
            'vi      : Open vi Editor',
            'clear   : Clear Terminal',
            'progress: Mock Progress Bar',
            'header  : "header <name>" to Set Header'
        ].join('\\n'), false);
    } else if (v === 'progress') {
        let progress = 0;
        const time = Date.now();
        const interval = setInterval(() => {
            progress += Math.round(Math.random() * 10);
            if (progress > 100) {
                progress = 100;
                clearInterval(interval);
            }
            term.writeBelow(\`Progressing...[\${progress}%]\`);
            if (progress === 100) {
                term.clearBelow();
                term.write(\`Progress Done in \${Date.now() - time}ms!\`);
            }
        }, 100);
    } else if (v.startsWith('header')) {
        term.setHeader(\`/ \${v.replace('header', '').trim()}$ \`);
        term.write(\`SetHeader "\${v}"\`);
    } else {
        term.write(\`Exec "\${v}"\`);
    }
});
term.on('edit-done', v => {
    term.write(\`Edit Save: \${v}\`);
});
term.on('tab', () => {
    term.insertEdit('[test]');
});`}));window.term=b;
