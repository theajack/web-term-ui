(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function wt(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function kt(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ae(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,s=!0,f=!1;return{s:function(){n=n.call(e)},n:function(){var l=n.next();return s=l.done,l},e:function(l){f=!0,o=l},f:function(){try{s||n.return==null||n.return()}finally{if(f)throw o}}}}function ie(e,t,n){return(t=se(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?St(Object(n),!0).forEach(function(r){ie(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function se(e){var t=oe(e,"string");return typeof t=="symbol"?t:t+""}function it(e){"@babel/helpers - typeof";return it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(e)}function ae(e,t){if(e){if(typeof e=="string")return wt(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wt(e,t):void 0}}var k={FontFamily:'Menlo, Monaco, "Courier New", monospace',FontSize:14,LineHeight:18,CodePadding:10,PLeft:8};function ue(e){var t=document.createElement("canvas"),n=t.getContext("2d");return n.font=e,function(r){return r?n.measureText(r).width:0}}function ot(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function le(e){if(Array.isArray(e))return ot(e)}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pe(r.key),r)}}function q(e,t,n){return t&&Ct(e.prototype,t),n&&Ct(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function he(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fe(e){return le(e)||ce(e)||ve(e)||he()}function de(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pe(e){var t=de(e,"string");return typeof t=="symbol"?t:t+""}function N(e){"@babel/helpers - typeof";return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(e)}function ve(e,t){if(e){if(typeof e=="string")return ot(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(e,t):void 0}}function pt(e){return!!(e!=null&&e.__isRef)}var st=null;function ye(e){return st=e,function(){st=null}}function me(){return st}var ge=function(){function e(t,n){var r=this;R(this,e),this.__isComputed=!0,this._dirty=!1,this._listeners=[],this._clearSub=[],this._compute=t,this._set=n;var i=ye(function(o,s){var f=function(){if(r._dirty=!0,r._listeners.length>0){var u=r._value,c=r.value;r._listeners.forEach(function(d){d(c,u)})}},l=typeof s=="string"?o.$sub(s,f):o.sub(f);r._clearSub.push(l)});this._refreshValue(),i()}return q(e,[{key:"value",get:function(){var t;return this._dirty&&this._refreshValue(),xe(this),(t=me())===null||t===void 0||t(this),this._value},set:function(t){if(!this._set){console.warn("Computed not have set property");return}this._set(t)}},{key:"_refreshValue",value:function(){this._value=this._compute(),this._dirty=!1}},{key:"sub",value:function(t){var n=this;return this._listeners.push(t),function(){return n.unsub(t)}}},{key:"unsub",value:function(t){var n=this._listeners.indexOf(t);return n!==-1?(this._listeners.splice(n,1),!0):!1}},{key:"destroy",value:function(){this._listeners=[],this._clearSub.forEach(function(t){return t()}),this._clearSub=[]}}])}();function be(e,t){return U(e)?e:new ge(e,t)}function U(e){return!!(e!=null&&e.__isComputed)}function Nt(e){return typeof e=="function"||U(e)}var z={};function xe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n;U(e)||pt(e)?(t="value",n=function(r){return e.sub(r)}):n=function(r){return e.$sub(t,r)},Object.assign(z,{set:function(r){e[t]=r},get:function(){return e[t]},sub:n})}function _e(e,t){if(!z)throw new Error("Bind 传入参数错误");(U(t)||pt(t))&&(t=t.value);var n=z.get,r=z.set,i=z.sub;if(n()!==t)throw new Error("Bind 传入参数错误");var o=e.el,s="string";if(o.tagName==="INPUT"){var f=e.attr("type");f==="number"||f==="range"?s="number":(f==="radio"||f==="checkbox")&&(s="boolean")}var l=function(){if(s==="boolean")return o.checked;var a=e.value();return s==="number"?parseFloat(a):a},u=function(a){if(s==="boolean"){o.checked=a;return}e.value(a)},c=!1,d=function(){c=!0,r(l()),c=!1};u(n()),e.on("input",function(){d()}),e.on("change",function(){d()}),i(function(a){c||u(a)})}function O(e,t){if(pt(e))e.sub(function(){t(e.value)}),t(e.value);else if(Nt(e)){var n=be(e);n.sub(function(){t(n.value)}),t(n.value)}else t(e)}var Bt=function(){function e(t){R(this,e),this.__ld_type=Z.Text,this.el=document.createTextNode(""),typeof t<"u"&&this.text(t)}return q(e,[{key:"text",value:function(t){var n=this;return O(t,function(r){return n.el.textContent=r}),this}},{key:"mounted",value:function(t){return this.__mounted=t,this}}])}(),we=function(){function e(){R(this,e),this.__ld_type=Z.Frag,this.children=[],this.el=document.createDocumentFragment()}return q(e,[{key:"append",value:function(){for(var t=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return vt(r,function(o,s){t.children.push(s),t.el.appendChild(o)}),this}},{key:"mounted",value:function(t){return this.__mounted=function(n){n.children.forEach(function(r){var i;(i=r.__mounted)===null||i===void 0||i.call(r,r)}),t(n)},this}}])}(),Z=function(e){return e[e.Dom=0]="Dom",e[e.Text=1]="Text",e[e.Frag=2]="Frag",e}(Z||{});function vt(e,t){e.forEach(function(n){var r;if(Array.isArray(n)){vt(n,t);return}var i=n;Nt(i)?(i=new Bt(i),i=i.el):typeof i.__ld_type=="number"?i=i.el:n instanceof HTMLElement||(i=document.createTextNode("".concat(n))),t(i,n),(r=n.__mounted)===null||r===void 0||r.call(n,n)})}var ke=/(width$)|(height$)|(top$)|(bottom$)|(left$)|(right$)|(^margin)|(^padding)|(font-?size)/i,Et=/!important$/,Se=/^[0-9]+$/;function Ce(e,t){e=Ee(e);var n="";return Et.test(t)&&(n="important",t=t.replace(Et,"")),Se.test(t)&&ke.test(e)&&(t="".concat(t,"px")),{cssKey:e,cssValue:t,important:n}}function Ee(e){for(var t=e.length,n="",r=0;r<t;r++){var i=e[r],o=i.charCodeAt(0);o>=65&&o<=90?n+="-".concat(i.toLowerCase()):n+=i}return n}var Te=["a","div","h1","h2","h3","h4","h5","h6","button","canvas","code","pre","table","th","td","tr","video","audio","ol","select","option","p","i","iframe","img","input","label","ul","li","span","textarea","form","br","tbody","object","progress","section","slot","small","strong","sub","summary","sup","template","title","var","style","meta","head","link","svg","script"];function Ae(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return yt(e,t,document)}function yt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;if(t){var r=n.querySelector(e);if(r)return new V(r);throw new Error("Element is not exist"+e)}for(var i=n.querySelectorAll(e),o=[],s=0;s<i.length;s++)o.push(new V(i[s]));return o}var P=function(){var e=function(n){return new V(n)},t={frag:{get:function(){return new we}},text:{get:function(){var n=function(r){return new Bt(r)};return n.text=n,n}}};return Te.forEach(function(n){t[n]={get:function(){return e(n)}}}),Object.defineProperties(e,t),e}();function $e(e,t){var n,r=t;typeof t=="string"?r=yt(t,!0):t instanceof HTMLElement&&(r=new V(t)),Array.isArray(e)?(n=r).append.apply(n,fe(e)):r.append(e)}var V=function(){function e(t){R(this,e),this.__ld_type=Z.Dom,this.__xr_funcs={},this.el=typeof t=="string"?document.createElement(t):t}return q(e,[{key:"_ur",value:function(t,n){var r=this;return typeof n>"u"?this.el[t]:(O(n,function(i){return r.el[t]=i}),this)}},{key:"class",value:function(t){return this._ur("className",t)}},{key:"id",value:function(t){return this._ur("id",t)}},{key:"addClass",value:function(t){return this.el.classList.add(t),this}},{key:"removeClass",value:function(t){return this.el.classList.remove(t),this}},{key:"hasClass",value:function(t){var n;return(n=this.el)===null||n===void 0?void 0:n.classList.contains(t)}},{key:"toggleClass",value:function(t,n){var r;return!!((r=this.el)!==null&&r!==void 0&&r.classList.toggle(t,n))}},{key:"remove",value:function(){var t;return(t=this.el)===null||t===void 0||t.remove(),this}},{key:"text",value:function(t){return typeof t>"u"?this.el.innerText:this._ur("innerText",t)}},{key:"mounted",value:function(t){return this.__mounted=t,this}},{key:"attr",value:function(t,n){var r=this;if(N(t)==="object"){for(var i in t)this.attr(i,t[i]);return this}return typeof n>"u"?this.el.getAttribute(t)||"":(O(n,function(o){return r.el.setAttribute(t,o)}),this)}},{key:"removeAttr",value:function(t){return this.el.removeAttribute(t),this}},{key:"func",value:function(t,n){return typeof n>"u"?this.__xr_funcs[t]:(this.__xr_funcs[t]=n,this)}},{key:"data",value:function(t,n){var r=this;if(N(t)==="object"){for(var i in t)this.data(i,t[i]);return this}if(typeof n>"u"){var o;return((o=this.el.__xr_data)===null||o===void 0?void 0:o[t])||null}return this.el.__xr_data||(this.el.__xr_data={}),O(n,function(s){return r.el.__xr_data[t]=s}),this}},{key:"style",value:function(t,n){var r=this.el.style;if(typeof n<"u")return O(n,function(o){var s=Ce(t,o),f=s.important,l=s.cssValue,u=s.cssKey;r.setProperty(u,l,f)}),this;if(typeof t=="string")return r[t];for(var i in t)this.style(i,t[i]);return this}},{key:"value",value:function(t){return this._ur("value",t)}},{key:"html",value:function(t){return this._ur("innerHTML",t)}},{key:"outerHtml",value:function(t){var n=this;return typeof t>"u"?this.el.outerHTML:(O(t,function(r){n.html(r),n.el=n.el.children[0]}),this)}},{key:"child",value:function(t){var n=this.el.children[t];return n?new e(n):null}},{key:"children",value:function(){for(var t=this.el.children.length,n=[],r=0;r<t;r++)n.push(this.child(r));return n}},{key:"click",value:function(t){return this.on("click",t)}},{key:"on",value:function(t,n){if(N(t)==="object"){for(var r in t)this.on(r,t[r]);return this}var i=this.el;if(typeof n=="function")this.el.addEventListener(t,n);else{var o,s=function(f){var l;n.self&&f.target!==i||(n.stop&&f.stopPropagation(),n.prevent&&f.preventDefault(),n.once&&i.removeEventListener(t,s,n.capture),(l=n.listener)===null||l===void 0||l.call(n,f))};i.addEventListener(t,s,(o=n.capture)!==null&&o!==void 0?o:!1)}return this}},{key:"append",value:function(){for(var t=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return vt(r,function(o){t.el.appendChild(o)}),this}},{key:"ref",value:function(t){return t(this),this}},{key:"hide",value:function(){return this.display("none")}},{key:"display",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"block";return this.style("display",t)}},{key:"show",value:function(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";return O(t,function(i){n.display(i?r:"none")}),this}},{key:"query",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return yt(t,n,this.el)}},{key:"src",value:function(t){return this._ur("src",t)}},{key:"parent",value:function(){return this.el.parentElement}},{key:"empty",value:function(){return this.html("")}},{key:"name",value:function(t){return this.attr("__xr_name",t)}},{key:"find",value:function(t){return this.query('[__xr_name="'.concat(t,'"]'),!0)}},{key:"type",value:function(t){return this.attr("type",t)}},{key:"bind",value:function(t){return _e(this,t),this}}])}();function Pe(e,t){var n=[],r="#0b8c0b",i=.4,o=ue("14px Menlo, Monaco, Courier New, monospace"),s=kt(t),f;try{for(s.s();!(f=s.n()).done;){var l=f.value,u={color:l.color||r,opacity:l.opacity||i};if(je(l)){var c=e.matchAll(l.match),d=kt(c),a;try{for(d.s();!(a=d.n()).done;){var h=a.value,v=e.substring(0,h.index),p=v.split(`
`),m=p.pop();n.push(E({left:o(m)+k.PLeft,top:p.length*k.LineHeight,width:o(h[0]),index:p.length},u))}}catch(S){d.e(S)}finally{d.f()}}else{var y=l.row,g=l.column,x=l.range,b=x===void 0?1:x,_=e.split(`
`);debugger;n.push(E({left:o(_[y].substring(0,g))+k.PLeft,top:y*k.LineHeight,index:y,width:o(_[y].substring(g,g+b))},u))}}}catch(S){s.e(S)}finally{s.f()}return n}function je(e){return typeof e.match<"u"}function Le(e){return e.map(function(t){return P.div.class("highlight-bar").style({position:"absolute",backgroundColor:Kt(t),left:"0",top:"".concat(k.CodePadding+t.top,"px"),height:"".concat(k.LineHeight,"px"),width:"100%"}).append(P.span.style({position:"absolute",backgroundColor:t.color,left:"".concat(t.left,"px"),width:"".concat(t.width,"px"),height:"100%"}))})}function Kt(e){var t=e.color,n=e.opacity;if(t[0]==="#"){var r=function(o){var s=Math.round(o*1.6*10).toString(16);return s.length===2?"F":s},i=r(n);return t.length===4?"".concat(t).concat(i):"".concat(t).concat(i).concat(i)}else if(t.startsWith("rgba"))return t.replace(/,([0-9]*)\)/,",".concat(n,")"));return t.replace(/,([0-9]*)\)/,function(o,s){return",".concat(s,",").concat(n,")")})}var tt="#9cdcfe";$e(P.style.text(`
.xhl-punc {
    color: #ddd;
}
.xhl-bkt {
    color: #ffe11c;
}
.xhl-k1 {
    color: #569cd6;
}
.xhl-k2 {
    color: #c586c0;
}
.xhl-k3 {
    color: #3ac9b0;
}
.xhl-num {
    color: #b5cea8;
}
.xhl-f {
    color: #dcdcaa;
}
.xhl-reg,
.xhl-reg * {
    color: #d16969;
}
.xhl-str,
.xhl-str *,
.xhl-str .xhl-cm {
    color: #ce9178;
}
.xhl-cm,
.xhl-cm * {
    color: #6a8a35;
}
.xhl-jsx {
    color: #569cd6;
}
.xhl-tmp,.xhl-tmp .xhl-punc,.xhl-tmp .xhl-bkt{
    color: rgb(86,156,214);
}
.xhl-def{color: `.concat(tt,`;}
.xhl-def .xhl-punc {
    color: #ddd;
}
.xhl-pre {
    background-color: #111;
    padding: 10px;
    color: `).concat(tt,`;
    font-size: 14px;
    margin: 0;
    overflow-x: auto;
    font-family: Menlo, Monaco, "Courier New", monospace;
    line-height: 18px;
}
.xhl-container {
    overflow: auto;
}
.xhl-container .xhl-pre{
    background-color: transparent;
    padding: 0;
    font-family: inherit;
    line-height: inherit;
    font-size: inherit;
    color: inherit;
    overflow: unset;
    color: `).concat(tt,`;
}
.xhl-pre::-webkit-scrollbar,
.xhl-container::-webkit-scrollbar {
    width: 5px;
    cursor: pointer;
    height: 5px;
}
.xhl-pre::-webkit-scrollbar-button, .xhl-container::-webkit-scrollbar-button {
    display: none;
}
.xhl-pre::-webkit-scrollbar-track,
.xhl-container::-webkit-scrollbar-track {
    background-color: transparent;
}
.xhl-pre::-webkit-scrollbar-thumb,
.xhl-container::-webkit-scrollbar-thumb {
    background-color: #666;
    cursor: pointer;
    background-clip: initial;
}
.xhl-pre::-webkit-scrollbar-thumb:hover,
.xhl-container::-webkit-scrollbar-thumb:hover {
    background-color: #888;
    cursor: pointer;
}
`)),document.head);function Oe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;e=e.replace(/\&lt;/g,"__LT__").replace(/\&gt;/g,"__GT__");var n=De(e.replace(/</g,"&lt;").replace(/>/g,"&gt;"));return t?"<pre class='xhl-pre'>".concat(n,"</pre>"):n}var Tt=["var","new","const","let","typeof","in","function","this","true","false","null","undefined","async","delete","class","extends"],At=["return","for","while","else if","if","else","switch","case","default","break","continue","await","yield","try","catch","finally","throw","export","import","from"],$t=["console","window","document","Date","Array","Object","Boolean","Number","String","alert","RegExp","Function","JSON","Date"],H=["\\/","\\","\\(","\\)","\\[","\\]","\\{","\\}","\\+","\\-","\\*","\\=",",","\\.",":","%","_","\\$","@","#","\\^","\\|","!","~"],Pt=["\\(","\\)","\\[","\\]","\\{","\\}"],K="(^|(&lt;)|(&lt;)|[\\n\\t;<> "+H.join("")+"])",at="(["+H.join("")+"\\n;<> ]|(&lt;)|(&lt;)|$)";function j(e,t){return'<span class="xhl-'+t+'">'+e+"</span>"}function jt(e,t,n,r){return e.replace(t,function(i){return typeof r=="string"?i.replace(r,j(r,n)):it(r)==="object"?i.replace(r,function(o){return j(o,n)}):j(typeof r=="function"?r.apply(void 0,arguments):i,n)})}function He(e,t,n,r){if(e.indexOf("</span>")!==-1){var i=typeof t=="string"?Ie(t):t[0];e=e.replace(i,function(s){var f=typeof t=="string"?new RegExp(t,"g"):t[1];return jt(s,f,n,r)})}else{var o=typeof t=="string"?new RegExp(t,"g"):t[1];e=jt(e,o,n,r)}return e}function Ie(e){return new RegExp(e+"(?![^<]*>|[^<>]*</)","g")}function De(e){return e=We(e,[["\\$\\{(.*)\\}","tmp",function(t,n){return t.replace(n,j(n,"def"))}],[[/("(?:[^"\\]|\\.)*")|(\'(?:[^\'\\]|\\.)*\')|(`((?:[^`\\]|\\.)|\n)*`)(?![^<]*>|[^<>]*<\/)/g,/("(?:[^"\\]|\\.)*")|(\'(?:[^\'\\]|\\.)*\')|(`((?:[^`\\]|\\.)|\n)*`)/g],"str"],[`(//.*(
|$))|(\\/\\*(.|
)*?\\*\\/)`,"cm"],["\\/[a-zA-Z0-9"+H.slice(1).join("")+" ]+\\/[gi]?","reg"],D(Tt,"k1"),D(Tt,"k1"),D(At,"k2"),D(At,"k2"),D($t,"k3"),D($t,"k3"),[K+"[a-zA-Z_\\$]+[a-zA-Z_\\$0-9]* ?\\(","f",new RegExp("[a-zA-Z_\\$]+[a-zA-Z_\\$0-9]*","g")],[K+"[0-9]+(\\.?[0-9]+)?"+at,"num",/[0-9]+(.?[0-9]+)?/g],[K+"[0-9]+(\\.?[0-9]+)?"+at,"num",/[0-9]+(.?[0-9]+)?/g],[`&lt;\\/?[a-zA-Z\\-]*(\\/| |
|&gt;)`,"jsx"],["["+Pt.join("")+"]","bkt",new RegExp("["+Pt.join("")+"]","g")],["["+H.join("")+"]","punc",new RegExp("["+H.join("")+"]","g")],["["+H.join("")+"]","punc",new RegExp("["+H.join("")+"]","g")]]),e=e.replace(/\&lt;/g,j("<","punc")).replace(/\&gt;/g,j(">","punc")).replace(/;/g,j(";","punc")).replace(/&/g,j("&","punc")),e=e.replace(/__LT__/g,"&amp;lt;").replace(/__GT__/g,"&amp;gt;"),e}function D(e,t){return[K+"(("+e.join(")|(")+"))"+at,t,new RegExp("(("+e.join(")|(")+"))","g")]}function We(e,t){for(var n=0;n<t.length;n++)t[n].unshift(e),e=He.apply(null,t[n]);return e}function Me(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{code:""},t=e.code,n=t===void 0?"":t,r=e.borderRight,i=r===void 0?!1:r,o=e.startIndex,s=o===void 0?1:o,f=e.highlights,l=f===void 0?[]:f,u=e.style,c=u===void 0?{}:u,d=e.codeStyle,a=d===void 0?{}:d,h=e.lineHeight,v=h===void 0?k.LineHeight:h,p=e.lineCount,m={backgroundColor:"#111",color:"#fff",fontFamily:k.FontFamily,margin:"0",fontSize:"".concat(k.FontSize,"px"),paddingTop:"".concat(k.CodePadding,"px"),paddingBottom:"0",paddingLeft:"".concat(k.PLeft,"px"),lineHeight:"".concat(v,"px")},y=E({overflowX:"auto",borderRight:i?"1px solid #666":"none",flex:"1",position:"relative"},m),g=n.split(`
`),x=n;n.length<=1e4?x=Oe(x,!1):console.warn("当前代码过长，已关闭代码高亮");var b=E({display:"flex"},c);p&&(b.minHeight="".concat(p*v+k.CodePadding*2,"px"));var _=Pe(n,l);return P.div.style(b).append(P.div.style(E(E({},m),{},{flexDirection:"column",display:"flex",borderRight:"1px solid #aaa",padding:"".concat(k.CodePadding,"px 0px"),color:"#ddd",textAlign:"right"})).append(g.map(function(S,w){var A=_.find(function(M){return M.index===w});return P.span.style({padding:"0px 5px",backgroundColor:A?Kt(A):"transparent"}).text(s+w)})),P.pre.class("xhl-container").style(E(E({},y),a)).mounted(function(S){setTimeout(function(){if(_.length){var w=_[0];if(S.el.scrollLeft=w.left-(S.el.offsetWidth-w.width)/2,ResizeObserver){var A=new ResizeObserver(function(M){var _t=M[0].target;Ae(".highlight-bar").forEach(function(re){return re.style("maxWidth","".concat(_t==null?void 0:_t.scrollWidth,"px"))})});A.observe(S.el)}}},100)}).append(Le(_),P.div.class("xhl-pre").style(E(E({},a),{},{position:"relative"})).html(x))).el}var ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ut={exports:{}};(function(e,t){(function(n,r){r(t)})(ze,function(n){function r(l){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}function i(l,u){for(var c=0;c<u.length;c++){var d=u[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,d.key,d)}}function o(l){return function(u){if(Array.isArray(u))return s(u)}(l)||function(u){if(typeof Symbol<"u"&&u[Symbol.iterator]!=null||u["@@iterator"]!=null)return Array.from(u)}(l)||function(u,c){if(u){if(typeof u=="string")return s(u,c);var d=Object.prototype.toString.call(u).slice(8,-1);return(d=d==="Object"&&u.constructor?u.constructor.name:d)==="Map"||d==="Set"?Array.from(u):d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?s(u,c):void 0}}(l)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function s(l,u){(u==null||u>l.length)&&(u=l.length);for(var c=0,d=new Array(u);c<u;c++)d[c]=l[c];return d}var f=function(){function l(){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.usePrevEmit=!0,this._map={},this._prevData={}}var u,c,d;return u=l,d=[{key:"_",get:function(){return this.__||(this.__=new l),this.__}},{key:"usePrevEmit",get:function(){return this._.usePrevEmit},set:function(a){this._.usePrevEmit=a}},{key:"emit",value:function(a){for(var h,v=arguments.length,p=new Array(1<v?v-1:0),m=1;m<v;m++)p[m-1]=arguments[m];(h=this._).emit.apply(h,[a].concat(p))}},{key:"off",value:function(a,h){this._.off(a,h)}},{key:"clear",value:function(a){this._.clear(a)}},{key:"on",value:function(a,h){this._.on(a,h)}},{key:"once",value:function(a,h){this._.once(a,h)}},{key:"onWait",value:function(a){this._.onWait(a)}},{key:"head",value:function(a,h){this._.head(a,h)}},{key:"headOnce",value:function(a,h){this._.headOnce(a,h)}}],(c=[{key:"hasEvent",value:function(a){return!!this._map[a]}},{key:"on",value:function(a,h){var v=this;if(r(a)==="object"){var p,m=[];for(p in a)m.push(this.on(p,a[p]));return function(){m.forEach(function(g){return g()})}}if(!h)throw new Error("fn is required");var y=this._formatTarget(h);return this._checkPrev(a,y)&&y.once?function(){}:(this._getList(a).push(y),function(){v.off(a,y)})}},{key:"_formatTarget",value:function(a,h){return typeof a=="function"?{listener:a,once:h!=null&&h,prev:this.usePrevEmit}:(typeof h=="boolean"&&(a.once=h),a)}},{key:"emit",value:function(a){for(var h=arguments.length,v=new Array(1<h?h-1:0),p=1;p<h;p++)v[p-1]=arguments[p];this._prevData[a]=v;var m=this._map[a];if(!m)return!1;for(var y=0;y<m.length;y++){var g=m[y];g.listener.apply(g,v),g.once&&(m.splice(y,1),y--)}return!0}},{key:"off",value:function(a,h){if(a=this._map[a],!a)return!1;var v=a.findIndex(function(p){return p===h||p.listener===h});return v!==-1&&(a.splice(v,1),!0)}},{key:"clear",value:function(a){return!!this._map[a]&&(delete this._map[a],delete this._prevData[a],!0)}},{key:"onWait",value:function(a,h){var v=this;return new Promise(function(p){var m=function(){for(var y=arguments.length,g=new Array(y),x=0;x<y;x++)g[x]=arguments[x];return p(g)};h&&(m=Object.assign({listener:m},h)),v.once(a,m)})}},{key:"destroy",value:function(){this._map={},this._prevData={}}},{key:"_checkPrev",value:function(a,h){return h.prev?(a=this._prevData[a],a!==void 0&&(h.listener.apply(h,o(a)),!0)):!1}},{key:"once",value:function(a,h){return this.on(a,this._formatTarget(h,!0))}},{key:"head",value:function(a,h){var v=this,p=this._formatTarget(h);return this._checkPrev(a,p)&&p.once?function(){}:(this._getList(a).unshift(p),function(){v.off(a,h)})}},{key:"headOnce",value:function(a,h){return this.head(a,this._formatTarget(h,!0))}},{key:"_getList",value:function(a){var h=this._map[a];return h||(this._map[a]=h=[]),h}}])&&i(u.prototype,c),d&&i(u,d),Object.defineProperty(u,"prototype",{writable:!1}),l}();f.version="0.0.3",n.Eveit=f,n.default=f,Object.defineProperty(n,"__esModule",{value:!0})})})(ut,ut.exports);var mt=ut.exports;function lt(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Fe(e){if(Array.isArray(e))return lt(e)}function Ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qe(r.key),r)}}function Be(e,t,n){return t&&Lt(e.prototype,t),n&&Lt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ke(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ot(e){return Fe(e)||Ke(e)||Ue(e)||Ve()}function Re(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qe(e){var t=Re(e,"string");return typeof t=="symbol"?t:t+""}function Ue(e,t){if(e){if(typeof e=="string")return lt(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(e,t):void 0}}var B=Symbol("E"),gt=function(e){return e[e.Fork=0]="Fork",e[e.Append=1]="Append",e}(gt||{}),Vt=function(){function e(){var t=this,n,r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.max,s=o===void 0?0:o,f=i.useStorage,l=f===void 0?!1:f,u=i.storageKey,c=u===void 0?"_def_history_stack":u,d=i.mode,a=d===void 0?0:d,h=i.storageProvider,v=i.onStepChange,p=i.onHistorySizeChange,m=i.onHistoryOut;if(Ne(this,e),this.step=0,this.size=0,this.max=40,this.list=[],this.index=0,this.End=B,this.isActive=!1,this.max=s,this.mode=a,l!==!1&&(h||c)&&(l=!0),l&&(this.storageProvider=h||{read:function(){var g=localStorage.getItem(c);return g?JSON.parse(g):[]},write:function(g){localStorage.setItem(c,JSON.stringify(g))}}),v&&(this.osc=function(){return v(t.step)}),p&&(this.ohsc=function(){return p(t.size)}),this.oho=m,(n=this.osc)===null||n===void 0||n.call(this),(r=this.ohsc)===null||r===void 0||r.call(this),l){var y=this.storageProvider.read();y instanceof Promise?y.then(function(g){t.useCache(g)}):this.useCache(y)}}return Be(e,[{key:"useCache",value:function(t){t.length!==0&&this.push.apply(this,Ot(t))}},{key:"setMax",value:function(t){this.max=t}},{key:"setStep",value:function(t){var n;this.step=t,(n=this.osc)===null||n===void 0||n.call(this)}},{key:"setHistoryIndex",value:function(t){var n;this.isActive||(this.isActive=!0),this.index=t,this.size=t,(n=this.ohsc)===null||n===void 0||n.call(this)}},{key:"back",value:function(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(!this.canBack(n))return n>1&&(this.setStep(this.step-this.index),this.setHistoryIndex(0)),this.End;this.setStep(this.step-n),this.setHistoryIndex(this.index-n);var r=this.list[this.index];return(t=this.oho)===null||t===void 0||t.call(this,r),r}},{key:"canBack",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.index-t>=0}},{key:"first",value:function(){return this.list.length===0?B:(this.setStep(this.step-this.index),this.setHistoryIndex(0),this.list[0])}},{key:"last",value:function(){return this.list.length===0?B:(this.setStep(this.step+this.list.length-this.index),this.setHistoryIndex(this.list.length-1),this.list[this.list.length-1])}},{key:"forward",value:function(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(!this.canForward(n))return n>1&&(this.setStep(this.step+this.list.length-this.index),this.setHistoryIndex(this.list.length-1)),this.End;this.setStep(this.step+n),this.setHistoryIndex(this.index+n);var r=this.list[this.index];return(t=this.oho)===null||t===void 0||t.call(this,r),r}},{key:"isEnd",value:function(t){return t===B}},{key:"canForward",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.index+t<this.list.length}},{key:"pop",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,n=this.list.length;if(n<=t){var r=Ot(this.list);return this.clear(),r}var i=n-t,o=this.list.splice(i),s=this.list.length;return s<this.index&&(this.setHistoryIndex(s),this.setStep(this.step-(this.index-s))),o}},{key:"push",value:function(){var t,n=this.list.length;this.index<n&&(this.step++,this.index++,this.mode===0&&this.list.splice(this.index));var r=arguments.length,i=0,o=r;this.max>0&&n+r>this.max&&(i=n+r-this.max,o=r-i),(t=this.list).push.apply(t,arguments),i&&this.list.splice(0,i),this._onListChange(),o&&(this.mode===1?this.setHistoryIndex(this.list.length):this.setHistoryIndex(this.index+o)),this.mode===1?this.setStep(this.list.length):this.setStep(this.step+o),this.isActive&&(this.isActive=!1)}},{key:"clear",value:function(){this.list=[],this._onListChange(),this.setHistoryIndex(0),this.setStep(0),this.isActive=!1}},{key:"replace",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.index;typeof this.list[n]>"u"||(this.list[n]=t,this._onListChange())}},{key:"isLatest",get:function(){return this.index===this.list.length-1}},{key:"_onListChange",value:function(){var t;(t=this.storageProvider)===null||t===void 0||t.write(this.list)}},{key:"current",value:function(){return this.list[this.index]}}])}();Vt.Mode=gt;class Ze{constructor(t,n){this.pushedCurrent=!1,this.provider=n,this.history=new Vt({max:t,mode:gt.Append});const r=n.read();r instanceof Promise?r.then(i=>{this._initHistory(i)}):this._initHistory(r)}_initHistory(t){const n=JSON.parse(t);this.history.push(...n)}up(t){return this.history.isActive||(this.push(t),this.history.back(),this.pushedCurrent=!0),this.history.canBack()?this.history.back():null}down(){return this.history.canForward()?this.history.forward():null}checkLatest(t){this.history.isLatest&&(this.history.replace(t),this.save())}push(t){this.pushedCurrent&&(this.history.pop(),this.pushedCurrent=!1),this.history.push(t),this.save()}save(){this.provider.write(JSON.stringify(this.history.list))}clear(){this.pushedCurrent=!1,this.history.clear(),this.save()}}function ct(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ge(e){if(Array.isArray(e))return ct(e)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tn(r.key),r)}}function J(e,t,n){return t&&Ht(e.prototype,t),n&&Ht(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Je(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Xe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ye(e){return Ge(e)||Je(e)||en(e)||Xe()}function Qe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tn(e){var t=Qe(e,"string");return typeof t=="symbol"?t:t+""}function W(e){"@babel/helpers - typeof";return W=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(e)}function en(e,t){if(e){if(typeof e=="string")return ct(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ct(e,t):void 0}}function X(e){return!!(e!=null&&e.__isRef)}var ht=null;function nn(e){return ht=e,function(){ht=null}}function Rt(){return ht}var rn=function(){function e(t,n){var r=this;G(this,e),this.__isComputed=!0,this._dirty=!1,this._listeners=[],this._clearSub=[],this._compute=t,this._set=n;var i=nn(function(o,s){var f=function(){if(r._dirty=!0,r._listeners.length>0){var u=r._value,c=r.value;r._listeners.forEach(function(d){d(c,u)})}},l=typeof s=="string"?o.$sub(s,f):o.sub(f);r._clearSub.push(l)});this._refreshValue(),i()}return J(e,[{key:"value",get:function(){var t;return this._dirty&&this._refreshValue(),Ut(this),(t=Rt())===null||t===void 0||t(this),this._value},set:function(t){if(!this._set){console.warn("Computed not have set property");return}this._set(t)}},{key:"_refreshValue",value:function(){this._value=this._compute(),this._dirty=!1}},{key:"sub",value:function(t){var n=this;return this._listeners.push(t),function(){return n.unsub(t)}}},{key:"unsub",value:function(t){var n=this._listeners.indexOf(t);return n!==-1?(this._listeners.splice(n,1),!0):!1}},{key:"destroy",value:function(){this._listeners=[],this._clearSub.forEach(function(t){return t()}),this._clearSub=[]}}])}();function on(e,t){return Y(e)?e:new rn(e,t)}function Y(e){return!!(e!=null&&e.__isComputed)}function bt(e){return typeof e=="function"||Y(e)}function qt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n={},r={},i={$sub:function(c,d){return n[c]||(n[c]=[]),n[c].push(d),function(){i.$unsub(c,d)}},$unsub:function(c,d){if(n[c]){if(typeof d>"u")return delete n[c],!0;var a=n[c].indexOf(d);return a===-1?!1:(n[c].splice(a,1),!0)}},$get:function(c){return r[c]}},o={},s=function(c){var d=e[c];r[c]=d,o[c]={get:function(){var a;Ut(i,c),(a=Rt())===null||a===void 0||a(i,c);var h=r[c];return h},set:function(a){var h,v=r[c];r[c]=a,(h=n[c])===null||h===void 0||h.forEach(function(p){p(a,v)})}},i[c]=d};for(var f in e)s(f);Object.defineProperties(i,o);var l=function(c){i[c]=function(){for(var d=arguments.length,a=new Array(d),h=0;h<d;h++)a[h]=arguments[h];return t[c].apply(i,a)}};for(var u in t)l(u);return i}var F={};function Ut(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n;Y(e)||X(e)?(t="value",n=function(r){return e.sub(r)}):n=function(r){return e.$sub(t,r)},Object.assign(F,{set:function(r){e[t]=r},get:function(){return e[t]},sub:n})}function sn(e,t){if(!F)throw new Error("Bind 传入参数错误");(Y(t)||X(t))&&(t=t.value);var n=F.get,r=F.set,i=F.sub;if(n()!==t)throw new Error("Bind 传入参数错误");var o=e.el,s="string";if(o.tagName==="INPUT"){var f=e.attr("type");f==="number"||f==="range"?s="number":(f==="radio"||f==="checkbox")&&(s="boolean")}var l=function(){if(s==="boolean")return o.checked;var a=e.value();return s==="number"?parseFloat(a):a},u=function(a){if(s==="boolean"){o.checked=a;return}e.value(a)},c=!1,d=function(){c=!0,r(l()),c=!1};u(n()),e.on("input",function(){d()}),e.on("change",function(){d()}),i(function(a){c||u(a)})}function T(e,t){if(X(e))e.sub(function(){t(e.value,!1)}),t(e.value,!0);else if(bt(e)){var n=on(e);n.sub(function(){t(n.value,!1)}),t(n.value,!0)}else return t(e,!0),!1;return!0}function Zt(e){return X(e)||bt(e)}var Gt=function(){function e(t){G(this,e),this.__ld_type=Q.Text,this.el=document.createTextNode(""),typeof t<"u"&&this.text(t)}return J(e,[{key:"text",value:function(t){var n=this;return T(t,function(r){return n.el.textContent=r}),this}},{key:"mounted",value:function(t){return this.__mounted=t,this}}])}(),an=function(){function e(){G(this,e),this.__ld_type=Q.Frag,this.children=[],this.el=document.createDocumentFragment()}return J(e,[{key:"append",value:function(){for(var t=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return xt(r,function(o,s){t.children.push(s),t.el.appendChild(o)}),this}},{key:"mounted",value:function(t){return this.__mounted=function(n){n.children.forEach(function(r){var i;(i=r.__mounted)===null||i===void 0||i.call(r,r)}),t(n)},this}}])}(),Q=function(e){return e[e.Dom=0]="Dom",e[e.Text=1]="Text",e[e.Frag=2]="Frag",e}(Q||{});function xt(e,t){e.forEach(function(n){var r;if(Array.isArray(n)){xt(n,t);return}var i=n;bt(i)?(i=new Gt(i),i=i.el):typeof i.__ld_type=="number"?i=i.el:n instanceof HTMLElement||(i=document.createTextNode("".concat(n))),t(i,n),(r=n.__mounted)===null||r===void 0||r.call(n,n)})}var un=/(width$)|(height$)|(top$)|(bottom$)|(left$)|(right$)|(^margin)|(^padding)|(font-?size)/i,It=/!important$/,ln=/^[0-9]+$/;function Jt(e,t){e=cn(e);var n="";return It.test(t)&&(n="important",t=t.replace(It,"")),ln.test(t)&&un.test(e)&&(t="".concat(t,"px")),{cssKey:e,cssValue:t,important:n}}function cn(e){for(var t=e.length,n="",r=0;r<t;r++){var i=e[r],o=i.charCodeAt(0);o>=65&&o<=90?n+="-".concat(i.toLowerCase()):n+=i}return n}var hn=["a","div","h1","h2","h3","h4","h5","h6","button","canvas","code","pre","table","th","td","tr","video","audio","ol","select","option","p","i","iframe","img","input","label","ul","li","span","textarea","form","br","tbody","object","progress","section","slot","small","strong","sub","summary","sup","template","title","var","style","meta","head","link","svg","script"];function Xt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;if(t){var r=n.querySelector(e);if(r)return new I(r);throw new Error("Element is not exist"+e)}for(var i=n.querySelectorAll(e),o=[],s=0;s<i.length;s++)o.push(new I(i[s]));return o}var C=function(){var e=function(n){return new I(n)},t={frag:{get:function(){return new an}},text:{get:function(){var n=function(r){return new Gt(r)};return n.text=n,n}}};return hn.forEach(function(n){t[n]={get:function(){return e(n)}}}),Object.defineProperties(e,t),e}();function fn(e){var t=Zt(e),n=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",s=new I("style").text(o);return document.head.appendChild(s.el),s};if(t||typeof e=="string"){var r=n();T(e,function(o){r.text(o)})}else{var i;Yt({data:e,onStyle:function(o,s){o&&(i||(i=n()),i.text(o)),s&&n(s)}})}}function Yt(e){var t=e.data,n=e.reactiveValue,r=n===void 0?[]:n,i=e.staticValue,o=i===void 0?[]:i,s=e.prefix,f=s===void 0?"":s,l=e.index,u=l===void 0?0:l,c=e.onStyle,d=e.first,a=d===void 0?!0:d,h=[],v=function(b){h.push(b),u++};f&&v("".concat(f,"{"));var p=!1,m=[],y=function(b){var _=t[b],S=Zt(_);if(S)p=!0,function(w){T(_,function(A,M){M?v(et(b,A)):(console.log(A,w),r[w]=et(b,A),c(r.join("").trim()))})}(u);else{if(W(_)==="object")return m.push({key:b,value:_}),1;v(et(b,_))}};for(var g in t)y(g);if(f&&v("}"),h.length){var x;(x=p?r:o).push.apply(x,h)}m.forEach(function(b){var _=b.key,S=b.value,w="";_[0]==="&"?w=_.substring(1):_[0]===":"?w=_:w=" ".concat(_),Yt({data:S,prefix:"".concat(f).concat(w),index:u,reactiveValue:r,staticValue:o,onStyle:c,first:!1})}),a&&c(r.join("").trim(),o.join("").trim())}function et(e,t){var n=Jt(e,t),r=n.important,i=n.cssValue,o=n.cssKey;return"".concat(o,":").concat(i).concat(r?"!".concat(r):"",";")}function dn(e,t){var n,r=t;typeof t=="string"?r=Xt(t,!0):t instanceof HTMLElement&&(r=new I(t)),Array.isArray(e)?(n=r).append.apply(n,Ye(e)):r.append(e)}var I=function(){function e(t){G(this,e),this.__ld_type=Q.Dom,this.__xr_funcs={},this.el=typeof t=="string"?document.createElement(t):t}return J(e,[{key:"_ur",value:function(t,n){var r=this;return typeof n>"u"?this.el[t]:(T(n,function(i){return r.el[t]=i}),this)}},{key:"class",value:function(t){return this._ur("className",t)}},{key:"id",value:function(t){return this._ur("id",t)}},{key:"addClass",value:function(t){return this.el.classList.add(t),this}},{key:"removeClass",value:function(t){return this.el.classList.remove(t),this}},{key:"hasClass",value:function(t){var n;return(n=this.el)===null||n===void 0?void 0:n.classList.contains(t)}},{key:"toggleClass",value:function(t,n){var r;return!!((r=this.el)!==null&&r!==void 0&&r.classList.toggle(t,n))}},{key:"remove",value:function(){var t;return(t=this.el)===null||t===void 0||t.remove(),this}},{key:"text",value:function(t){return typeof t>"u"?this.el.innerText:this._ur("innerText",t)}},{key:"mounted",value:function(t){return this.__mounted=t,this}},{key:"attr",value:function(t,n){var r=this;if(W(t)==="object"){for(var i in t)this.attr(i,t[i]);return this}return typeof n>"u"?this.el.getAttribute(t)||"":(T(n,function(o){return r.el.setAttribute(t,o)}),this)}},{key:"removeAttr",value:function(t){return this.el.removeAttribute(t),this}},{key:"func",value:function(t,n){return typeof n>"u"?this.__xr_funcs[t]:(this.__xr_funcs[t]=n,this)}},{key:"data",value:function(t,n){var r=this;if(W(t)==="object"){for(var i in t)this.data(i,t[i]);return this}if(typeof n>"u"){var o;return((o=this.el.__xr_data)===null||o===void 0?void 0:o[t])||null}return this.el.__xr_data||(this.el.__xr_data={}),T(n,function(s){return r.el.__xr_data[t]=s}),this}},{key:"style",value:function(t,n){var r=this.el.style;if(typeof n<"u")return T(n,function(o){var s=Jt(t,o),f=s.important,l=s.cssValue,u=s.cssKey;r.setProperty(u,l,f)}),this;if(typeof t=="string")return r[t];for(var i in t)this.style(i,t[i]);return this}},{key:"value",value:function(t){return this._ur("value",t)}},{key:"html",value:function(t){return this._ur("innerHTML",t)}},{key:"outerHtml",value:function(t){var n=this;return typeof t>"u"?this.el.outerHTML:(T(t,function(r){n.html(r),n.el=n.el.children[0]}),this)}},{key:"child",value:function(t){var n=this.el.children[t];return n?new e(n):null}},{key:"children",value:function(){for(var t=this.el.children.length,n=[],r=0;r<t;r++)n.push(this.child(r));return n}},{key:"click",value:function(t){return this.on("click",t)}},{key:"on",value:function(t,n){if(W(t)==="object"){for(var r in t)this.on(r,t[r]);return this}var i=this.el;if(typeof n=="function")this.el.addEventListener(t,n);else{var o,s=function(f){var l;n.self&&f.target!==i||(n.stop&&f.stopPropagation(),n.prevent&&f.preventDefault(),n.once&&i.removeEventListener(t,s,n.capture),(l=n.listener)===null||l===void 0||l.call(n,f))};i.addEventListener(t,s,(o=n.capture)!==null&&o!==void 0?o:!1)}return this}},{key:"append",value:function(){for(var t=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return xt(r,function(o){t.el.appendChild(o)}),this}},{key:"ref",value:function(t){return t(this),this}},{key:"hide",value:function(){return this.display("none")}},{key:"display",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"block";return this.style("display",t)}},{key:"show",value:function(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";return T(t,function(i){n.display(i?r:"none")}),this}},{key:"query",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Xt(t,n,this.el)}},{key:"src",value:function(t){return this._ur("src",t)}},{key:"parent",value:function(){return this.el.parentElement}},{key:"empty",value:function(){return this.html("")}},{key:"name",value:function(t){return this.attr("__xr_name",t)}},{key:"find",value:function(t){return this.query('[__xr_name="'.concat(t,'"]'),!0)}},{key:"type",value:function(t){return this.attr("type",t)}},{key:"bind",value:function(t){return sn(this,t),this}}])}();const ft="web-term-container",$={FullParent:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},Text:{fontFamily:"courier-new, courier, monospace",fontSize:"15px",fontKerning:"none",whiteSpace:"pre",lineHeight:"17px",boxSizing:"border-box"},ScrollBar:{"&::-webkit-scrollbar":{width:"5px",cursor:"pointer",height:"5px"},"&::-webkit-scrollbar-button":{display:"none"},"&::-webkit-scrollbar-track":{display:"none"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#555",cursor:"pointer"}}},Qt={};function te(e){Object.assign(Qt,e)}function pn(){fn(Qt)}te({[`.${ft}`]:{position:"relative",...$.Text,"*":{...$.Text},...$.ScrollBar},".editor-cursor":{position:"absolute",zIndex:"2",height:"16px",backgroundColor:"#000",color:"#fff","&.cursor-focus":{backgroundColor:"#fff",color:"#000"},".editor-cursor-border":{...$.FullParent,border:"1px solid #fff"},".editor-cursor-text":{...$.FullParent}},".editor-textarea":{...$.ScrollBar}});te({".display-item":{padding:2}});class vn{constructor(t,n){this.store=t,this.title=n,this.container=C.div.style({padding:"5px 3px 0 3px"}).on("click",r=>{r.stopPropagation()})}pushContent(t){const n="display-item";this.container.append(typeof t=="string"?C.div.class(n).text(t+`
`):t.addClass(n))}}function yn(e){return typeof e=="function"?e():e}function Dt(){const e=navigator.userAgent;return/macintosh|mac os x/i.test(e)}function dt(e){return Dt()&&e.metaKey||!Dt()&&e.ctrlKey}function mn(e){let t=!1;return e.on("compositionstart",()=>{t=!0}),e.on("compositionend",()=>{t=!1}),()=>t}function Wt(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Mt(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=gn(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,s=!0,f=!1;return{s:function(){n=n.call(e)},n:function(){var l=n.next();return s=l.done,l},e:function(l){f=!0,o=l},f:function(){try{s||n.return==null||n.return()}finally{if(f)throw o}}}}function gn(e,t){if(e){if(typeof e=="string")return Wt(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wt(e,t):void 0}}var ee="  ";function bn(e){ee=e}function xn(e){_n(this,e,ee)}function _n(e,t,n){var r=n.length;if(t.code==="Tab"){t.preventDefault();var i=zt(e),o=i.startLineIndex,s=i.start,f=i.end,l=i.lineText.split(`
`);if(t.shiftKey){var u=!0,c=Mt(l),d;try{for(c.s();!(d=c.n()).done;){var a=d.value;a.startsWith(n)?(e.selectionStart=o,e.selectionEnd=o+r,document.execCommand("delete",!1),u&&a.startsWith(n+n)&&(s-=r),f-=r,o+=a.length-r+1):o+=a.length+1,u=!1}}catch(b){c.e(b)}finally{c.f()}console.log(s,f),e.selectionStart=s,e.selectionEnd=f;return}if(l.length===1){nt(n);return}s+=r;var h=Mt(l),v;try{for(h.s();!(v=h.n()).done;){var p=v.value;e.selectionStart=e.selectionEnd=o,nt(n),o+=r+p.length+1,f+=r}}catch(b){h.e(b)}finally{h.f()}e.selectionStart=s,e.selectionEnd=f}else if(t.code==="Enter"&&!t.ctrlKey){for(var m=zt(e),y=m.lineText.split(`
`)[0],g=`
`,x=0;y.substring(x,x+r)===n;)g+=n,x+=r;x>0&&(nt(g),t.preventDefault())}}function nt(e){e&&document.execCommand("insertText",!1,e)}function zt(e){var t=e.selectionStart,n=e.selectionEnd,r="",i=e.value;r=i.substring(t,n);var o=i.substring(0,t),s=o.lastIndexOf(`
`),f=s+1;return{start:t,end:n,text:r,lineText:i.substring(f,n),line:r.split(`
`).length,startLineIndex:f}}function wn(e){return e?e.charCodeAt(0)>=128:!1}const kn=9,Ft=15,rt=17;class ne extends mt.Eveit{constructor({header:t="",padding:n=5,size:r="full",mode:i="inline",tab:o="  "}={}){super(),this.wrapLine=!0,this.store=qt({cx:0,cy:0}),this._prevHeader="",this._prevHeaderWidth=0,this._isShowCursor=!1,this.size=r,this.mode=i,bn(o),this.padding=n;const s=C.canvas;this.ctx=s.el.getContext("2d"),this.ctx.font="15px courier-new, courier, monospace",this.headerGetter=t,this.render(),this._monitorStart()}get value(){const t=this.textarea.value(),n=this.header.length;return n?t.substring(n):t}get header(){return yn(this.headerGetter)}get headerWidth(){const t=this.header;return t!==this._prevHeader&&(this._prevHeaderWidth=this.measureTextWidth(t)),this._prevHeaderWidth}_monitorStart(){setTimeout(()=>{this.textarea.el.clientWidth?this.relocateCursorPosition():this._monitorStart()},100)}render(){this.container=C.div.style({position:"relative",height:this.size==="full"?"100%":`${rt+2*this.padding}px`}).append(this.cursor=C.div.class("editor-cursor").append(C.div.class("editor-cursor-border"),this.cursorText=C.div.class("editor-cursor-text")),this.textarea=C.textarea.class("editor-textarea").value(this.header).style({...$.FullParent,padding:`${this.padding}px`,backgroundColor:"transparent",border:"none",color:"#fff",outline:"none",resize:"none",zIndex:"1",caretColor:"transparent"})),this.wrapLine&&this.textarea.style({wordBreak:"break-all",whiteSpace:"pre-wrap"}),this.initEvents()}initEvents(){let t=!1;const n=this.textarea.el;let r=1;const i=u=>u.code==="Backspace"||u.code==="Enter",o=mn(this.textarea);let s=null,f=this.compatSelChange();this.textarea.on("keydown",u=>{if(!o()){if(this.mode==="inline"){if(u.code==="Enter")if(dt(u))this.pushText(`
`);else{u.preventDefault(),this.emit("key","Enter");return}else if(u.code==="ArrowUp"||u.code==="ArrowDown"||u.code==="Tab"){u.preventDefault(),this.emit("key",u.code);return}}if(u.code==="Tab"&&n.selectionStart!==n.selectionEnd&&this.showCursor(!1),xn.call(n,u),i(u)&&(t=!0),u.code==="Backspace"){const{x:c,y:d}=this.getCursorPosition();d===0&&c===this.headerWidth&&u.preventDefault()}dt(u)&&u.code==="KeyZ"&&(clearTimeout(s),s=setTimeout(()=>{this.relocateCursorPosition()},50))}}).on("keyup",u=>{o()||i(u)&&(t=!1)}).on("input",u=>{if(u.preventDefault(),t&&this.relocateCursorPosition(),this.size==="auto"){const d=n.value.split(`
`).length;r!==d&&(r=d,this.textarea.style("height",`${d*rt+2*this.padding}px`))}this.emit("input")}).on("selectionchange",()=>{f&&(f(),f=null),this._onSelectionChange()}).on("scroll",()=>{this.relocateCursorPosition()}).on("focus",()=>{this.cursor.addClass("cursor-focus")}).on("blur",()=>{this.cursor.removeClass("cursor-focus")});let l=n.clientWidth;globalThis.addEventListener("resize",()=>{n.clientWidth!==l&&(l=n.clientWidth,this.relocateCursorPosition())})}_onSelectionChange(){const t=this.textarea.el;if(t.selectionStart===t.selectionEnd)this.relocateCursorPosition();else{if(t.clientWidth===0)return;const n=this.header.length;t.selectionStart<n&&(t.selectionStart=n);const r=t.value.length;t.selectionEnd>r&&(t.selectionEnd=r)}}compatSelChange(){const t=()=>{const n=this.textarea.el;document.activeElement===n&&this._onSelectionChange()};return document.addEventListener("selectionchange",t),()=>document.removeEventListener("selectionchange",t)}measureTextWidth(t){return t?this.ctx.measureText(t).width:0}getCursorPosition(){const t=this.textarea.el,n=t.selectionStart,i=t.value.substring(0,n).split(`
`),o=i.pop(),s=i.length,f=t.value[n]||"",l=this.measureTextWidth(o);let u=l,c=0;const d=t.clientWidth-2*this.padding;if(this.wrapLine&&(c=Math.floor(l/d),u=l%d,c>0)){let h=0,v=c,p=0;const m=o.length;for(;v>0;){const y=Math.floor(d/Ft);let g=o.substring(p,p+y);p+=y;let x=this.measureTextWidth(g);for(let b=p;b<m;b++){g+=o[b];const _=this.measureTextWidth(g);if(_>d){p=b,h+=d-x;break}x=_}v--}u+=h}const a=wn(f)?Ft:kn;return u+a>d&&(u=0,c+=1),{x:u,y:rt*(s+c),word:f,wordWidth:a}}showCursor(t=!0){this._isShowCursor!==t&&(this.cursor.style("visibility",t?"visible":"hidden"),this._isShowCursor=t)}relocateCursorPosition(){const t=this.textarea.el;this.showCursor();const{x:n,y:r,word:i,wordWidth:o}=this.getCursorPosition();let s=n;if(r===0&&n<this.headerWidth){const f=this.header.length;t.setSelectionRange(f,f),s=this.headerWidth}this.cursor.style({left:`${s+this.padding}px`,top:`${r+this.padding-t.scrollTop}px`,width:`${o}px`}),this.cursorText.text(i)}focus(){this.textarea.el.focus()}pushText(t){const n=this.textarea.el;n.selectionStart=n.selectionEnd=n.value.length,this.insertText(t)}insertText(t){t&&document.execCommand("insertText",!1,t)}replaceText(t){this.clearContent(!1),this.pushText(t),this.relocateCursorPosition()}clearContent(t=!0){const n=this.textarea.el,r=this.header.length;n.selectionStart=r,n.selectionEnd=n.value.length+1,r!==n.value.length&&(document.execCommand("delete",!1),t&&this.relocateCursorPosition())}setCursorToHead(){const t=this.textarea.el;t.selectionStart=t.selectionEnd=this.header.length}}class Sn extends mt.Eveit{constructor(t,n){super(),this.editor=new ne(n),this.container=C.div.style({...$.FullParent,zIndex:100,backgroundColor:"#000"}).append(this.editor.container).show(()=>t.showEditor),this.container.on("click",r=>{r.stopPropagation()}),this.container.on("keydown",r=>{if(r.code==="KeyS"&&dt(r)){const i=this.editor.value;this.editor.clearContent(),this.emit("edit-done",i),r.preventDefault()}r.code==="Escape"&&(this.editor.clearContent(),this.emit("edit-cancel"))})}vi(t){this.editor.textarea.el.focus(),this.editor.replaceText(t)}}function Cn(){const e="_web_term_ui_history;";return{read:()=>localStorage.getItem(e)||"[]",write:t=>(localStorage.setItem(e,t),!0)}}class En extends mt.Eveit{constructor({title:t="",historyMax:n=100,storageProvider:r=Cn(),container:i,getHeader:o}={}){if(super(),this.store=qt({showEditor:!1}),pn(),this.title=t,this.history=new Ze(n,r),this.editor=new Sn(this.store,{mode:"full"}),this.input=new ne({header:o,size:"auto",mode:"inline"}),this.display=new vn(this.store,t),t&&this.display.pushContent(t),!i)this.container=C.div.class(ft).style({position:"fixed",top:0,left:0,width:"100%",height:"100%"}),dn(this.container,"body");else{if(typeof i=="string"){const s=document.querySelector(i);if(!s)throw new Error("Container not exists");this.container=new I(s)}else this.container=new I(i);this.container.addClass(ft)}this.initEvents(),this.render()}initEvents(){this.input.on("key",n=>{switch(n){case"Enter":{const r=this.input.value;r&&this.history.push(r),this.emit("enter",r)}break;case"ArrowDown":{const r=this.history.down();typeof r=="string"&&this.input.replaceText(r)}break;case"ArrowUp":{const r=this.history.up(this.input.value);typeof r=="string"?this.input.replaceText(r):this.input.setCursorToHead()}break;case"Tab":this.emit("tab");break}}),this.input.on("input",()=>{this.history.checkLatest(this.input.value)}),this.container.on("click",()=>{this.input.focus()});const t=()=>{this.store.showEditor=!1,this.input.focus()};this.editor.on("edit-done",n=>{t(),this.emit("edit-done",n)}),this.editor.on("edit-cancel",()=>{t(),this.emit("edit-cancel")})}render(){this.container.style({cursor:"text",backgroundColor:"#000",color:"#fff",fontSize:"16px",lineHeight:"20px",fontFamily:'Menlo, Monaco, "Courier New", monospace',overflow:()=>this.store.showEditor?"hidden":"auto"}).append(this.mainContainer=C.div.append(this.display.container,this.input.container),this.editor.container)}clearHistory(){this.history.clear()}write(t){this.display.pushContent(t),this.input.clearContent(),this.container.el.scrollTop=this.container.el.scrollHeight}insertEdit(t){this.editor.editor.insertText(t)}replaceEdit(t){this.editor.editor.replaceText(t)}pushEdit(t){this.editor.editor.pushText(t)}vi(t=""){this.store.showEditor=!0,this.editor.vi(t)}}const L=new En({title:['This is a Demo. Type "vi" to use vi editor',`And "ctrl/cmd + s" to Save, "esc" to cancel.
`].join(`
`),container:"#container",getHeader:()=>"/ admin$ "});L.on("enter",e=>{e==="vi"?L.vi(`test
11`):L.write(`Exec "${e}"`)});L.on("edit-done",e=>{L.write(`Edit Save: ${e}`)});L.on("tab",()=>{L.insertEdit("[test]")});document.getElementById("code").appendChild(Me({code:`import {WebTerm} from 'web-term-ui';
const term = new WebTerm({
    title: [
        'This is a Demo. Type "vi" to use vi editor',
        'And "ctrl/cmd + s" to Save, "esc" to cancel.\\n'
    ].join('\\n'),
    container: '#container',
    getHeader: () => '/ admin$ '
});
term.on('enter', v => {
    if (v === 'vi') term.vi();
    else term.write(\`Exec "\${v}"\`);
});
term.on('edit-done', v => {
    term.write(\`Edit Save: \${v}\`);
});
term.on('tab', () => {
    term.insertEdit('[test]');
});`}));window.term=L;
