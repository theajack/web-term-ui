(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function it(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function ce(n){if(Array.isArray(n))return it(n)}function U(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function $t(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,pe(r.key),r)}}function Z(n,e,t){return e&&$t(n.prototype,e),t&&$t(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function he(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function fe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function de(n){return ce(n)||he(n)||ye(n)||fe()}function ve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function pe(n){var e=ve(n,"string");return typeof e=="symbol"?e:e+""}function D(n){"@babel/helpers - typeof";return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(n)}function ye(n,e){if(n){if(typeof n=="string")return it(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?it(n,e):void 0}}function pt(n){return!!(n!=null&&n.__isRef)}var ot=null;function ge(n){return ot=n,function(){ot=null}}function me(){return ot}var be=function(){function n(e,t){var r=this;U(this,n),this.__isComputed=!0,this._dirty=!1,this._listeners=[],this._clearSub=[],this._compute=e,this._set=t;var i=ge(function(o,s){var h=function(){if(r._dirty=!0,r._listeners.length>0){var c=r._value,u=r.value;r._listeners.forEach(function(d){d(u,c)})}},l=typeof s=="string"?o.$sub(s,h):o.sub(h);r._clearSub.push(l)});this._refreshValue(),i()}return Z(n,[{key:"value",get:function(){var e;return this._dirty&&this._refreshValue(),xe(this),(e=me())===null||e===void 0||e(this),this._value},set:function(e){if(!this._set){console.warn("Computed not have set property");return}this._set(e)}},{key:"_refreshValue",value:function(){this._value=this._compute(),this._dirty=!1}},{key:"sub",value:function(e){var t=this;return this._listeners.push(e),function(){return t.unsub(e)}}},{key:"unsub",value:function(e){var t=this._listeners.indexOf(e);return t!==-1?(this._listeners.splice(t,1),!0):!1}},{key:"destroy",value:function(){this._listeners=[],this._clearSub.forEach(function(e){return e()}),this._clearSub=[]}}])}();function we(n,e){return J(n)?n:new be(n,e)}function J(n){return!!(n!=null&&n.__isComputed)}function qt(n){return typeof n=="function"||J(n)}var W={};function xe(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",t;J(n)||pt(n)?(e="value",t=function(r){return n.sub(r)}):t=function(r){return n.$sub(e,r)},Object.assign(W,{set:function(r){n[e]=r},get:function(){return n[e]},sub:t})}function ke(n,e){if(!W)throw new Error("Bind 传入参数错误");(J(e)||pt(e))&&(e=e.value);var t=W.get,r=W.set,i=W.sub;if(t()!==e)throw new Error("Bind 传入参数错误");var o=n.el,s="string";if(o.tagName==="INPUT"){var h=n.attr("type");h==="number"||h==="range"?s="number":(h==="radio"||h==="checkbox")&&(s="boolean")}var l=function(){if(s==="boolean")return o.checked;var a=n.value();return s==="number"?parseFloat(a):a},c=function(a){if(s==="boolean"){o.checked=a;return}n.value(a)},u=!1,d=function(){u=!0,r(l()),u=!1};c(t()),n.on("input",function(){d()}),n.on("change",function(){d()}),i(function(a){u||c(a)})}function j(n,e){if(pt(n))n.sub(function(){e(n.value)}),e(n.value);else if(qt(n)){var t=we(n);t.sub(function(){e(t.value)}),e(t.value)}else e(n)}var Ut=function(){function n(e){U(this,n),this.__ld_type=G.Text,this.el=document.createTextNode(""),typeof e<"u"&&this.text(e)}return Z(n,[{key:"text",value:function(e){var t=this;return j(e,function(r){return t.el.textContent=r}),this}},{key:"mounted",value:function(e){return this.__mounted=e,this}}])}(),_e=function(){function n(){U(this,n),this.__ld_type=G.Frag,this.children=[],this.el=document.createDocumentFragment()}return Z(n,[{key:"append",value:function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return yt(r,function(o,s){e.children.push(s),e.el.appendChild(o)}),this}},{key:"mounted",value:function(e){return this.__mounted=function(t){t.children.forEach(function(r){var i;(i=r.__mounted)===null||i===void 0||i.call(r,r)}),e(t)},this}}])}(),G=function(n){return n[n.Dom=0]="Dom",n[n.Text=1]="Text",n[n.Frag=2]="Frag",n}(G||{});function yt(n,e){n.forEach(function(t){var r;if(Array.isArray(t)){yt(t,e);return}var i=t;qt(i)?(i=new Ut(i),i=i.el):typeof i.__ld_type=="number"?i=i.el:t instanceof HTMLElement||(i=document.createTextNode("".concat(t))),e(i,t),(r=t.__mounted)===null||r===void 0||r.call(t,t)})}var Se=/(width$)|(height$)|(top$)|(bottom$)|(left$)|(right$)|(^margin)|(^padding)|(font-?size)/i,Ct=/!important$/,$e=/^[0-9]+$/;function Ce(n,e){n=Ee(n);var t="";return Ct.test(e)&&(t="important",e=e.replace(Ct,"")),$e.test(e)&&Se.test(n)&&(e="".concat(e,"px")),{cssKey:n,cssValue:e,important:t}}function Ee(n){for(var e=n.length,t="",r=0;r<e;r++){var i=n[r],o=i.charCodeAt(0);o>=65&&o<=90?t+="-".concat(i.toLowerCase()):t+=i}return t}var Te=["a","div","h1","h2","h3","h4","h5","h6","button","canvas","code","pre","table","th","td","tr","video","audio","ol","select","option","p","i","iframe","img","input","label","ul","li","span","textarea","form","br","tbody","object","progress","section","slot","small","strong","sub","summary","sup","template","title","var","style","meta","head","link","svg","script"];function Pe(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return gt(n,e,document)}function gt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;if(e){var r=t.querySelector(n);if(r)return new K(r);throw new Error("Element is not exist"+n)}for(var i=t.querySelectorAll(n),o=[],s=0;s<i.length;s++)o.push(new K(i[s]));return o}var C=function(){var n=function(t){return new K(t)},e={frag:{get:function(){return new _e}},text:{get:function(){var t=function(r){return new Ut(r)};return t.text=t,t}}};return Te.forEach(function(t){e[t]={get:function(){return n(t)}}}),Object.defineProperties(n,e),n}();function je(n,e){var t,r=e;typeof e=="string"?r=gt(e,!0):e instanceof HTMLElement&&(r=new K(e)),Array.isArray(n)?(t=r).append.apply(t,de(n)):r.append(n)}var K=function(){function n(e){U(this,n),this.__ld_type=G.Dom,this.__xr_funcs={},this.el=typeof e=="string"?document.createElement(e):e}return Z(n,[{key:"_ur",value:function(e,t){var r=this;return typeof t>"u"?this.el[e]:(j(t,function(i){return r.el[e]=i}),this)}},{key:"class",value:function(e){return this._ur("className",e)}},{key:"id",value:function(e){return this._ur("id",e)}},{key:"addClass",value:function(e){return this.el.classList.add(e),this}},{key:"removeClass",value:function(e){return this.el.classList.remove(e),this}},{key:"hasClass",value:function(e){var t;return(t=this.el)===null||t===void 0?void 0:t.classList.contains(e)}},{key:"toggleClass",value:function(e,t){var r;return!!((r=this.el)!==null&&r!==void 0&&r.classList.toggle(e,t))}},{key:"remove",value:function(){var e;return(e=this.el)===null||e===void 0||e.remove(),this}},{key:"text",value:function(e){return typeof e>"u"?this.el.innerText:this._ur("innerText",e)}},{key:"mounted",value:function(e){return this.__mounted=e,this}},{key:"attr",value:function(e,t){var r=this;if(D(e)==="object"){for(var i in e)this.attr(i,e[i]);return this}return typeof t>"u"?this.el.getAttribute(e)||"":(j(t,function(o){return r.el.setAttribute(e,o)}),this)}},{key:"removeAttr",value:function(e){return this.el.removeAttribute(e),this}},{key:"func",value:function(e,t){return typeof t>"u"?this.__xr_funcs[e]:(this.__xr_funcs[e]=t,this)}},{key:"data",value:function(e,t){var r=this;if(D(e)==="object"){for(var i in e)this.data(i,e[i]);return this}if(typeof t>"u"){var o;return((o=this.el.__xr_data)===null||o===void 0?void 0:o[e])||null}return this.el.__xr_data||(this.el.__xr_data={}),j(t,function(s){return r.el.__xr_data[e]=s}),this}},{key:"style",value:function(e,t){var r=this.el.style;if(typeof t<"u")return j(t,function(o){var s=Ce(e,o),h=s.important,l=s.cssValue,c=s.cssKey;r.setProperty(c,l,h)}),this;if(typeof e=="string")return r[e];for(var i in e)this.style(i,e[i]);return this}},{key:"value",value:function(e){return this._ur("value",e)}},{key:"html",value:function(e){return this._ur("innerHTML",e)}},{key:"outerHtml",value:function(e){var t=this;return typeof e>"u"?this.el.outerHTML:(j(e,function(r){t.html(r),t.el=t.el.children[0]}),this)}},{key:"child",value:function(e){var t=this.el.children[e];return t?new n(t):null}},{key:"children",value:function(){for(var e=this.el.children.length,t=[],r=0;r<e;r++)t.push(this.child(r));return t}},{key:"click",value:function(e){return this.on("click",e)}},{key:"on",value:function(e,t){if(D(e)==="object"){for(var r in e)this.on(r,e[r]);return this}var i=this.el;if(typeof t=="function")this.el.addEventListener(e,t);else{var o,s=function(h){var l;t.self&&h.target!==i||(t.stop&&h.stopPropagation(),t.prevent&&h.preventDefault(),t.once&&i.removeEventListener(e,s,t.capture),(l=t.listener)===null||l===void 0||l.call(t,h))};i.addEventListener(e,s,(o=t.capture)!==null&&o!==void 0?o:!1)}return this}},{key:"append",value:function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return yt(r,function(o){e.el.appendChild(o)}),this}},{key:"ref",value:function(e){return e(this),this}},{key:"hide",value:function(){return this.display("none")}},{key:"display",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"block";return this.style("display",e)}},{key:"show",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";return j(e,function(i){t.display(i?r:"none")}),this}},{key:"query",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return gt(e,t,this.el)}},{key:"src",value:function(e){return this._ur("src",e)}},{key:"parent",value:function(){return this.el.parentElement}},{key:"empty",value:function(){return this.html("")}},{key:"name",value:function(e){return this.attr("__xr_name",e)}},{key:"find",value:function(e){return this.query('[__xr_name="'.concat(e,'"]'),!0)}},{key:"type",value:function(e){return this.attr("type",e)}},{key:"bind",value:function(e){return ke(this,e),this}}])}();function Et(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Tt(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=Le(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,s=!0,h=!1;return{s:function(){t=t.call(n)},n:function(){var l=t.next();return s=l.done,l},e:function(l){h=!0,o=l},f:function(){try{s||t.return==null||t.return()}finally{if(h)throw o}}}}function Ae(n,e,t){return(e=ze(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Pt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function _(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Pt(Object(t),!0).forEach(function(r){Ae(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Pt(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Oe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ze(n){var e=Oe(n,"string");return typeof e=="symbol"?e:e+""}function at(n){"@babel/helpers - typeof";return at=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(n)}function Le(n,e){if(n){if(typeof n=="string")return Et(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Et(n,e):void 0}}var k={FontFamily:'Menlo, Monaco, "Courier New", monospace',FontSize:14,LineHeight:18,CodePadding:10,PLeft:8};function He(n){var e=document.createElement("canvas"),t=e.getContext("2d");return t.font=n,function(r){return r?t.measureText(r).width:0}}function Ie(n,e){var t=[],r="#0b8c0b",i=.4,o=He("14px Menlo, Monaco, Courier New, monospace"),s=Tt(e),h;try{for(s.s();!(h=s.n()).done;){var l=h.value,c={color:l.color||r,opacity:l.opacity||i};if(We(l)){var u=n.matchAll(l.match),d=Tt(u),a;try{for(d.s();!(a=d.n()).done;){var f=a.value,p=n.substring(0,f.index),v=p.split(`
`),y=v.pop();t.push(_({left:o(y)+k.PLeft,top:v.length*k.LineHeight,width:o(f[0]),index:v.length},c))}}catch($){d.e($)}finally{d.f()}}else{var g=l.row,m=l.column,w=l.range,S=w===void 0?1:w,P=n.split(`
`);debugger;t.push(_({left:o(P[g].substring(0,m))+k.PLeft,top:g*k.LineHeight,index:g,width:o(P[g].substring(m,m+S))},c))}}}catch($){s.e($)}finally{s.f()}return t}function We(n){return typeof n.match<"u"}function Me(n){return n.map(function(e){return C.div.class("highlight-bar").style({position:"absolute",backgroundColor:Zt(e),left:"0",top:"".concat(k.CodePadding+e.top,"px"),height:"".concat(k.LineHeight,"px"),width:"100%"}).append(C.span.style({position:"absolute",backgroundColor:e.color,left:"".concat(e.left,"px"),width:"".concat(e.width,"px"),height:"100%"}))})}function Zt(n){var e=n.color,t=n.opacity;if(e[0]==="#"){var r=function(o){var s=Math.round(o*1.6*10).toString(16);return s.length===2?"F":s},i=r(t);return e.length===4?"".concat(e).concat(i):"".concat(e).concat(i).concat(i)}else if(e.startsWith("rgba"))return e.replace(/,([0-9]*)\)/,",".concat(t,")"));return e.replace(/,([0-9]*)\)/,function(o,s){return",".concat(s,",").concat(t,")")})}var nt="#9cdcfe";je(C.style.text(`
.xhl-punc {
    color: #ddd;
}
.xhl-bkt {
    color: #ffe11c;
}
.xhl-k1 {
    color: #569cd6;
}
.xhl-k2 {
    color: #c586c0;
}
.xhl-k3 {
    color: #3ac9b0;
}
.xhl-num {
    color: #b5cea8;
}
.xhl-f {
    color: #dcdcaa;
}
.xhl-reg,
.xhl-reg * {
    color: #d16969;
}
.xhl-str,
.xhl-str *,
.xhl-str .xhl-cm {
    color: #ce9178;
}
.xhl-cm,
.xhl-cm * {
    color: #6a8a35;
}
.xhl-jsx {
    color: #569cd6;
}
.xhl-tmp,.xhl-tmp .xhl-punc,.xhl-tmp .xhl-bkt{
    color: rgb(86,156,214);
}
.xhl-def{color: `.concat(nt,`;}
.xhl-def .xhl-punc {
    color: #ddd;
}
.xhl-pre {
    background-color: #111;
    padding: 10px;
    color: `).concat(nt,`;
    font-size: 14px;
    margin: 0;
    overflow-x: auto;
    font-family: Menlo, Monaco, "Courier New", monospace;
    line-height: 18px;
}
.xhl-container {
    overflow: auto;
}
.xhl-container .xhl-pre{
    background-color: transparent;
    padding: 0;
    font-family: inherit;
    line-height: inherit;
    font-size: inherit;
    color: inherit;
    overflow: unset;
    color: `).concat(nt,`;
}
.lhl-container{
    overflow: auto;
}
.xhl-pre::-webkit-scrollbar,
.lhl-container::-webkit-scrollbar,
.xhl-container::-webkit-scrollbar {
    width: 5px;
    cursor: pointer;
    height: 5px;
}
.xhl-pre::-webkit-scrollbar-button, 
.lhl-container::-webkit-scrollbar-button,
.xhl-container::-webkit-scrollbar-button {
    display: none;
}
.xhl-pre::-webkit-scrollbar-track,
.lhl-container::-webkit-scrollbar-track,
.xhl-container::-webkit-scrollbar-track {
    background-color: transparent;
}
.xhl-pre::-webkit-scrollbar-thumb,
.lhl-container::-webkit-scrollbar-thumb,
.xhl-container::-webkit-scrollbar-thumb {
    background-color: #666;
    cursor: pointer;
    background-clip: initial;
}
.xhl-pre::-webkit-scrollbar-thumb:hover,
.lhl-container::-webkit-scrollbar-thumb:hover,
.xhl-container::-webkit-scrollbar-thumb:hover {
    background-color: #888;
    cursor: pointer;
}
`)),document.head);function De(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;n=n.replace(/\&lt;/g,"__LT__").replace(/\&gt;/g,"__GT__");var t=Ne(n.replace(/</g,"&lt;").replace(/>/g,"&gt;"));return e?"<pre class='xhl-pre'>".concat(t,"</pre>"):t}var jt=["var","new","const","let","typeof","in","function","this","true","false","null","undefined","async","delete","class","extends"],At=["return","for","while","else if","if","else","switch","case","default","break","continue","await","yield","try","catch","finally","throw","export","import","from"],Ot=["console","window","document","Date","Array","Object","Boolean","Number","String","alert","RegExp","Function","JSON","Date"],O=["\\/","\\","\\(","\\)","\\[","\\]","\\{","\\}","\\+","\\-","\\*","\\=",",","\\.",":","%","_","\\$","@","#","\\^","\\|","!","~"],zt=["\\(","\\)","\\[","\\]","\\{","\\}"],R="(^|(&lt;)|(&lt;)|[\\n\\t;<> "+O.join("")+"])",st="(["+O.join("")+"\\n;<> ]|(&lt;)|(&lt;)|$)";function E(n,e){return'<span class="xhl-'+e+'">'+n+"</span>"}function Lt(n,e,t,r){return n.replace(e,function(i){return typeof r=="string"?i.replace(r,E(r,t)):at(r)==="object"?i.replace(r,function(o){return E(o,t)}):E(typeof r=="function"?r.apply(void 0,arguments):i,t)})}function Fe(n,e,t,r){if(n.indexOf("</span>")!==-1){var i=typeof e=="string"?Be(e):e[0];n=n.replace(i,function(s){var h=typeof e=="string"?new RegExp(e,"g"):e[1];return Lt(s,h,t,r)})}else{var o=typeof e=="string"?new RegExp(e,"g"):e[1];n=Lt(n,o,t,r)}return n}function Be(n){return new RegExp(n+"(?![^<]*>|[^<>]*</)","g")}function Ne(n){return n=Ve(n,[["\\$\\{(.*)\\}","tmp",function(e,t){return e.replace(t,E(t,"def"))}],[[/("(?:[^"\\]|\\.)*")|(\'(?:[^\'\\]|\\.)*\')|(`((?:[^`\\]|\\.)|\n)*`)(?![^<]*>|[^<>]*<\/)/g,/("(?:[^"\\]|\\.)*")|(\'(?:[^\'\\]|\\.)*\')|(`((?:[^`\\]|\\.)|\n)*`)/g],"str"],[`(//.*(
|$))|(\\/\\*(.|
)*?\\*\\/)`,"cm"],["\\/[a-zA-Z0-9"+O.slice(1).join("")+" ]+\\/[gi]?","reg"],z(jt,"k1"),z(jt,"k1"),z(At,"k2"),z(At,"k2"),z(Ot,"k3"),z(Ot,"k3"),[R+"[a-zA-Z_\\$]+[a-zA-Z_\\$0-9]* ?\\(","f",new RegExp("[a-zA-Z_\\$]+[a-zA-Z_\\$0-9]*","g")],[R+"[0-9]+(\\.?[0-9]+)?"+st,"num",/[0-9]+(.?[0-9]+)?/g],[R+"[0-9]+(\\.?[0-9]+)?"+st,"num",/[0-9]+(.?[0-9]+)?/g],[`&lt;\\/?[a-zA-Z\\-]*(\\/| |
|&gt;)`,"jsx"],["["+zt.join("")+"]","bkt",new RegExp("["+zt.join("")+"]","g")],["["+O.join("")+"]","punc",new RegExp("["+O.join("")+"]","g")],["["+O.join("")+"]","punc",new RegExp("["+O.join("")+"]","g")]]),n=n.replace(/\&lt;/g,E("<","punc")).replace(/\&gt;/g,E(">","punc")).replace(/;/g,E(";","punc")).replace(/&/g,E("&","punc")),n=n.replace(/__LT__/g,"&amp;lt;").replace(/__GT__/g,"&amp;gt;"),n}function z(n,e){return[R+"(("+n.join(")|(")+"))"+st,e,new RegExp("(("+n.join(")|(")+"))","g")]}function Ve(n,e){for(var t=0;t<e.length;t++)e[t].unshift(n),n=Fe.apply(null,e[t]);return n}function Re(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{code:""},e=n.code,t=e===void 0?"":e,r=n.borderRight,i=r===void 0?!1:r,o=n.startIndex,s=o===void 0?1:o,h=n.highlights,l=h===void 0?[]:h,c=n.style,u=c===void 0?{}:c,d=n.codeStyle,a=d===void 0?{}:d,f=n.lineHeight,p=f===void 0?k.LineHeight:f,v=n.lineCount,y={backgroundColor:"#111",color:"#fff",fontFamily:k.FontFamily,margin:"0",fontSize:"".concat(k.FontSize,"px"),paddingTop:"".concat(k.CodePadding,"px"),paddingBottom:"0",paddingLeft:"".concat(k.PLeft,"px"),lineHeight:"".concat(p,"px")},g=_({overflowX:"auto",borderRight:i?"1px solid #666":"none",flex:"1",position:"relative"},y),m=t.split(`
`),w=t;t.length<=1e4?w=De(w,!1):console.warn("当前代码过长，已关闭代码高亮");var S=_({display:"flex"},u);v&&(S.minHeight="".concat(v*p+k.CodePadding*2,"px"));var P=Ie(t,l);return C.div.style(S).append(C.div.style(_(_({},y),{},{flexDirection:"column",display:"flex",borderRight:"1px solid #aaa",padding:"".concat(k.CodePadding,"px 0px"),color:"#ddd",textAlign:"right"})).append(m.map(function($,I){var N=P.find(function(et){return et.index===I});return C.span.style({padding:"0px 5px",backgroundColor:N?Zt(N):"transparent"}).text(s+I)})),C.pre.class("xhl-container").style(_(_({},g),a)).mounted(function($){setTimeout(function(){if(P.length){var I=P[0];if($.el.scrollLeft=I.left-($.el.offsetWidth-I.width)/2,ResizeObserver){var N=new ResizeObserver(function(et){var St=et[0].target;Pe(".highlight-bar").forEach(function(le){return le.style("maxWidth","".concat(St==null?void 0:St.scrollWidth,"px"))})});N.observe($.el)}}},100)}).append(Me(P),C.div.class("xhl-pre").style(_(_({},a),{},{position:"relative"})).html(w))).el}var Ke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ut={exports:{}};(function(n,e){(function(t,r){r(e)})(Ke,function(t){function r(l){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(l)}function i(l,c){for(var u=0;u<c.length;u++){var d=c[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,d.key,d)}}function o(l){return function(c){if(Array.isArray(c))return s(c)}(l)||function(c){if(typeof Symbol<"u"&&c[Symbol.iterator]!=null||c["@@iterator"]!=null)return Array.from(c)}(l)||function(c,u){if(c){if(typeof c=="string")return s(c,u);var d=Object.prototype.toString.call(c).slice(8,-1);return(d=d==="Object"&&c.constructor?c.constructor.name:d)==="Map"||d==="Set"?Array.from(c):d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?s(c,u):void 0}}(l)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function s(l,c){(c==null||c>l.length)&&(c=l.length);for(var u=0,d=new Array(c);u<c;u++)d[u]=l[u];return d}var h=function(){function l(){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.usePrevEmit=!0,this._map={},this._prevData={}}var c,u,d;return c=l,d=[{key:"_",get:function(){return this.__||(this.__=new l),this.__}},{key:"usePrevEmit",get:function(){return this._.usePrevEmit},set:function(a){this._.usePrevEmit=a}},{key:"emit",value:function(a){for(var f,p=arguments.length,v=new Array(1<p?p-1:0),y=1;y<p;y++)v[y-1]=arguments[y];(f=this._).emit.apply(f,[a].concat(v))}},{key:"off",value:function(a,f){this._.off(a,f)}},{key:"clear",value:function(a){this._.clear(a)}},{key:"on",value:function(a,f){this._.on(a,f)}},{key:"once",value:function(a,f){this._.once(a,f)}},{key:"onWait",value:function(a){this._.onWait(a)}},{key:"head",value:function(a,f){this._.head(a,f)}},{key:"headOnce",value:function(a,f){this._.headOnce(a,f)}}],(u=[{key:"hasEvent",value:function(a){return!!this._map[a]}},{key:"on",value:function(a,f){var p=this;if(r(a)==="object"){var v,y=[];for(v in a)y.push(this.on(v,a[v]));return function(){y.forEach(function(m){return m()})}}if(!f)throw new Error("fn is required");var g=this._formatTarget(f);return this._checkPrev(a,g)&&g.once?function(){}:(this._getList(a).push(g),function(){p.off(a,g)})}},{key:"_formatTarget",value:function(a,f){return typeof a=="function"?{listener:a,once:f!=null&&f,prev:this.usePrevEmit}:(typeof f=="boolean"&&(a.once=f),a)}},{key:"emit",value:function(a){for(var f=arguments.length,p=new Array(1<f?f-1:0),v=1;v<f;v++)p[v-1]=arguments[v];this._prevData[a]=p;var y=this._map[a];if(!y)return!1;for(var g=0;g<y.length;g++){var m=y[g];m.listener.apply(m,p),m.once&&(y.splice(g,1),g--)}return!0}},{key:"off",value:function(a,f){if(a=this._map[a],!a)return!1;var p=a.findIndex(function(v){return v===f||v.listener===f});return p!==-1&&(a.splice(p,1),!0)}},{key:"clear",value:function(a){return!!this._map[a]&&(delete this._map[a],delete this._prevData[a],!0)}},{key:"onWait",value:function(a,f){var p=this;return new Promise(function(v){var y=function(){for(var g=arguments.length,m=new Array(g),w=0;w<g;w++)m[w]=arguments[w];return v(m)};f&&(y=Object.assign({listener:y},f)),p.once(a,y)})}},{key:"destroy",value:function(){this._map={},this._prevData={}}},{key:"_checkPrev",value:function(a,f){return f.prev?(a=this._prevData[a],a!==void 0&&(f.listener.apply(f,o(a)),!0)):!1}},{key:"once",value:function(a,f){return this.on(a,this._formatTarget(f,!0))}},{key:"head",value:function(a,f){var p=this,v=this._formatTarget(f);return this._checkPrev(a,v)&&v.once?function(){}:(this._getList(a).unshift(v),function(){p.off(a,f)})}},{key:"headOnce",value:function(a,f){return this.head(a,this._formatTarget(f,!0))}},{key:"_getList",value:function(a){var f=this._map[a];return f||(this._map[a]=f=[]),f}}])&&i(c.prototype,u),d&&i(c,d),Object.defineProperty(c,"prototype",{writable:!1}),l}();h.version="0.0.3",t.Eveit=h,t.default=h,Object.defineProperty(t,"__esModule",{value:!0})})})(ut,ut.exports);var mt=ut.exports;function lt(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function qe(n){if(Array.isArray(n))return lt(n)}function Ue(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ht(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Ye(r.key),r)}}function Ze(n,e,t){return e&&Ht(n.prototype,e),t&&Ht(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Je(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Ge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function It(n){return qe(n)||Je(n)||Qe(n)||Ge()}function Xe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ye(n){var e=Xe(n,"string");return typeof e=="symbol"?e:e+""}function Qe(n,e){if(n){if(typeof n=="string")return lt(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?lt(n,e):void 0}}var V=Symbol("E"),bt=function(n){return n[n.Fork=0]="Fork",n[n.Append=1]="Append",n}(bt||{}),Jt=function(){function n(){var e=this,t,r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.max,s=o===void 0?0:o,h=i.useStorage,l=h===void 0?!1:h,c=i.storageKey,u=c===void 0?"_def_history_stack":c,d=i.mode,a=d===void 0?0:d,f=i.storageProvider,p=i.onStepChange,v=i.onHistorySizeChange,y=i.onHistoryOut;if(Ue(this,n),this.step=0,this.size=0,this.max=40,this.list=[],this.index=0,this.End=V,this.isActive=!1,this.max=s,this.mode=a,l!==!1&&(f||u)&&(l=!0),l&&(this.storageProvider=f||{read:function(){var m=localStorage.getItem(u);return m?JSON.parse(m):[]},write:function(m){localStorage.setItem(u,JSON.stringify(m))}}),p&&(this.osc=function(){return p(e.step)}),v&&(this.ohsc=function(){return v(e.size)}),this.oho=y,(t=this.osc)===null||t===void 0||t.call(this),(r=this.ohsc)===null||r===void 0||r.call(this),l){var g=this.storageProvider.read();g instanceof Promise?g.then(function(m){e.useCache(m)}):this.useCache(g)}}return Ze(n,[{key:"useCache",value:function(e){e.length!==0&&this.push.apply(this,It(e))}},{key:"setMax",value:function(e){this.max=e}},{key:"setStep",value:function(e){var t;this.step=e,(t=this.osc)===null||t===void 0||t.call(this)}},{key:"setHistoryIndex",value:function(e){var t;this.isActive||(this.isActive=!0),this.index=e,this.size=e,(t=this.ohsc)===null||t===void 0||t.call(this)}},{key:"back",value:function(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(!this.canBack(t))return t>1&&(this.setStep(this.step-this.index),this.setHistoryIndex(0)),this.End;this.setStep(this.step-t),this.setHistoryIndex(this.index-t);var r=this.list[this.index];return(e=this.oho)===null||e===void 0||e.call(this,r),r}},{key:"canBack",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.index-e>=0}},{key:"first",value:function(){return this.list.length===0?V:(this.setStep(this.step-this.index),this.setHistoryIndex(0),this.list[0])}},{key:"last",value:function(){return this.list.length===0?V:(this.setStep(this.step+this.list.length-this.index),this.setHistoryIndex(this.list.length-1),this.list[this.list.length-1])}},{key:"forward",value:function(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(!this.canForward(t))return t>1&&(this.setStep(this.step+this.list.length-this.index),this.setHistoryIndex(this.list.length-1)),this.End;this.setStep(this.step+t),this.setHistoryIndex(this.index+t);var r=this.list[this.index];return(e=this.oho)===null||e===void 0||e.call(this,r),r}},{key:"isEnd",value:function(e){return e===V}},{key:"canForward",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.index+e<this.list.length}},{key:"pop",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,t=this.list.length;if(t<=e){var r=It(this.list);return this.clear(),r}var i=t-e,o=this.list.splice(i),s=this.list.length;return s<this.index&&(this.setHistoryIndex(s),this.setStep(this.step-(this.index-s))),o}},{key:"push",value:function(){var e,t=this.list.length;this.index<t&&(this.step++,this.index++,this.mode===0&&this.list.splice(this.index));var r=arguments.length,i=0,o=r;this.max>0&&t+r>this.max&&(i=t+r-this.max,o=r-i),(e=this.list).push.apply(e,arguments),i&&this.list.splice(0,i),this._onListChange(),o&&(this.mode===1?this.setHistoryIndex(this.list.length):this.setHistoryIndex(this.index+o)),this.mode===1?this.setStep(this.list.length):this.setStep(this.step+o),this.isActive&&(this.isActive=!1)}},{key:"clear",value:function(){this.list=[],this._onListChange(),this.setHistoryIndex(0),this.setStep(0),this.isActive=!1}},{key:"replace",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.index;typeof this.list[t]>"u"||(this.list[t]=e,this._onListChange())}},{key:"isLatest",get:function(){return this.index===this.list.length-1}},{key:"_onListChange",value:function(){var e;(e=this.storageProvider)===null||e===void 0||e.write(this.list)}},{key:"current",value:function(){return this.list[this.index]}}])}();Jt.Mode=bt;function ct(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function tn(n){if(Array.isArray(n))return ct(n)}function X(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Wt(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,an(r.key),r)}}function Y(n,e,t){return e&&Wt(n.prototype,e),t&&Wt(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function en(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function nn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rn(n){return tn(n)||en(n)||sn(n)||nn()}function on(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function an(n){var e=on(n,"string");return typeof e=="symbol"?e:e+""}function F(n){"@babel/helpers - typeof";return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(n)}function sn(n,e){if(n){if(typeof n=="string")return ct(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ct(n,e):void 0}}function wt(n){return!!(n!=null&&n.__isRef)}var ht=null;function un(n){return ht=n,function(){ht=null}}function Gt(){return ht}var ln=function(){function n(e,t){var r=this;X(this,n),this.__isComputed=!0,this._dirty=!1,this._listeners=[],this._clearSub=[],this._compute=e,this._set=t;var i=un(function(o,s){var h=function(){if(r._dirty=!0,r._listeners.length>0){var c=r._value,u=r.value;r._listeners.forEach(function(d){d(u,c)})}},l=typeof s=="string"?o.$sub(s,h):o.sub(h);r._clearSub.push(l)});this._refreshValue(),i()}return Y(n,[{key:"value",get:function(){var e;return this._dirty&&this._refreshValue(),Qt(this),(e=Gt())===null||e===void 0||e(this),this._value},set:function(e){if(!this._set){console.warn("Computed not have set property");return}this._set(e)}},{key:"_refreshValue",value:function(){this._value=this._compute(),this._dirty=!1}},{key:"sub",value:function(e){var t=this;return this._listeners.push(e),function(){return t.unsub(e)}}},{key:"unsub",value:function(e){var t=this._listeners.indexOf(e);return t!==-1?(this._listeners.splice(t,1),!0):!1}},{key:"destroy",value:function(){this._listeners=[],this._clearSub.forEach(function(e){return e()}),this._clearSub=[]}}])}();function cn(n,e){return Q(n)?n:new ln(n,e)}function Q(n){return!!(n!=null&&n.__isComputed)}function Xt(n){return typeof n=="function"||Q(n)}function Yt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={},r={},i={$sub:function(u,d){return t[u]||(t[u]=[]),t[u].push(d),function(){i.$unsub(u,d)}},$unsub:function(u,d){if(t[u]){if(typeof d>"u")return delete t[u],!0;var a=t[u].indexOf(d);return a===-1?!1:(t[u].splice(a,1),!0)}},$get:function(u){return r[u]}},o={},s=function(u){var d=n[u];r[u]=d,o[u]={get:function(){var a;Qt(i,u),(a=Gt())===null||a===void 0||a(i,u);var f=r[u];return f},set:function(a){var f,p=r[u];r[u]=a,(f=t[u])===null||f===void 0||f.forEach(function(v){v(a,p)})}},i[u]=d};for(var h in n)s(h);Object.defineProperties(i,o);var l=function(u){i[u]=function(){for(var d=arguments.length,a=new Array(d),f=0;f<d;f++)a[f]=arguments[f];return e[u].apply(i,a)}};for(var c in e)l(c);return i}var M={};function Qt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",t;Q(n)||wt(n)?(e="value",t=function(r){return n.sub(r)}):t=function(r){return n.$sub(e,r)},Object.assign(M,{set:function(r){n[e]=r},get:function(){return n[e]},sub:t})}function hn(n,e){if(!M)throw new Error("Bind 传入参数错误");(Q(e)||wt(e))&&(e=e.value);var t=M.get,r=M.set,i=M.sub;if(t()!==e)throw new Error("Bind 传入参数错误");var o=n.el,s="string";if(o.tagName==="INPUT"){var h=n.attr("type");h==="number"||h==="range"?s="number":(h==="radio"||h==="checkbox")&&(s="boolean")}var l=function(){if(s==="boolean")return o.checked;var a=n.value();return s==="number"?parseFloat(a):a},c=function(a){if(s==="boolean"){o.checked=a;return}n.value(a)},u=!1,d=function(){u=!0,r(l()),u=!1};c(t()),n.on("input",function(){d()}),n.on("change",function(){d()}),i(function(a){u||c(a)})}function A(n,e){if(wt(n))n.sub(function(){e(n.value,!1)}),e(n.value,!0);else if(Xt(n)){var t=cn(n);t.sub(function(){e(t.value,!1)}),e(t.value,!0)}else return e(n,!0),!1;return!0}var te=function(){function n(e){X(this,n),this.__ld_type=tt.Text,this.el=document.createTextNode(""),typeof e<"u"&&this.text(e)}return Y(n,[{key:"text",value:function(e){var t=this;return A(e,function(r){return t.el.textContent=r}),this}},{key:"mounted",value:function(e){return this.__mounted=e,this}}])}(),fn=function(){function n(){X(this,n),this.__ld_type=tt.Frag,this.children=[],this.el=document.createDocumentFragment()}return Y(n,[{key:"append",value:function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return xt(r,function(o,s){e.children.push(s),e.el.appendChild(o)}),this}},{key:"mounted",value:function(e){return this.__mounted=function(t){t.children.forEach(function(r){var i;(i=r.__mounted)===null||i===void 0||i.call(r,r)}),e(t)},this}}])}(),tt=function(n){return n[n.Dom=0]="Dom",n[n.Text=1]="Text",n[n.Frag=2]="Frag",n}(tt||{});function xt(n,e){n.forEach(function(t){var r;if(Array.isArray(t)){xt(t,e);return}var i=t;Xt(i)?(i=new te(i),i=i.el):typeof i.__ld_type=="number"?i=i.el:t instanceof HTMLElement||(i=document.createTextNode("".concat(t))),e(i,t),(r=t.__mounted)===null||r===void 0||r.call(t,t)})}var dn=/(width$)|(height$)|(top$)|(bottom$)|(left$)|(right$)|(^margin)|(^padding)|(font-?size)/i,Mt=/!important$/,vn=/^[0-9]+$/;function pn(n,e){n=yn(n);var t="";return Mt.test(e)&&(t="important",e=e.replace(Mt,"")),vn.test(e)&&dn.test(n)&&(e="".concat(e,"px")),{cssKey:n,cssValue:e,important:t}}function yn(n){for(var e=n.length,t="",r=0;r<e;r++){var i=n[r],o=i.charCodeAt(0);o>=65&&o<=90?t+="-".concat(i.toLowerCase()):t+=i}return t}var gn=["a","div","h1","h2","h3","h4","h5","h6","button","canvas","code","pre","table","th","td","tr","video","audio","ol","select","option","p","i","iframe","img","input","label","ul","li","span","textarea","form","br","tbody","object","progress","section","slot","small","strong","sub","summary","sup","template","title","var","style","meta","head","link","svg","script"];function ee(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;if(e){var r=t.querySelector(n);if(r)return new T(r);throw new Error("Element is not exist"+n)}for(var i=t.querySelectorAll(n),o=[],s=0;s<i.length;s++)o.push(new T(i[s]));return o}var x=function(){var n=function(t){return new T(t)},e={frag:{get:function(){return new fn}},text:{get:function(){var t=function(r){return new te(r)};return t.text=t,t}}};return gn.forEach(function(t){e[t]={get:function(){return n(t)}}}),Object.defineProperties(n,e),n}();function mn(n,e){var t,r=e;typeof e=="string"?r=ee(e,!0):e instanceof HTMLElement&&(r=new T(e)),Array.isArray(n)?(t=r).append.apply(t,rn(n)):r.append(n)}var T=function(){function n(e){X(this,n),this.__ld_type=tt.Dom,this.__xr_funcs={},this.el=typeof e=="string"?document.createElement(e):e}return Y(n,[{key:"_ur",value:function(e,t){var r=this;return typeof t>"u"?this.el[e]:(A(t,function(i){return r.el[e]=i}),this)}},{key:"class",value:function(e){return this._ur("className",e)}},{key:"id",value:function(e){return this._ur("id",e)}},{key:"addClass",value:function(e){return this.el.classList.add(e),this}},{key:"removeClass",value:function(e){return this.el.classList.remove(e),this}},{key:"hasClass",value:function(e){var t;return(t=this.el)===null||t===void 0?void 0:t.classList.contains(e)}},{key:"toggleClass",value:function(e,t){var r;return!!((r=this.el)!==null&&r!==void 0&&r.classList.toggle(e,t))}},{key:"remove",value:function(){var e;return(e=this.el)===null||e===void 0||e.remove(),this}},{key:"text",value:function(e){return typeof e>"u"?this.el.innerText:this._ur("innerText",e)}},{key:"mounted",value:function(e){return this.__mounted=e,this}},{key:"attr",value:function(e,t){var r=this;if(F(e)==="object"){for(var i in e)this.attr(i,e[i]);return this}return typeof t>"u"?this.el.getAttribute(e)||"":(A(t,function(o){return r.el.setAttribute(e,o)}),this)}},{key:"removeAttr",value:function(e){return this.el.removeAttribute(e),this}},{key:"func",value:function(e,t){return typeof t>"u"?this.__xr_funcs[e]:(this.__xr_funcs[e]=t,this)}},{key:"data",value:function(e,t){var r=this;if(F(e)==="object"){for(var i in e)this.data(i,e[i]);return this}if(typeof t>"u"){var o;return((o=this.el.__xr_data)===null||o===void 0?void 0:o[e])||null}return this.el.__xr_data||(this.el.__xr_data={}),A(t,function(s){return r.el.__xr_data[e]=s}),this}},{key:"style",value:function(e,t){var r=this.el.style;if(typeof t<"u")return A(t,function(o){var s=pn(e,o),h=s.important,l=s.cssValue,c=s.cssKey;r.setProperty(c,l,h)}),this;if(typeof e=="string")return r[e];for(var i in e)this.style(i,e[i]);return this}},{key:"value",value:function(e){return this._ur("value",e)}},{key:"html",value:function(e){return this._ur("innerHTML",e)}},{key:"outerHtml",value:function(e){var t=this;return typeof e>"u"?this.el.outerHTML:(A(e,function(r){t.html(r),t.el=t.el.children[0]}),this)}},{key:"child",value:function(e){var t=this.el.children[e];return t?new n(t):null}},{key:"children",value:function(){for(var e=this.el.children.length,t=[],r=0;r<e;r++)t.push(this.child(r));return t}},{key:"click",value:function(e){return this.on("click",e)}},{key:"on",value:function(e,t){if(F(e)==="object"){for(var r in e)this.on(r,e[r]);return this}var i=this.el;if(typeof t=="function")this.el.addEventListener(e,t);else{var o,s=function(h){var l;t.self&&h.target!==i||(t.stop&&h.stopPropagation(),t.prevent&&h.preventDefault(),t.once&&i.removeEventListener(e,s,t.capture),(l=t.listener)===null||l===void 0||l.call(t,h))};i.addEventListener(e,s,(o=t.capture)!==null&&o!==void 0?o:!1)}return this}},{key:"append",value:function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return xt(r,function(o){e.el.appendChild(o)}),this}},{key:"ref",value:function(e){return e(this),this}},{key:"hide",value:function(){return this.display("none")}},{key:"display",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"block";return this.style("display",e)}},{key:"show",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";return A(e,function(i){t.display(i?r:"none")}),this}},{key:"query",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return ee(e,t,this.el)}},{key:"src",value:function(e){return this._ur("src",e)}},{key:"parent",value:function(){return this.el.parentElement}},{key:"empty",value:function(){return this.html("")}},{key:"name",value:function(e){return this.attr("__xr_name",e)}},{key:"find",value:function(e){return this.query('[__xr_name="'.concat(e,'"]'),!0)}},{key:"type",value:function(e){return this.attr("type",e)}},{key:"bind",value:function(e){return hn(this,e),this}}])}();function Dt(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Ft(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=bn(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,s=!0,h=!1;return{s:function(){t=t.call(n)},n:function(){var l=t.next();return s=l.done,l},e:function(l){h=!0,o=l},f:function(){try{s||t.return==null||t.return()}finally{if(h)throw o}}}}function bn(n,e){if(n){if(typeof n=="string")return Dt(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Dt(n,e):void 0}}var ne="  ";function wn(n){ne=n}function xn(n){kn(this,n,ne)}function kn(n,e,t){var r=t.length;if(e.code==="Tab"){e.preventDefault();var i=Bt(n),o=i.startLineIndex,s=i.start,h=i.end,l=i.lineText.split(`
`);if(e.shiftKey){var c=!0,u=Ft(l),d;try{for(u.s();!(d=u.n()).done;){var a=d.value;a.startsWith(t)?(n.selectionStart=o,n.selectionEnd=o+r,document.execCommand("delete",!1),c&&a.startsWith(t+t)&&(s-=r),h-=r,o+=a.length-r+1):o+=a.length+1,c=!1}}catch(S){u.e(S)}finally{u.f()}console.log(s,h),n.selectionStart=s,n.selectionEnd=h;return}if(l.length===1){rt(t);return}s+=r;var f=Ft(l),p;try{for(f.s();!(p=f.n()).done;){var v=p.value;n.selectionStart=n.selectionEnd=o,rt(t),o+=r+v.length+1,h+=r}}catch(S){f.e(S)}finally{f.f()}n.selectionStart=s,n.selectionEnd=h}else if(e.code==="Enter"&&!e.ctrlKey){for(var y=Bt(n),g=y.lineText.split(`
`)[0],m=`
`,w=0;g.substring(w,w+r)===t;)m+=t,w+=r;w>0&&(rt(m),e.preventDefault())}}function rt(n){n&&document.execCommand("insertText",!1,n)}function Bt(n){var e=n.selectionStart,t=n.selectionEnd,r="",i=n.value;r=i.substring(e,t);var o=i.substring(0,e),s=o.lastIndexOf(`
`),h=s+1;return{start:e,end:t,text:r,lineText:i.substring(h,t),line:r.split(`
`).length,startLineIndex:h}}(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(".style-text{font-family:Menlo,Monaco,Courier New,monospace;font-size:var(--font-size);font-kerning:none;white-space:pre;line-height:var(--line-height);box-sizing:border-box}.full-parent{position:absolute;top:0;left:0;width:100%;height:100%}.editor-textarea::-webkit-scrollbar,.web-term-container::-webkit-scrollbar{width:5px;cursor:pointer;height:5px}.editor-textarea::-webkit-scrollbar-button,.web-term-container::-webkit-scrollbar-button{display:none}.editor-textarea::-webkit-scrollbar-track,.web-term-container::-webkit-scrollbar-track{display:none}.editor-textarea::-webkit-scrollbar-thumb,.web-term-container::-webkit-scrollbar-thumb{background-color:#777;cursor:pointer}.editor-textarea ::selection,.web-term-container ::selection{background-color:var(--selection-bg);color:var(--selection)}.web-term-container{position:relative;font-family:Menlo,Monaco,Courier New,monospace;font-size:var(--font-size);font-kerning:none;white-space:pre;line-height:var(--line-height);box-sizing:border-box;background-color:var(--background);color:var(--color);cursor:text}.web-term-container *{font-family:Menlo,Monaco,Courier New,monospace;font-size:var(--font-size);font-kerning:none;white-space:pre;line-height:var(--line-height);box-sizing:border-box}.editor-cursor{position:absolute;z-index:2;height:var(--line-height);background-color:var(--background);color:var(--color)}.editor-cursor.cursor-focus{background-color:var(--selection-bg);color:var(--selection)}.editor-cursor .editor-cursor-border{position:absolute;top:0;left:0;width:100%;height:100%;border:1px solid var(--selection-bg)}.editor-cursor .editor-cursor-text{position:absolute;top:0;left:0;width:100%;height:100%}.editor-textarea{color:var(--color)}.term-editor-title{color:var(--color);opacity:.7}.term-display-box>div,.term-below-box>div{padding:2px 0;word-break:break-all;white-space:pre-wrap;color:var(--color)}.term-display-box>div a,.term-below-box>div a{opacity:.7}.term-below-box>div{opacity:.7}")),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();function ft(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function _n(n){if(Array.isArray(n))return ft(n)}function Sn(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function kt(n,e,t){return e=q(e),Tn(n,re()?Reflect.construct(e,t||[],q(n).constructor):e.apply(n,t))}function L(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Nt(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,ie(r.key),r)}}function H(n,e,t){return e&&Nt(n.prototype,e),t&&Nt(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function $n(n,e,t){return(e=ie(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function q(n){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(n)}function _t(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&dt(n,e)}function re(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(re=function(){return!!n})()}function Cn(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function En(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function B(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vt(Object(t),!0).forEach(function(r){$n(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Vt(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Tn(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sn(n)}function dt(n,e){return dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},dt(n,e)}function Pn(n){return _n(n)||Cn(n)||An(n)||En()}function jn(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ie(n){var e=jn(n,"string");return typeof e=="symbol"?e:e+""}function An(n,e){if(n){if(typeof n=="string")return ft(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ft(n,e):void 0}}var On=function(){function n(e,t){var r=this;L(this,n),this.pushedCurrent=!1,this.provider=t,this.history=new Jt({max:e,mode:bt.Append});var i=t.read();i instanceof Promise?i.then(function(o){r._initHistory(o)}):this._initHistory(i)}return H(n,[{key:"_initHistory",value:function(e){var t,r=JSON.parse(e);(t=this.history).push.apply(t,Pn(r))}},{key:"up",value:function(e){if(this.history.isActive||(this.push(e),this.history.back(),this.pushedCurrent=!0),this.history.canBack()){var t=this.history.back();return t}else return null}},{key:"down",value:function(){return this.history.canForward()?this.history.forward():null}},{key:"checkLatest",value:function(e){this.history.isLatest&&(this.history.replace(e),this.save())}},{key:"push",value:function(e){this.pushedCurrent&&(this.history.pop(),this.pushedCurrent=!1),this.history.push(e),this.save()}},{key:"save",value:function(){this.provider.write(JSON.stringify(this.history.list))}},{key:"clear",value:function(){this.pushedCurrent=!1,this.history.clear(),this.save()}}])}();function Rt(){var n=navigator.userAgent;return/macintosh|mac os x/i.test(n)}function vt(n){return Rt()&&n.metaKey||!Rt()&&n.ctrlKey}function zn(n){var e=!1;return n.on("compositionstart",function(){e=!0}),n.on("compositionend",function(){e=!1}),function(){return e}}function oe(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return n instanceof HTMLElement?new T(n):n instanceof T?n:typeof n=="string"?x.div[e?"html":"text"](n+t):x.div[e?"html":"text"](n.toString()+t)}var Ln=function(){function n(){L(this,n),this.container=x.div.class("term-display-box").on("click",function(e){e.stopPropagation()})}return H(n,[{key:"pushContent",value:function(e,t){this.container.append(oe(e,t,`
`))}}])}(),Kt="web-term-container",Hn=2,ae={FullParent:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}},se={padding:5,fontSize:14,color:"#fff",background:"#000",selectionBackground:"#fff",selectionColor:"#000"};function In(n){if(!n)return!1;var e=n.charCodeAt(0);return e>=128}var ue=function(n){function e(t){var r,i=t.header,o=i===void 0?"":i,s=t.paddingTop,h=s===void 0?5:s,l=t.paddingLeft,c=l===void 0?5:l,u=t.size,d=u===void 0?"full":u,a=t.mode,f=a===void 0?"inline":a,p=t.tab,v=p===void 0?"  ":p,y=t.fontSize,g=y===void 0?se.fontSize:y;L(this,e),r=kt(this,e),r.SingleCharWidth=9,r.MultiCharWidth=15,r.fontSize=0,r.lineHeight=0,r.wrapLine=!0,r.store=Yt({cx:0,cy:0}),r.header="",r._prevHeader="",r._prevHeaderWidth=0,r._pasteTimer=null,r._prevPos={x:-1,y:-1},r._isShowCursor=!1,r.setFontSize(g),r.size=d,r.mode=f,wn(v),r.paddingTop=h,r.paddingLeft=c;var m=x.canvas;return r.ctx=m.el.getContext("2d"),r.resize(!0),r.header=o,r.render(),r._monitorStart(),r}return _t(e,n),H(e,[{key:"setFontSize",value:function(t){this.fontSize=t,this.lineHeight=t+2}},{key:"value",get:function(){var t=this.fullValue,r=this.header.length;return r?t.substring(r):t}},{key:"fullValue",get:function(){return this.textarea.value()}},{key:"beforeValue",get:function(){var t=this.fullValue,r=this.header.length,i=this.textarea.el.selectionStart;return typeof i=="number"&&i>0?t.substring(r,i):t.substring(r)}},{key:"headerWidth",get:function(){var t=this.header;return(t!==this._prevHeader||this._prevHeaderWidth<0)&&(this._prevHeader=t,this._prevHeaderWidth=this.measureTextWidth(t)),this._prevHeaderWidth}},{key:"_monitorStart",value:function(){var t=this;setTimeout(function(){t.textarea.el.clientWidth?t.relocateCursorPosition():t._monitorStart()},100)}},{key:"render",value:function(){var t=this.size==="full";this.container=x.div.style({position:"relative",height:t?"100%":"".concat(this.lineHeight+2*this.paddingTop,"px")}).append(this.cursor=x.div.class("editor-cursor").append(x.div.class("editor-cursor-border"),this.cursorText=x.div.class("editor-cursor-text")),this.textarea=x.textarea.class("editor-textarea").value(this.header).style(B(B({},ae.FullParent),{},{padding:"".concat(this.paddingTop,"px ").concat(this.paddingLeft,"px"),backgroundColor:"transparent",border:"none",outline:"none",resize:"none",zIndex:"1",caretColor:"transparent"}))),this.wrapLine&&this.textarea.style({wordBreak:"break-all",whiteSpace:"pre-wrap"}),this.initEvents()}},{key:"initEvents",value:function(){var t=this,r=!1,i=this.textarea.el,o=function(u){return u.code==="Backspace"||u.code==="Enter"},s=zn(this.textarea),h=null,l=this.compatSelChange();this.textarea.on("keydown",function(u){if(!s()){if(t.mode==="inline"){if(u.code==="Enter")if(vt(u))t.pushText(`
`);else{u.preventDefault(),t.emit("key","Enter");return}else if(u.code==="ArrowUp"||u.code==="ArrowDown"||u.code==="Tab"){u.preventDefault(),t.emit("key",u.code);return}}if(u.code==="Tab"&&i.selectionStart!==i.selectionEnd&&t.showCursor(!1),xn.call(i,u),o(u)&&(r=!0),u.code==="Backspace"){var d=t.getCursorPosition(),a=d.x,f=d.y,p=d.isRange;f===0&&a<=t.headerWidth&&!p&&u.preventDefault()}vt(u)&&u.code==="KeyZ"&&(clearTimeout(h),h=setTimeout(function(){t.relocateCursorPosition()},50))}}).on("keyup",function(u){s()||o(u)&&(r=!1)}).on("paste",function(){t._pasteTimer=setTimeout(function(){t.relocateCursorPosition()},50)}).on("input",function(u){if(u.preventDefault(),r&&t.relocateCursorPosition(),t.size==="auto"){var d=t._countContentHeight(t.fullValue,!0);d!=i.clientHeight&&t.textarea.style("height","".concat(d,"px"))}t.emit("input")}).on("selectionchange",function(){l&&(l(),l=null),t._onSelectionChange()}).on("scroll",function(){t.relocateCursorPosition()}).on("focus",function(){t.cursor.addClass("cursor-focus")}).on("blur",function(){t.cursor.removeClass("cursor-focus")}).on("cut",function(){var u=t.textarea.el;u.selectionStart!==u.selectionEnd&&t.relocateCursorPosition()});var c=i.clientWidth;globalThis.addEventListener("resize",function(){i.clientWidth!==c&&(c=i.clientWidth,t.relocateCursorPosition())})}},{key:"_countContentHeight",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._countContentSize(t,r).height}},{key:"_countContentSize",value:function(t){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=t.split(`
`),s=0,h=o.map(function(l){var c=r.countSingleLineInfo(l);return s+=c.length*r.lineHeight,c});return{lines:h,height:s+(i?2*this.paddingTop:0)}}},{key:"countSingleLineInfo",value:function(t){var r=this,i=this._getLineBoxWidth();if(i<=0)return[{content:t,width:this.measureTextWidth(t)}];var o=Math.floor(i/this.MultiCharWidth);if(t.length<=o)return[{content:t,width:this.measureTextWidth(t)}];for(var s=[],h=t.length,l=0,c=l+o,u=function(){var y=t.substring(l,c);return{content:y,width:r.measureTextWidth(y)}};h>o;){var d=u(),a=d.content,f=d.width,p=void 0,v=void 0;do{if(p=a,v=f,c>=t.length){c++;break}a+=t[c],f=this.measureTextWidth(a),c++}while(f<=i);s.push({content:p,width:v}),l=c-1,c=l+o,h-=p.length}return l<t.length&&s.push(u()),s}},{key:"_onSelectionChange",value:function(){var t=this.textarea.el;if(t.selectionStart===t.selectionEnd)this.relocateCursorPosition();else{if(t.clientWidth===0)return;var r=this.header.length;t.selectionStart<r&&(t.selectionStart=r);var i=t.value.length;t.selectionEnd>i&&(t.selectionEnd=i)}}},{key:"compatSelChange",value:function(){var t=this,r=function(){var i=t.textarea.el;document.activeElement===i&&t._onSelectionChange()};return document.addEventListener("selectionchange",r),function(){return document.removeEventListener("selectionchange",r)}}},{key:"measureTextWidth",value:function(t){return t?this.ctx.measureText(t).width:0}},{key:"_getLineBoxWidth",value:function(){return this.textarea.el.clientWidth-2*this.paddingLeft}},{key:"getCursorPosition",value:function(){var t=this.textarea.el,r=t.selectionStart,i=t.selectionEnd,o=t.value.substring(0,r),s=this._getLineBoxWidth(),h=t.value[r]||"",l=0,c=0;if(this.wrapLine){var u,d=this._countContentSize(o);c=d.height-this.lineHeight,l=((u=d.lines.pop())===null||u===void 0||(u=u.pop())===null||u===void 0?void 0:u.width)||0}else l=this.measureTextWidth(o),c=(o.split(`
`).length-1)*this.lineHeight;var a=In(h)?this.MultiCharWidth:this.SingleCharWidth;return l+a>s&&(l=0,c+=this.lineHeight),(this._prevPos.x!==l||this._prevPos.y!==c)&&(Object.assign(this._prevPos,{x:l,y:c}),this.emit("cursor-change",{x:l,y:c,word:h,wordWidth:a,beforeValue:this.beforeValue,value:this.value})),{x:l,y:c,isRange:r!=i,word:h,wordWidth:a}}},{key:"showCursor",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._isShowCursor!==t&&(this.cursor.style("visibility",t?"visible":"hidden"),this._isShowCursor=t)}},{key:"relocateCursorPosition",value:function(){clearTimeout(this._pasteTimer);var t=this.textarea.el;this.showCursor();var r=this.getCursorPosition(),i=r.x,o=r.y,s=r.word,h=r.wordWidth,l=i;if(o===0&&i<this.headerWidth){var c=this.header.length;t.setSelectionRange(c,c),l=this.headerWidth}this.cursor.style({left:"".concat(l+this.paddingLeft,"px"),top:"".concat(o+this.paddingTop-t.scrollTop,"px"),width:"".concat(h,"px")}),this.cursorText.text(s)}},{key:"focus",value:function(){this.textarea.el.focus()}},{key:"pushText",value:function(t){var r=this.textarea.el;r.selectionStart=r.selectionEnd=r.value.length,this.insertText(t)}},{key:"insertText",value:function(t){t&&document.execCommand("insertText",!1,t)}},{key:"replaceText",value:function(t){this.clearContent(!1),this.pushText(t),this.relocateCursorPosition()}},{key:"clearContent",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,r=this.textarea.el,i=r.value,o=!i.startsWith(this.header),s=this.header.length;r.selectionStart=o?0:s,r.selectionEnd=i.length+1,s!==i.length&&(document.execCommand("delete",!1),o&&this.insertText(this.header),t&&this.relocateCursorPosition())}},{key:"setCursorToHead",value:function(){var t=this.textarea.el;t.selectionStart=t.selectionEnd=this.header.length}},{key:"resize",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.ctx.font="".concat(this.fontSize,'px Menlo, Monaco, "Courier New", monospace'),this.SingleCharWidth=this.measureTextWidth("a"),this.MultiCharWidth=this.measureTextWidth("一"),!t){this._prevHeaderWidth=-1;var r=this.size==="full";r||this.container.style("height","".concat(this.lineHeight+2*this.paddingTop,"px")),this.relocateCursorPosition()}}}])}(mt.Eveit),Wn=function(n){function e(t,r){var i;return L(this,e),i=kt(this,e),i.editor=new ue({mode:"full",paddingLeft:0,paddingTop:0,fontSize:r.fontSize}),i.container=x.div.style(B(B({},ae.FullParent),{},{padding:r.padding,position:"relative",zIndex:100,flexDirection:"column"})).append(i.title=x.div.class("term-editor-title").text(""),i.editor.container.style({flex:"1",height:"auto"})).show(function(){return t.showEditor},"flex"),i.container.on("click",function(o){o.stopPropagation()}),i.container.on("keydown",function(o){if(o.code==="KeyS"&&vt(o)){var s=i.editor.value;i.editor.clearContent(),i.emit("edit-done",s),o.preventDefault()}o.code==="Escape"&&(i.editor.clearContent(),i.emit("edit-cancel"))}),i}return _t(e,n),H(e,[{key:"vi",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this.editor.textarea.el.focus(),this.editor.replaceText(t),this.title.style({paddingBottom:r?"5px":0})[i?"html":"text"](r)}}])}(mt.Eveit),Mn=function(){function n(){L(this,n),this.container=x.div.class("term-below-box").on("click",function(e){e.stopPropagation()})}return H(n,[{key:"write",value:function(e,t){var r=this.container.children();r.length>0&&r[r.length-1].remove(),this.push(e,t)}},{key:"push",value:function(e,t){this.container.append(oe(e,t,`
`))}},{key:"clear",value:function(){this.container.empty()}}])}();function Dn(){var n="_web_term_ui_history;";return{read:function(){return localStorage.getItem(n)||"[]"},write:function(e){return localStorage.setItem(n,e),!0}}}var Fn=function(n){function e(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.title,o=i===void 0?"":i,s=r.titleHtml,h=s===void 0?!0:s,l=r.historyMax,c=l===void 0?100:l,u=r.storageProvider,d=u===void 0?Dn():u,a=r.container,f=r.header,p=r.theme,v=r.style,y=v===void 0?{}:v;if(L(this,e),t=kt(this,e),t.style=B({},se),t.store=Yt({showEditor:!1}),t.theme="dark",t.title=o,t.history=new On(c,d),Object.assign(t.style,y),t.editor=new Wn(t.store,t.style),t.input=new ue({paddingTop:Hn,paddingLeft:0,header:f,size:"auto",mode:"inline",fontSize:t.style.fontSize}),t.display=new Ln,t.below=new Mn,o&&t.display.pushContent(o,h),!a)t.container=x.div.class(Kt).style({position:"fixed",top:0,left:0,width:"100%",height:"100%"}),mn(t.container,"body");else{if(typeof a=="string"){var g=document.querySelector(a);if(!g)throw new Error("Container not exists");t.container=new T(g)}else t.container=new T(a);t.container.addClass(Kt)}return t.initEvents(),p?t.setTheme(p):t.setColor(y),t._setFontSize(t.style.fontSize),t.render(),t}return _t(e,n),H(e,[{key:"value",get:function(){return this.input.value}},{key:"beforeValue",get:function(){return this.input.beforeValue}},{key:"header",get:function(){return this.input.header}},{key:"initEvents",value:function(){var t=this;this.input.on("key",function(i){switch(i){case"Enter":{var o=t.input.value;o&&t.history.push(o),t.emit("enter",o)}break;case"ArrowDown":{var s=t.history.down();typeof s=="string"&&t.input.replaceText(s)}break;case"ArrowUp":{var h=t.history.up(t.input.value);typeof h=="string"?t.input.replaceText(h):t.input.setCursorToHead()}break;case"Tab":t.emit("tab",t.input.beforeValue);break}}),this.input.on("input",function(){t.history.checkLatest(t.input.value),t.emit("input",t.value,t.input.beforeValue)}),this.container.on("click",function(){t.input.focus()});var r=function(){t.store.showEditor=!1,t.input.focus()};this.editor.on("edit-done",function(i){r(),t.emit("edit-done",i)}),this.editor.on("edit-cancel",function(){r(),t.emit("edit-cancel")}),this.editor.editor.on("cursor-change",function(i){t.emit("edit-cursor-change",i)}),this.input.on("cursor-change",function(i){t.emit("cursor-change",i)})}},{key:"render",value:function(){var t=this;this.container.style({overflow:function(){return t.store.showEditor?"hidden":"auto"}}).append(this.mainContainer=x.div.style("padding",this.style.padding).append(this.display.container,this.input.container,this.below.container).show(function(){return!t.store.showEditor}),this.editor.container)}},{key:"setTheme",value:function(t){var r="#fff",i="#000",o=t==="light";this.theme=t,this.setColor({background:o?r:i,color:o?i:r,selectionBackground:o?i:r,selectionColor:o?r:i})}},{key:"setColor",value:function(t){Object.assign(this.style,t),this.container.style({"--background":this.style.background,"--color":this.style.color,"--selection":this.style.selectionColor,"--selection-bg":this.style.selectionBackground})}},{key:"_setFontSize",value:function(t){this.style.fontSize=t;var r=t+2;this.container.style({"--font-size":t,"--line-height":r})}},{key:"fontSize",get:function(){return this.style.fontSize}},{key:"setFontSize",value:function(t){this._setFontSize(t),this.editor.editor.setFontSize(t),this.input.setFontSize(t),this.resize()}},{key:"clearInputHistory",value:function(){this.history.clear()}},{key:"write",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.display.pushContent(this.input.fullValue,r),t&&this.display.pushContent(t,r),this.input.clearContent(),this.scrollToBottom()}},{key:"insertEdit",value:function(t){this.editor.editor.insertText(t)}},{key:"replaceEdit",value:function(t){this.editor.editor.replaceText(t)}},{key:"pushEdit",value:function(t){this.editor.editor.pushText(t)}},{key:"vi",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this.store.showEditor=!0,this.editor.vi(t,r,i)}},{key:"clearTerminal",value:function(){this.display.container.empty(),this.input.clearContent()}},{key:"newLine",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.write("",t)}},{key:"setHeader",value:function(t){this.input.header=t}},{key:"scrollToBottom",value:function(){this.container.el.scrollTop=this.container.el.scrollHeight}},{key:"focus",value:function(){this.input.focus()}},{key:"writeBelow",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.below.write(t,r),this.scrollToBottom()}},{key:"pushBelow",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.below.push(t,r),this.scrollToBottom()}},{key:"clearBelow",value:function(){this.below.clear()}},{key:"resize",value:function(){this.editor.editor.resize(),this.input.resize()}}])}(mt.Eveit);const b=new Fn({title:`This is a Demo. Type "help" to get Help.
`,container:"#container",header:"/ admin$ ",style:{padding:10}});b.on("enter",n=>{if(!n)b.newLine();else if(n==="vi"||n.startsWith("vi "))b.vi(`test
11`,`${n.substring(3)} "Ctrl/Cmd + s" to Save, "Esc" to Exit`);else if(n==="clear")b.clearTerminal();else if(n==="help")Bn();else if(n==="progress")Nn();else if(n.startsWith("header"))b.setHeader(`/ ${n.replace("header","").trim()}$ `),b.write(`SetHeader "${n}"`);else if(n==="theme"){const e=b.theme==="dark"?"light":"dark";b.setTheme(e),b.write(`Set theme to "${e}"`)}else if(n.startsWith("font")){const e=parseInt(n.replace("font","").trim());b.setFontSize(e),b.write(`Set FontSize = "${e}"`)}else b.write(`Exec "${n}"`)});b.on("edit-done",n=>{b.write(`Edit Save: ${n}`)});b.on("tab",()=>{b.insertEdit("[test]")});function Bn(){b.write(["vi      : Open vi Editor","clear   : Clear Terminal","progress: Mock Progress Bar",'header  : "header <name>" to Set Header',"theme   : Toggle theme between dark and light",'font    : "font <size>" to set font-size'].join(`
`),!1)}function Nn(){let n=0;const e=Date.now(),t=setInterval(()=>{n+=Math.round(Math.random()*10),n>100&&(n=100,clearInterval(t)),b.writeBelow(`Progressing...[${n}%]`),n===100&&(b.clearBelow(),b.write(`Progress Done in ${Date.now()-e}ms!`))},100)}document.getElementById("code").appendChild(Re({code:`import {WebTerm} from 'web-term-ui';
const term = new WebTerm({
    title: 'This is a Demo. Type "help" to get Help.\\n',
    container: '#container',
    header: '/ admin$ ',
    // theme: 'light',
    style: {padding: 10}
});
term.on('enter', v => {
    if (!v) {
        term.newLine();
    } else if (v === 'vi' || v.startsWith('vi ')) {
        term.vi('test\\n11', \`\${v.substring(3)} "Ctrl/Cmd + s" to Save, "Esc" to Exit\`);
    } else if (v === 'clear') {
        term.clearTerminal();
    } else if (v === 'help') {
        writeHelp();
    } else if (v === 'progress') {
        mockProgress();
    } else if (v.startsWith('header')) {
        term.setHeader(\`/ \${v.replace('header', '').trim()}$ \`);
        term.write(\`SetHeader "\${v}"\`);
    } else if (v === 'theme') {
        const target = term.theme === 'dark' ? 'light' : 'dark';
        term.setTheme(target);
        term.write(\`Set theme to "\${target}"\`);
    } else if (v.startsWith('font')) {
        const size = parseInt(v.replace('font', '').trim());
        term.setFontSize(size);
        term.write(\`Set FontSize = "\${size}"\`);
    } else {
        term.write(\`Exec "\${v}"\`);
    }
});
term.on('edit-done', v => {
    term.write(\`Edit Save: \${v}\`);
});
term.on('tab', () => {
    term.insertEdit('[test]');
});
function writeHelp () {
    term.write([
        'vi      : Open vi Editor',
        'clear   : Clear Terminal',
        'progress: Mock Progress Bar',
        'header  : "header <name>" to Set Header',
        'theme   : Toggle theme between dark and light',
        'font    : "font <size>" to set font-size'
    ].join('\\n'), false);
}
function mockProgress () {
    let progress = 0;
    const time = Date.now();
    const interval = setInterval(() => {
        progress += Math.round(Math.random() * 10);
        if (progress > 100) {
            progress = 100;
            clearInterval(interval);
        }
        term.writeBelow(\`Progressing...[\${progress}%]\`);
        if (progress === 100) {
            term.clearBelow();
            term.write(\`Progress Done in \${Date.now() - time}ms!\`);
        }
    }, 100);
}`}));window.term=b;
